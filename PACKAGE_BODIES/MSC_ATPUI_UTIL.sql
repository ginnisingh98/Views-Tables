--------------------------------------------------------
--  DDL for Package Body MSC_ATPUI_UTIL
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."MSC_ATPUI_UTIL" AS
/*  $Header: MSCATPUB.pls 120.1 2005/06/17 13:27:49 appldev  $ */

PROCEDURE populate_schedule_temp_table(
		p_atp_schedule_temp IN MSC_ATPUI_UTIL.ATP_SCHEDULE_TEMP_TYP,
		p_return_status out nocopy VARCHAR2,
		p_error_message out nocopy VARCHAR2) IS
BEGIN
 FORALL lCounter IN 1 .. p_atp_schedule_temp.ACTION.COUNT
 INSERT INTO MRP_ATP_SCHEDULE_TEMP
 ( ACTION, CALLING_MODULE, SESSION_ID, ORDER_HEADER_ID, ORDER_LINE_ID,
 INVENTORY_ITEM_ID, ORGANIZATION_ID, SR_INSTANCE_ID, ORGANIZATION_CODE, ORDER_NUMBER,
 SOURCE_ORGANIZATION_ID, CUSTOMER_ID, CUSTOMER_SITE_ID, DESTINATION_TIME_ZONE, QUANTITY_ORDERED,                         UOM_CODE, REQUESTED_SHIP_DATE, REQUESTED_ARRIVAL_DATE, LATEST_ACCEPTABLE_DATE, DELIVERY_LEAD_TIME,
 FREIGHT_CARRIER, SHIP_METHOD, DEMAND_CLASS, SHIP_SET_NAME, ARRIVAL_SET_NAME,
 OVERRIDE_FLAG, SCHEDULED_SHIP_DATE, SCHEDULED_ARRIVAL_DATE, AVAILABLE_QUANTITY, REQUESTED_DATE_QUANTITY,                  GROUP_SHIP_DATE, GROUP_ARRIVAL_DATE, VENDOR_ID, VENDOR_SITE_ID, INSERT_FLAG,
 ERROR_CODE, ERROR_MESSAGE, SEQUENCE_NUMBER, FIRM_FLAG, INVENTORY_ITEM_NAME,
 SOURCE_ORGANIZATION_CODE, INSTANCE_ID1, ORDER_LINE_NUMBER, PROMISE_DATE, CUSTOMER_NAME,
 CUSTOMER_LOCATION, OLD_LINE_SCHEDULE_DATE, OLD_SOURCE_ORGANIZATION_CODE, SCENARIO_ID, VENDOR_NAME,
 VENDOR_SITE_NAME, STATUS_FLAG, MDI_ROWID, DEMAND_SOURCE_TYPE, DEMAND_SOURCE_DELIVERY,
 ATP_LEAD_TIME, OE_FLAG, ITEM_DESC, INTRANSIT_LEAD_TIME, SHIP_METHOD_TEXT,
 END_PEGGING_ID, SHIP_SET_ID, ARRIVAL_SET_ID, SHIPMENT_NUMBER, OPTION_NUMBER,
 PROJECT_ID, TASK_ID, PROJECT_NUMBER, TASK_NUMBER, EXCEPTION1,
 EXCEPTION2, EXCEPTION3, EXCEPTION4, EXCEPTION5, EXCEPTION6,
 EXCEPTION7, EXCEPTION8, EXCEPTION9, EXCEPTION10, EXCEPTION11,
 EXCEPTION12, EXCEPTION13, EXCEPTION14, EXCEPTION15, FIRM_SOURCE_ORG_ID,
 FIRM_SOURCE_ORG_CODE, FIRM_SHIP_DATE, FIRM_ARRIVAL_DATE, OLD_SOURCE_ORGANIZATION_ID, OLD_DEMAND_CLASS,
 ATTRIBUTE_06, REQUEST_ITEM_ID, REQUEST_ITEM_NAME, REQ_ITEM_AVAILABLE_DATE, REQ_ITEM_AVAILABLE_DATE_QTY,
 REQ_ITEM_REQ_DATE_QTY, SALES_REP, CUSTOMER_CONTACT, SUBST_FLAG, SUBSTITUTION_TYP_CODE,
 REQ_ITEM_DETAIL_FLAG, OLD_INVENTORY_ITEM_ID, COMPILE_DESIGNATOR, CREATION_DATE, CREATED_BY,
 LAST_UPDATE_DATE, LAST_UPDATED_BY, LAST_UPDATE_LOGIN, FLOW_STATUS_CODE, ASSIGNMENT_SET_ID,
 DIAGNOSTIC_ATP_FLAG)
 VALUES
 ( p_atp_schedule_temp.ACTION(lCounter) ,p_atp_schedule_temp.CALLING_MODULE(lCounter) ,
 p_atp_schedule_temp.SESSION_ID(lCounter), p_atp_schedule_temp.ORDER_HEADER_ID(lCounter) ,
 p_atp_schedule_temp.ORDER_LINE_ID (lCounter), p_atp_schedule_temp.INVENTORY_ITEM_ID(lCounter) ,
 p_atp_schedule_temp.ORGANIZATION_ID(lCounter), p_atp_schedule_temp.SR_INSTANCE_ID(lCounter),
 p_atp_schedule_temp.ORGANIZATION_CODE(lCounter), p_atp_schedule_temp.ORDER_NUMBER(lCounter) ,
 p_atp_schedule_temp.SOURCE_ORGANIZATION_ID(lCounter), p_atp_schedule_temp.CUSTOMER_ID(lCounter) ,
 p_atp_schedule_temp.CUSTOMER_SITE_ID(lCounter), p_atp_schedule_temp.DESTINATION_TIME_ZONE(lCounter) ,
 p_atp_schedule_temp.QUANTITY_ORDERED(lCounter), p_atp_schedule_temp.UOM_CODE(lCounter),
 p_atp_schedule_temp.REQUESTED_SHIP_DATE(lCounter), p_atp_schedule_temp.REQUESTED_ARRIVAL_DATE(lCounter),
 p_atp_schedule_temp.LATEST_ACCEPTABLE_DATE(lCounter), p_atp_schedule_temp.DELIVERY_LEAD_TIME(lCounter),
 p_atp_schedule_temp.FREIGHT_CARRIER(lCounter), p_atp_schedule_temp.SHIP_METHOD(lCounter),
 p_atp_schedule_temp.DEMAND_CLASS(lCounter), p_atp_schedule_temp.SHIP_SET_NAME(lCounter),
 p_atp_schedule_temp.ARRIVAL_SET_NAME(lCounter), p_atp_schedule_temp.OVERRIDE_FLAG(lCounter),
 p_atp_schedule_temp.SCHEDULED_SHIP_DATE(lCounter), p_atp_schedule_temp.SCHEDULED_ARRIVAL_DATE(lCounter),
 p_atp_schedule_temp.AVAILABLE_QUANTITY(lCounter), p_atp_schedule_temp.REQUESTED_DATE_QUANTITY(lCounter),
 p_atp_schedule_temp.GROUP_SHIP_DATE(lCounter), p_atp_schedule_temp.GROUP_ARRIVAL_DATE(lCounter),
 p_atp_schedule_temp.VENDOR_ID(lCounter),
 p_atp_schedule_temp.VENDOR_SITE_ID(lCounter), p_atp_schedule_temp.INSERT_FLAG(lCounter),
 p_atp_schedule_temp.ERROR_CODE(lCounter), p_atp_schedule_temp.ERROR_MESSAGE(lCounter),
 p_atp_schedule_temp.SEQUENCE_NUMBER(lCounter), p_atp_schedule_temp.FIRM_FLAG(lCounter),
 p_atp_schedule_temp.INVENTORY_ITEM_NAME(lCounter), p_atp_schedule_temp.SOURCE_ORGANIZATION_CODE(lCounter),
 p_atp_schedule_temp.INSTANCE_ID1(lCounter),
 p_atp_schedule_temp.ORDER_LINE_NUMBER(lCounter), p_atp_schedule_temp.PROMISE_DATE(lCounter),
 p_atp_schedule_temp.CUSTOMER_NAME(lCounter), p_atp_schedule_temp.CUSTOMER_LOCATION(lCounter),
 p_atp_schedule_temp.OLD_LINE_SCHEDULE_DATE(lCounter),
 p_atp_schedule_temp.OLD_SOURCE_ORGANIZATION_CODE(lCounter),
 p_atp_schedule_temp.SCENARIO_ID(lCounter), p_atp_schedule_temp.VENDOR_NAME(lCounter),
 p_atp_schedule_temp.VENDOR_SITE_NAME(lCounter), p_atp_schedule_temp.STATUS_FLAG(lCounter),
 p_atp_schedule_temp.MDI_ROWID(lCounter), p_atp_schedule_temp.DEMAND_SOURCE_TYPE(lCounter),
 p_atp_schedule_temp.DEMAND_SOURCE_DELIVERY(lCounter), p_atp_schedule_temp.ATP_LEAD_TIME(lCounter),
 p_atp_schedule_temp.OE_FLAG(lCounter),
 p_atp_schedule_temp.ITEM_DESC(lCounter), p_atp_schedule_temp.INTRANSIT_LEAD_TIME(lCounter),
 p_atp_schedule_temp.SHIP_METHOD_TEXT(lCounter), p_atp_schedule_temp.END_PEGGING_ID(lCounter),
 p_atp_schedule_temp.SHIP_SET_ID(lCounter),  p_atp_schedule_temp.ARRIVAL_SET_ID(lCounter),
 p_atp_schedule_temp.SHIPMENT_NUMBER(lCounter),
 p_atp_schedule_temp.OPTION_NUMBER(lCounter), p_atp_schedule_temp.PROJECT_ID(lCounter),
 p_atp_schedule_temp.TASK_ID(lCounter), p_atp_schedule_temp.PROJECT_NUMBER(lCounter),
 p_atp_schedule_temp.TASK_NUMBER(lCounter), p_atp_schedule_temp.EXCEPTION1(lCounter),
 p_atp_schedule_temp.EXCEPTION2(lCounter), p_atp_schedule_temp.EXCEPTION3(lCounter),
 p_atp_schedule_temp.EXCEPTION4(lCounter), p_atp_schedule_temp.EXCEPTION5(lCounter),
 p_atp_schedule_temp.EXCEPTION6(lCounter), p_atp_schedule_temp.EXCEPTION7(lCounter),
 p_atp_schedule_temp.EXCEPTION8(lCounter), p_atp_schedule_temp.EXCEPTION9(lCounter),
 p_atp_schedule_temp.EXCEPTION10(lCounter), p_atp_schedule_temp.EXCEPTION11(lCounter),
 p_atp_schedule_temp.EXCEPTION12(lCounter), p_atp_schedule_temp.EXCEPTION13(lCounter),
 p_atp_schedule_temp.EXCEPTION14(lCounter), p_atp_schedule_temp.EXCEPTION15(lCounter),
 p_atp_schedule_temp.FIRM_SOURCE_ORG_ID(lCounter), p_atp_schedule_temp.FIRM_SOURCE_ORG_CODE(lCounter),
 p_atp_schedule_temp.FIRM_SHIP_DATE(lCounter) ,p_atp_schedule_temp.FIRM_ARRIVAL_DATE(lCounter),
 p_atp_schedule_temp.OLD_SOURCE_ORGANIZATION_ID(lCounter),  p_atp_schedule_temp.OLD_DEMAND_CLASS(lCounter),
 p_atp_schedule_temp.ATTRIBUTE_06(lCounter) ,p_atp_schedule_temp.REQUEST_ITEM_ID(lCounter),
 p_atp_schedule_temp.REQUEST_ITEM_NAME(lCounter) ,p_atp_schedule_temp.REQ_ITEM_AVAILABLE_DATE(lCounter),
 p_atp_schedule_temp.REQ_ITEM_AVAILABLE_DATE_QTY(lCounter), p_atp_schedule_temp.REQ_ITEM_REQ_DATE_QTY(lCounter),
 p_atp_schedule_temp.SALES_REP(lCounter),
 p_atp_schedule_temp.CUSTOMER_CONTACT(lCounter) ,p_atp_schedule_temp.SUBST_FLAG(lCounter),
 p_atp_schedule_temp.SUBSTITUTION_TYP_CODE(lCounter) ,p_atp_schedule_temp.REQ_ITEM_DETAIL_FLAG(lCounter),
 p_atp_schedule_temp.OLD_INVENTORY_ITEM_ID(lCounter),
 p_atp_schedule_temp.COMPILE_DESIGNATOR(lCounter) ,p_atp_schedule_temp.CREATION_DATE(lCounter),
 p_atp_schedule_temp.CREATED_BY(lCounter) ,p_atp_schedule_temp.LAST_UPDATE_DATE(lCounter),
 p_atp_schedule_temp.LAST_UPDATED_BY(lCounter)  ,p_atp_schedule_temp.LAST_UPDATE_LOGIN(lCounter) ,
 p_atp_schedule_temp.FLOW_STATUS_CODE(lCounter)  ,p_atp_schedule_temp.ASSIGNMENT_SET_ID(lCounter),
 p_atp_schedule_temp.DIAGNOSTIC_ATP_FLAG(lCounter));
commit;
EXCEPTION
  WHEN OTHERS THEN
     p_return_status :='E';
     p_error_message := substr(sqlerrm,1,100);
END populate_schedule_temp_table;

PROCEDURE get_schedule_temp_rows(p_session_id in NUMBER,
				p_return_status out nocopy VARCHAR2,
				p_error_message out nocopy VARCHAR2) IS
p_atp_schedule_temp MSC_ATPUI_UTIL.ATP_SCHEDULE_TEMP_TYP;
p_atp_details_temp  MSC_ATPUI_UTIL.ATP_details_rec_type;

BEGIN
 p_return_status :='S';

 SELECT
 ACTION, CALLING_MODULE, SESSION_ID, ORDER_HEADER_ID, ORDER_LINE_ID,
 INVENTORY_ITEM_ID, ORGANIZATION_ID, SR_INSTANCE_ID, ORGANIZATION_CODE, ORDER_NUMBER,
 SOURCE_ORGANIZATION_ID, CUSTOMER_ID, CUSTOMER_SITE_ID, DESTINATION_TIME_ZONE, QUANTITY_ORDERED,                         UOM_CODE, REQUESTED_SHIP_DATE, REQUESTED_ARRIVAL_DATE, LATEST_ACCEPTABLE_DATE, DELIVERY_LEAD_TIME,
 FREIGHT_CARRIER, SHIP_METHOD, DEMAND_CLASS, SHIP_SET_NAME, ARRIVAL_SET_NAME,
 OVERRIDE_FLAG, SCHEDULED_SHIP_DATE, SCHEDULED_ARRIVAL_DATE, AVAILABLE_QUANTITY, REQUESTED_DATE_QUANTITY,                  GROUP_SHIP_DATE, GROUP_ARRIVAL_DATE, VENDOR_ID, VENDOR_SITE_ID, INSERT_FLAG,
 ERROR_CODE, ERROR_MESSAGE, SEQUENCE_NUMBER, FIRM_FLAG, INVENTORY_ITEM_NAME,
 SOURCE_ORGANIZATION_CODE, INSTANCE_ID1, ORDER_LINE_NUMBER, PROMISE_DATE, CUSTOMER_NAME,
 CUSTOMER_LOCATION, OLD_LINE_SCHEDULE_DATE, OLD_SOURCE_ORGANIZATION_CODE, SCENARIO_ID, VENDOR_NAME,
 VENDOR_SITE_NAME, STATUS_FLAG, MDI_ROWID, DEMAND_SOURCE_TYPE, DEMAND_SOURCE_DELIVERY,
 ATP_LEAD_TIME, OE_FLAG, ITEM_DESC, INTRANSIT_LEAD_TIME, SHIP_METHOD_TEXT,
 END_PEGGING_ID, SHIP_SET_ID, ARRIVAL_SET_ID, SHIPMENT_NUMBER, OPTION_NUMBER,
 PROJECT_ID, TASK_ID, PROJECT_NUMBER, TASK_NUMBER, EXCEPTION1,
 EXCEPTION2, EXCEPTION3, EXCEPTION4, EXCEPTION5, EXCEPTION6,
 EXCEPTION7, EXCEPTION8, EXCEPTION9, EXCEPTION10, EXCEPTION11,
 EXCEPTION12, EXCEPTION13, EXCEPTION14, EXCEPTION15, FIRM_SOURCE_ORG_ID,
 FIRM_SOURCE_ORG_CODE, FIRM_SHIP_DATE, FIRM_ARRIVAL_DATE, OLD_SOURCE_ORGANIZATION_ID, OLD_DEMAND_CLASS,
 ATTRIBUTE_06, REQUEST_ITEM_ID, REQUEST_ITEM_NAME, REQ_ITEM_AVAILABLE_DATE, REQ_ITEM_AVAILABLE_DATE_QTY,
 REQ_ITEM_REQ_DATE_QTY, SALES_REP, CUSTOMER_CONTACT, SUBST_FLAG, SUBSTITUTION_TYP_CODE,
 REQ_ITEM_DETAIL_FLAG, OLD_INVENTORY_ITEM_ID, COMPILE_DESIGNATOR, CREATION_DATE, CREATED_BY,
 LAST_UPDATE_DATE, LAST_UPDATED_BY, LAST_UPDATE_LOGIN, FLOW_STATUS_CODE, ASSIGNMENT_SET_ID,
 DIAGNOSTIC_ATP_FLAG
 BULK COLLECT INTO
  p_atp_schedule_temp.ACTION ,p_atp_schedule_temp.CALLING_MODULE ,
 p_atp_schedule_temp.SESSION_ID, p_atp_schedule_temp.ORDER_HEADER_ID ,
 p_atp_schedule_temp.ORDER_LINE_ID , p_atp_schedule_temp.INVENTORY_ITEM_ID ,
 p_atp_schedule_temp.ORGANIZATION_ID, p_atp_schedule_temp.SR_INSTANCE_ID,
 p_atp_schedule_temp.ORGANIZATION_CODE, p_atp_schedule_temp.ORDER_NUMBER ,
 p_atp_schedule_temp.SOURCE_ORGANIZATION_ID, p_atp_schedule_temp.CUSTOMER_ID ,
 p_atp_schedule_temp.CUSTOMER_SITE_ID, p_atp_schedule_temp.DESTINATION_TIME_ZONE ,
 p_atp_schedule_temp.QUANTITY_ORDERED, p_atp_schedule_temp.UOM_CODE,
 p_atp_schedule_temp.REQUESTED_SHIP_DATE, p_atp_schedule_temp.REQUESTED_ARRIVAL_DATE,
 p_atp_schedule_temp.LATEST_ACCEPTABLE_DATE, p_atp_schedule_temp.DELIVERY_LEAD_TIME,
 p_atp_schedule_temp.FREIGHT_CARRIER, p_atp_schedule_temp.SHIP_METHOD,
 p_atp_schedule_temp.DEMAND_CLASS, p_atp_schedule_temp.SHIP_SET_NAME,
 p_atp_schedule_temp.ARRIVAL_SET_NAME, p_atp_schedule_temp.OVERRIDE_FLAG,
 p_atp_schedule_temp.SCHEDULED_SHIP_DATE, p_atp_schedule_temp.SCHEDULED_ARRIVAL_DATE,
 p_atp_schedule_temp.AVAILABLE_QUANTITY, p_atp_schedule_temp.REQUESTED_DATE_QUANTITY,
 p_atp_schedule_temp.GROUP_SHIP_DATE, p_atp_schedule_temp.GROUP_ARRIVAL_DATE,
 p_atp_schedule_temp.VENDOR_ID,
 p_atp_schedule_temp.VENDOR_SITE_ID, p_atp_schedule_temp.INSERT_FLAG,
 p_atp_schedule_temp.ERROR_CODE, p_atp_schedule_temp.ERROR_MESSAGE,
 p_atp_schedule_temp.SEQUENCE_NUMBER, p_atp_schedule_temp.FIRM_FLAG,
 p_atp_schedule_temp.INVENTORY_ITEM_NAME, p_atp_schedule_temp.SOURCE_ORGANIZATION_CODE,
 p_atp_schedule_temp.INSTANCE_ID1,
 p_atp_schedule_temp.ORDER_LINE_NUMBER, p_atp_schedule_temp.PROMISE_DATE,
 p_atp_schedule_temp.CUSTOMER_NAME, p_atp_schedule_temp.CUSTOMER_LOCATION,
 p_atp_schedule_temp.OLD_LINE_SCHEDULE_DATE, p_atp_schedule_temp.OLD_SOURCE_ORGANIZATION_CODE,
 p_atp_schedule_temp.SCENARIO_ID, p_atp_schedule_temp.VENDOR_NAME,
 p_atp_schedule_temp.VENDOR_SITE_NAME, p_atp_schedule_temp.STATUS_FLAG,
 p_atp_schedule_temp.MDI_ROWID, p_atp_schedule_temp.DEMAND_SOURCE_TYPE,
 p_atp_schedule_temp.DEMAND_SOURCE_DELIVERY, p_atp_schedule_temp.ATP_LEAD_TIME,
 p_atp_schedule_temp.OE_FLAG,
 p_atp_schedule_temp.ITEM_DESC, p_atp_schedule_temp.INTRANSIT_LEAD_TIME,
 p_atp_schedule_temp.SHIP_METHOD_TEXT, p_atp_schedule_temp.END_PEGGING_ID,
 p_atp_schedule_temp.SHIP_SET_ID,  p_atp_schedule_temp.ARRIVAL_SET_ID,
 p_atp_schedule_temp.SHIPMENT_NUMBER,
 p_atp_schedule_temp.OPTION_NUMBER, p_atp_schedule_temp.PROJECT_ID,
 p_atp_schedule_temp.TASK_ID, p_atp_schedule_temp.PROJECT_NUMBER,
 p_atp_schedule_temp.TASK_NUMBER, p_atp_schedule_temp.EXCEPTION1,
 p_atp_schedule_temp.EXCEPTION2, p_atp_schedule_temp.EXCEPTION3,
 p_atp_schedule_temp.EXCEPTION4, p_atp_schedule_temp.EXCEPTION5,
 p_atp_schedule_temp.EXCEPTION6, p_atp_schedule_temp.EXCEPTION7,
 p_atp_schedule_temp.EXCEPTION8, p_atp_schedule_temp.EXCEPTION9,
 p_atp_schedule_temp.EXCEPTION10, p_atp_schedule_temp.EXCEPTION11,
 p_atp_schedule_temp.EXCEPTION12, p_atp_schedule_temp.EXCEPTION13,
 p_atp_schedule_temp.EXCEPTION14, p_atp_schedule_temp.EXCEPTION15,
 p_atp_schedule_temp.FIRM_SOURCE_ORG_ID, p_atp_schedule_temp.FIRM_SOURCE_ORG_CODE,
 p_atp_schedule_temp.FIRM_SHIP_DATE ,p_atp_schedule_temp.FIRM_ARRIVAL_DATE,
 p_atp_schedule_temp.OLD_SOURCE_ORGANIZATION_ID,  p_atp_schedule_temp.OLD_DEMAND_CLASS,
 p_atp_schedule_temp.ATTRIBUTE_06 ,p_atp_schedule_temp.REQUEST_ITEM_ID,
 p_atp_schedule_temp.REQUEST_ITEM_NAME ,p_atp_schedule_temp.REQ_ITEM_AVAILABLE_DATE,
 p_atp_schedule_temp.REQ_ITEM_AVAILABLE_DATE_QTY, p_atp_schedule_temp.REQ_ITEM_REQ_DATE_QTY,
 p_atp_schedule_temp.SALES_REP,
 p_atp_schedule_temp.CUSTOMER_CONTACT ,p_atp_schedule_temp.SUBST_FLAG,
 p_atp_schedule_temp.SUBSTITUTION_TYP_CODE ,p_atp_schedule_temp.REQ_ITEM_DETAIL_FLAG,
 p_atp_schedule_temp.OLD_INVENTORY_ITEM_ID,
 p_atp_schedule_temp.COMPILE_DESIGNATOR ,p_atp_schedule_temp.CREATION_DATE,
 p_atp_schedule_temp.CREATED_BY ,p_atp_schedule_temp.LAST_UPDATE_DATE,
 p_atp_schedule_temp.LAST_UPDATED_BY  ,p_atp_schedule_temp.LAST_UPDATE_LOGIN ,
 p_atp_schedule_temp.FLOW_STATUS_CODE  ,p_atp_schedule_temp.ASSIGNMENT_SET_ID,
 p_atp_schedule_temp.DIAGNOSTIC_ATP_FLAG
 FROM MRP_ATP_SCHEDULE_TEMP
 WHERE session_id = p_session_id and status_flag=2;

 get_details_temp_rows( p_atp_details_temp,
                        p_session_id ,
                        p_return_status ,
                        p_error_message );
 ROLLBACK;

 populate_schedule_temp_table(p_atp_schedule_temp, p_return_status, p_error_message);
 populate_details_temp_table(p_atp_details_temp, p_return_status, p_error_message);

EXCEPTION
  WHEN OTHERS THEN
     p_return_status :='E';
     p_error_message := substr(sqlerrm,1,100);
END get_schedule_temp_rows;

PROCEDURE populate_details_temp_table(p_atp_details_temp IN MSC_ATPUI_UTIL.ATP_details_rec_type,
				p_return_status out nocopy VARCHAR2,
				p_error_message out nocopy VARCHAR2) IS
BEGIN
 FORALL lCounter IN 1 .. p_atp_details_temp.inventory_item_id.COUNT
 INSERT INTO  mrp_atp_details_temp
 (SESSION_ID,
ORDER_LINE_ID,
PEGGING_ID,
PARENT_PEGGING_ID,
ATP_LEVEL,
REQUEST_ITEM_ID,
INVENTORY_ITEM_ID,
INVENTORY_ITEM_NAME,
ORGANIZATION_ID,
ORGANIZATION_CODE,
DEPARTMENT_ID,
DEPARTMENT_CODE,
RESOURCE_ID,
RESOURCE_CODE,
SUPPLIER_ID,
SUPPLIER_NAME,
SUPPLIER_SITE_ID,
SUPPLIER_SITE_NAME,
FROM_ORGANIZATION_ID,
FROM_ORGANIZATION_CODE,
FROM_LOCATION_ID,
FROM_LOCATION_CODE,
TO_ORGANIZATION_ID,
TO_ORGANIZATION_CODE,
TO_LOCATION_ID,
TO_LOCATION_CODE,
SHIP_METHOD,
UOM_CODE,
IDENTIFIER1,
IDENTIFIER2,
IDENTIFIER3,
IDENTIFIER4,
SUPPLY_DEMAND_TYPE,
SUPPLY_DEMAND_DATE,
SUPPLY_DEMAND_QUANTITY,
SUPPLY_DEMAND_SOURCE_TYPE,
ALLOCATED_QUANTITY,
SOURCE_TYPE,
RECORD_TYPE,
TOTAL_SUPPLY_QUANTITY,
TOTAL_DEMAND_QUANTITY,
PERIOD_START_DATE,
PERIOD_QUANTITY,
CUMULATIVE_QUANTITY,
WEIGHT_CAPACITY,
VOLUME_CAPACITY,
WEIGHT_UOM,
VOLUME_UOM,
PERIOD_END_DATE,
SCENARIO_ID,
DISPOSITION_TYPE,
DISPOSITION_NAME,
REQUEST_ITEM_NAME,
SUPPLY_DEMAND_SOURCE_TYPE_NAME,
END_PEGGING_ID,
CONSTRAINT_FLAG,
NUMBER1,
CHAR1,
COMPONENT_IDENTIFIER,
BATCHABLE_FLAG,
DEST_INV_ITEM_ID,
SUPPLIER_ATP_DATE,
SUMMARY_FLAG,
PTF_DATE,
CREATION_DATE,
CREATED_BY,
LAST_UPDATE_DATE,
LAST_UPDATED_BY,
LAST_UPDATE_LOGIN,
FIXED_LEAD_TIME,
VARIABLE_LEAD_TIME,
PREPROCESSING_LEAD_TIME,
PROCESSING_LEAD_TIME,
POSTPROCESSING_LEAD_TIME,
INTRANSIT_LEAD_TIME,
ALLOCATION_RULE,
INFINITE_TIME_FENCE,
SUBSTITUTION_WINDOW,
REQUIRED_QUANTITY,
ROUNDING_CONTROL,
ATP_FLAG,
ATP_COMPONENT_FLAG,
REQUIRED_DATE,
OPERATION_SEQUENCE_ID,
SOURCING_RULE_NAME,
OFFSET,
EFFICIENCY,
REVERSE_CUM_YIELD,
BASIS_TYPE,
USAGE,
CONSTRAINT_TYPE,
CONSTRAINT_DATE,
CRITICAL_PATH,
PEGGING_TYPE,
UTILIZATION,
ATP_RULE_ID,
OWNING_DEPARTMENT,
ATP_RULE_NAME,
PLAN_NAME,
CONSTRAINED_PATH,
PLAN_ID,
DEMAND_CLASS,
CLASS,
CUSTOMER_NAME,
CUSTOMER_SITE_NAME,
ALLOCATED_SUPPLY_QUANTITY,
SUPPLY_ADJUSTMENT_QUANTITY,
BACKWARD_FORWARD_QUANTITY,
BACKWARD_QUANTITY,
DEMAND_ADJUSTMENT_QUANTITY,
ADJUSTED_AVAILABILITY_QUANTITY,
ALLOCATION_PERCENT,
ACTUAL_ALLOCATION_PERCENT,
ADJUSTED_CUM_QUANTITY,
CUSTOMER_ID,
CUSTOMER_SITE_ID)
values
(p_atp_details_temp.SESSION_ID(lCounter),
p_atp_details_temp.ORDER_LINE_ID(lCounter),
p_atp_details_temp.PEGGING_ID(lCounter),
p_atp_details_temp.PARENT_PEGGING_ID(lCounter),
p_atp_details_temp.ATP_LEVEL(lCounter) ,
p_atp_details_temp.REQUEST_ITEM_ID(lCounter),
p_atp_details_temp.INVENTORY_ITEM_ID(lCounter),
p_atp_details_temp.INVENTORY_ITEM_NAME(lCounter),
p_atp_details_temp.ORGANIZATION_ID(lCounter),
p_atp_details_temp.ORGANIZATION_CODE(lCounter),
p_atp_details_temp.DEPARTMENT_ID(lCounter),
p_atp_details_temp.DEPARTMENT_CODE(lCounter),
p_atp_details_temp.RESOURCE_ID(lCounter),
p_atp_details_temp.RESOURCE_CODE(lCounter),
p_atp_details_temp.SUPPLIER_ID(lCounter),
p_atp_details_temp.SUPPLIER_NAME(lCounter),
p_atp_details_temp.SUPPLIER_SITE_ID(lCounter),
p_atp_details_temp.SUPPLIER_SITE_NAME(lCounter),
p_atp_details_temp.FROM_ORGANIZATION_ID(lCounter),
p_atp_details_temp.FROM_ORGANIZATION_CODE(lCounter),
p_atp_details_temp.FROM_LOCATION_ID(lCounter),
p_atp_details_temp.FROM_LOCATION_CODE(lCounter),
p_atp_details_temp.TO_ORGANIZATION_ID(lCounter),
p_atp_details_temp.TO_ORGANIZATION_CODE(lCounter),
p_atp_details_temp.TO_LOCATION_ID(lCounter),
p_atp_details_temp.TO_LOCATION_CODE(lCounter),
p_atp_details_temp.SHIP_METHOD(lCounter),
p_atp_details_temp.UOM_CODE(lCounter),
p_atp_details_temp.IDENTIFIER1(lCounter),
p_atp_details_temp.IDENTIFIER2(lCounter),
p_atp_details_temp.IDENTIFIER3(lCounter),
p_atp_details_temp.IDENTIFIER4(lCounter),
p_atp_details_temp.SUPPLY_DEMAND_TYPE(lCounter),
p_atp_details_temp.SUPPLY_DEMAND_DATE(lCounter),
p_atp_details_temp.SUPPLY_DEMAND_QUANTITY(lCounter),
p_atp_details_temp.SUPPLY_DEMAND_SOURCE_TYPE(lCounter),
p_atp_details_temp.ALLOCATED_QUANTITY(lCounter),
p_atp_details_temp.SOURCE_TYPE(lCounter),
p_atp_details_temp.RECORD_TYPE(lCounter),
p_atp_details_temp.TOTAL_SUPPLY_QUANTITY(lCounter),
p_atp_details_temp.TOTAL_DEMAND_QUANTITY(lCounter),
p_atp_details_temp.PERIOD_START_DATE(lCounter),
p_atp_details_temp.PERIOD_QUANTITY(lCounter),
p_atp_details_temp.CUMULATIVE_QUANTITY(lCounter),
p_atp_details_temp.WEIGHT_CAPACITY(lCounter),
p_atp_details_temp.VOLUME_CAPACITY(lCounter),
p_atp_details_temp.WEIGHT_UOM(lCounter),
p_atp_details_temp.VOLUME_UOM(lCounter),
p_atp_details_temp.PERIOD_END_DATE(lCounter),
p_atp_details_temp.SCENARIO_ID(lCounter),
p_atp_details_temp.DISPOSITION_TYPE(lCounter),
p_atp_details_temp.DISPOSITION_NAME(lCounter),
p_atp_details_temp.REQUEST_ITEM_NAME(lCounter),
p_atp_details_temp.SUPPLY_DEMAND_SOURCE_TYPE_NAME(lCounter),
p_atp_details_temp.END_PEGGING_ID(lCounter),
p_atp_details_temp.CONSTRAINT_FLAG(lCounter),
p_atp_details_temp.NUMBER1(lCounter),
p_atp_details_temp.CHAR1(lCounter),
p_atp_details_temp.COMPONENT_IDENTIFIER(lCounter),
p_atp_details_temp.BATCHABLE_FLAG(lCounter),
p_atp_details_temp.DEST_INV_ITEM_ID(lCounter),
p_atp_details_temp.SUPPLIER_ATP_DATE(lCounter),
p_atp_details_temp.SUMMARY_FLAG(lCounter),
p_atp_details_temp.PTF_DATE(lCounter),
p_atp_details_temp.CREATION_DATE(lCounter),
p_atp_details_temp.CREATED_BY(lCounter),
p_atp_details_temp.LAST_UPDATE_DATE(lCounter),
p_atp_details_temp.LAST_UPDATED_BY(lCounter),
p_atp_details_temp.LAST_UPDATE_LOGIN(lCounter),
p_atp_details_temp.FIXED_LEAD_TIME(lCounter),
p_atp_details_temp.VARIABLE_LEAD_TIME(lCounter),
p_atp_details_temp.PREPROCESSING_LEAD_TIME(lCounter),
p_atp_details_temp.PROCESSING_LEAD_TIME(lCounter),
p_atp_details_temp.POSTPROCESSING_LEAD_TIME(lCounter),
p_atp_details_temp.INTRANSIT_LEAD_TIME(lCounter),
p_atp_details_temp.ALLOCATION_RULE(lCounter),
p_atp_details_temp.INFINITE_TIME_FENCE(lCounter),
p_atp_details_temp.SUBSTITUTION_WINDOW(lCounter),
p_atp_details_temp.REQUIRED_QUANTITY(lCounter),
p_atp_details_temp.ROUNDING_CONTROL(lCounter),
p_atp_details_temp.ATP_FLAG(lCounter),
p_atp_details_temp.ATP_COMPONENT_FLAG(lCounter),
p_atp_details_temp.REQUIRED_DATE(lCounter),
p_atp_details_temp.OPERATION_SEQUENCE_ID(lCounter),
p_atp_details_temp.SOURCING_RULE_NAME(lCounter),
p_atp_details_temp.OFFSET(lCounter),
p_atp_details_temp.EFFICIENCY(lCounter),
p_atp_details_temp.REVERSE_CUM_YIELD(lCounter),
p_atp_details_temp.BASIS_TYPE(lCounter),
p_atp_details_temp.USAGE(lCounter),
p_atp_details_temp.CONSTRAINT_TYPE(lCounter),
p_atp_details_temp.CONSTRAINT_DATE(lCounter),
p_atp_details_temp.CRITICAL_PATH(lCounter),
p_atp_details_temp.PEGGING_TYPE(lCounter),
p_atp_details_temp.UTILIZATION(lCounter),
p_atp_details_temp.ATP_RULE_ID(lCounter),
p_atp_details_temp.OWNING_DEPARTMENT(lCounter),
p_atp_details_temp.ATP_RULE_NAME(lCounter),
p_atp_details_temp.PLAN_NAME(lCounter),
p_atp_details_temp.CONSTRAINED_PATH(lCounter),
p_atp_details_temp.PLAN_ID(lCounter),
p_atp_details_temp.DEMAND_CLASS(lCounter),
p_atp_details_temp.CLASS(lCounter),
p_atp_details_temp.CUSTOMER_NAME(lCounter),
p_atp_details_temp.CUSTOMER_SITE_NAME(lCounter),
p_atp_details_temp.ALLOCATED_SUPPLY_QUANTITY(lCounter),
p_atp_details_temp.SUPPLY_ADJUSTMENT_QUANTITY(lCounter),
p_atp_details_temp.BACKWARD_FORWARD_QUANTITY(lCounter),
p_atp_details_temp.BACKWARD_QUANTITY(lCounter),
p_atp_details_temp.DEMAND_ADJUSTMENT_QUANTITY(lCounter),
p_atp_details_temp.ADJUSTED_AVAILABILITY_QUANTITY(lCounter),
p_atp_details_temp.ALLOCATION_PERCENT(lCounter),
p_atp_details_temp.ACTUAL_ALLOCATION_PERCENT(lCounter),
p_atp_details_temp.ADJUSTED_CUM_QUANTITY(lCounter),
p_atp_details_temp.CUSTOMER_ID(lCounter),
p_atp_details_temp.CUSTOMER_SITE_ID(lCounter));

commit;

EXCEPTION
  WHEN OTHERS THEN
     p_return_status :='E';
     p_error_message := substr(sqlerrm,1,100);
END populate_details_temp_table;

PROCEDURE get_details_temp_rows(p_atp_details_temp  IN OUT NoCopy MSC_ATPUI_UTIL.ATP_details_rec_type,
                                p_session_id in NUMBER,
				p_return_status out nocopy VARCHAR2,
				p_error_message out nocopy VARCHAR2) IS
BEGIN
 p_return_status :='S';
SELECT
SESSION_ID,
ORDER_LINE_ID,
PEGGING_ID,
PARENT_PEGGING_ID,
ATP_LEVEL,
REQUEST_ITEM_ID,
INVENTORY_ITEM_ID,
INVENTORY_ITEM_NAME,
ORGANIZATION_ID,
ORGANIZATION_CODE,
DEPARTMENT_ID,
DEPARTMENT_CODE,
RESOURCE_ID,
RESOURCE_CODE,
SUPPLIER_ID,
SUPPLIER_NAME,
SUPPLIER_SITE_ID,
SUPPLIER_SITE_NAME,
FROM_ORGANIZATION_ID,
FROM_ORGANIZATION_CODE,
FROM_LOCATION_ID,
FROM_LOCATION_CODE,
TO_ORGANIZATION_ID,
TO_ORGANIZATION_CODE,
TO_LOCATION_ID,
TO_LOCATION_CODE,
SHIP_METHOD,
UOM_CODE,
IDENTIFIER1,
IDENTIFIER2,
IDENTIFIER3,
IDENTIFIER4,
SUPPLY_DEMAND_TYPE,
SUPPLY_DEMAND_DATE,
SUPPLY_DEMAND_QUANTITY,
SUPPLY_DEMAND_SOURCE_TYPE,
ALLOCATED_QUANTITY,
SOURCE_TYPE,
RECORD_TYPE,
TOTAL_SUPPLY_QUANTITY,
TOTAL_DEMAND_QUANTITY,
PERIOD_START_DATE,
PERIOD_QUANTITY,
CUMULATIVE_QUANTITY,
WEIGHT_CAPACITY,
VOLUME_CAPACITY,
WEIGHT_UOM,
VOLUME_UOM,
PERIOD_END_DATE,
SCENARIO_ID,
DISPOSITION_TYPE,
DISPOSITION_NAME,
REQUEST_ITEM_NAME,
SUPPLY_DEMAND_SOURCE_TYPE_NAME,
END_PEGGING_ID,
CONSTRAINT_FLAG,
NUMBER1,
CHAR1,
COMPONENT_IDENTIFIER,
BATCHABLE_FLAG,
DEST_INV_ITEM_ID,
SUPPLIER_ATP_DATE,
SUMMARY_FLAG,
PTF_DATE,
CREATION_DATE,
CREATED_BY,
LAST_UPDATE_DATE,
LAST_UPDATED_BY,
LAST_UPDATE_LOGIN,
FIXED_LEAD_TIME,
VARIABLE_LEAD_TIME,
PREPROCESSING_LEAD_TIME,
PROCESSING_LEAD_TIME,
POSTPROCESSING_LEAD_TIME,
INTRANSIT_LEAD_TIME,
ALLOCATION_RULE,
INFINITE_TIME_FENCE,
SUBSTITUTION_WINDOW,
REQUIRED_QUANTITY,
ROUNDING_CONTROL,
ATP_FLAG,
ATP_COMPONENT_FLAG,
REQUIRED_DATE,
OPERATION_SEQUENCE_ID,
SOURCING_RULE_NAME,
OFFSET,
EFFICIENCY,
REVERSE_CUM_YIELD,
BASIS_TYPE,
USAGE,
CONSTRAINT_TYPE,
CONSTRAINT_DATE,
CRITICAL_PATH,
PEGGING_TYPE,
UTILIZATION,
ATP_RULE_ID,
OWNING_DEPARTMENT,
ATP_RULE_NAME,
PLAN_NAME,
CONSTRAINED_PATH,
PLAN_ID,
DEMAND_CLASS,
CLASS,
CUSTOMER_NAME,
CUSTOMER_SITE_NAME,
ALLOCATED_SUPPLY_QUANTITY,
SUPPLY_ADJUSTMENT_QUANTITY,
BACKWARD_FORWARD_QUANTITY,
BACKWARD_QUANTITY,
DEMAND_ADJUSTMENT_QUANTITY,
ADJUSTED_AVAILABILITY_QUANTITY,
ALLOCATION_PERCENT,
ACTUAL_ALLOCATION_PERCENT,
ADJUSTED_CUM_QUANTITY,
CUSTOMER_ID,
CUSTOMER_SITE_ID
BULK COLLECT INTO
p_atp_details_temp.SESSION_ID,
p_atp_details_temp.ORDER_LINE_ID,
p_atp_details_temp.PEGGING_ID,
p_atp_details_temp.PARENT_PEGGING_ID,
p_atp_details_temp.ATP_LEVEL,
p_atp_details_temp.REQUEST_ITEM_ID,
p_atp_details_temp.INVENTORY_ITEM_ID,
p_atp_details_temp.INVENTORY_ITEM_NAME,
p_atp_details_temp.ORGANIZATION_ID,
p_atp_details_temp.ORGANIZATION_CODE,
p_atp_details_temp.DEPARTMENT_ID,
p_atp_details_temp.DEPARTMENT_CODE,
p_atp_details_temp.RESOURCE_ID,
p_atp_details_temp.RESOURCE_CODE,
p_atp_details_temp.SUPPLIER_ID,
p_atp_details_temp.SUPPLIER_NAME,
p_atp_details_temp.SUPPLIER_SITE_ID,
p_atp_details_temp.SUPPLIER_SITE_NAME,
p_atp_details_temp.FROM_ORGANIZATION_ID,
p_atp_details_temp.FROM_ORGANIZATION_CODE,
p_atp_details_temp.FROM_LOCATION_ID,
p_atp_details_temp.FROM_LOCATION_CODE,
p_atp_details_temp.TO_ORGANIZATION_ID,
p_atp_details_temp.TO_ORGANIZATION_CODE,
p_atp_details_temp.TO_LOCATION_ID,
p_atp_details_temp.TO_LOCATION_CODE,
p_atp_details_temp.SHIP_METHOD,
p_atp_details_temp.UOM_CODE,
p_atp_details_temp.IDENTIFIER1,
p_atp_details_temp.IDENTIFIER2,
p_atp_details_temp.IDENTIFIER3,
p_atp_details_temp.IDENTIFIER4,
p_atp_details_temp.SUPPLY_DEMAND_TYPE,
p_atp_details_temp.SUPPLY_DEMAND_DATE,
p_atp_details_temp.SUPPLY_DEMAND_QUANTITY,
p_atp_details_temp.SUPPLY_DEMAND_SOURCE_TYPE,
p_atp_details_temp.ALLOCATED_QUANTITY,
p_atp_details_temp.SOURCE_TYPE,
p_atp_details_temp.RECORD_TYPE,
p_atp_details_temp.TOTAL_SUPPLY_QUANTITY,
p_atp_details_temp.TOTAL_DEMAND_QUANTITY,
p_atp_details_temp.PERIOD_START_DATE,
p_atp_details_temp.PERIOD_QUANTITY,
p_atp_details_temp.CUMULATIVE_QUANTITY,
p_atp_details_temp.WEIGHT_CAPACITY,
p_atp_details_temp.VOLUME_CAPACITY,
p_atp_details_temp.WEIGHT_UOM,
p_atp_details_temp.VOLUME_UOM,
p_atp_details_temp.PERIOD_END_DATE,
p_atp_details_temp.SCENARIO_ID,
p_atp_details_temp.DISPOSITION_TYPE,
p_atp_details_temp.DISPOSITION_NAME,
p_atp_details_temp.REQUEST_ITEM_NAME,
p_atp_details_temp.SUPPLY_DEMAND_SOURCE_TYPE_NAME,
p_atp_details_temp.END_PEGGING_ID,
p_atp_details_temp.CONSTRAINT_FLAG,
p_atp_details_temp.NUMBER1,
p_atp_details_temp.CHAR1,
p_atp_details_temp.COMPONENT_IDENTIFIER,
p_atp_details_temp.BATCHABLE_FLAG,
p_atp_details_temp.DEST_INV_ITEM_ID,
p_atp_details_temp.SUPPLIER_ATP_DATE,
p_atp_details_temp.SUMMARY_FLAG,
p_atp_details_temp.PTF_DATE,
p_atp_details_temp.CREATION_DATE,
p_atp_details_temp.CREATED_BY,
p_atp_details_temp.LAST_UPDATE_DATE,
p_atp_details_temp.LAST_UPDATED_BY,
p_atp_details_temp.LAST_UPDATE_LOGIN,
p_atp_details_temp.FIXED_LEAD_TIME,
p_atp_details_temp.VARIABLE_LEAD_TIME,
p_atp_details_temp.PREPROCESSING_LEAD_TIME,
p_atp_details_temp.PROCESSING_LEAD_TIME,
p_atp_details_temp.POSTPROCESSING_LEAD_TIME,
p_atp_details_temp.INTRANSIT_LEAD_TIME,
p_atp_details_temp.ALLOCATION_RULE,
p_atp_details_temp.INFINITE_TIME_FENCE,
p_atp_details_temp.SUBSTITUTION_WINDOW,
p_atp_details_temp.REQUIRED_QUANTITY,
p_atp_details_temp.ROUNDING_CONTROL,
p_atp_details_temp.ATP_FLAG,
p_atp_details_temp.ATP_COMPONENT_FLAG,
p_atp_details_temp.REQUIRED_DATE,
p_atp_details_temp.OPERATION_SEQUENCE_ID,
p_atp_details_temp.SOURCING_RULE_NAME,
p_atp_details_temp.OFFSET,
p_atp_details_temp.EFFICIENCY,
p_atp_details_temp.REVERSE_CUM_YIELD,
p_atp_details_temp.BASIS_TYPE,
p_atp_details_temp.USAGE,
p_atp_details_temp.CONSTRAINT_TYPE,
p_atp_details_temp.CONSTRAINT_DATE,
p_atp_details_temp.CRITICAL_PATH,
p_atp_details_temp.PEGGING_TYPE,
p_atp_details_temp.UTILIZATION,
p_atp_details_temp.ATP_RULE_ID,
p_atp_details_temp.OWNING_DEPARTMENT,
p_atp_details_temp.ATP_RULE_NAME,
p_atp_details_temp.PLAN_NAME,
p_atp_details_temp.CONSTRAINED_PATH,
p_atp_details_temp.PLAN_ID,
p_atp_details_temp.DEMAND_CLASS,
p_atp_details_temp.CLASS,
p_atp_details_temp.CUSTOMER_NAME,
p_atp_details_temp.CUSTOMER_SITE_NAME,
p_atp_details_temp.ALLOCATED_SUPPLY_QUANTITY,
p_atp_details_temp.SUPPLY_ADJUSTMENT_QUANTITY,
p_atp_details_temp.BACKWARD_FORWARD_QUANTITY,
p_atp_details_temp.BACKWARD_QUANTITY,
p_atp_details_temp.DEMAND_ADJUSTMENT_QUANTITY,
p_atp_details_temp.ADJUSTED_AVAILABILITY_QUANTITY,
p_atp_details_temp.ALLOCATION_PERCENT,
p_atp_details_temp.ACTUAL_ALLOCATION_PERCENT,
p_atp_details_temp.ADJUSTED_CUM_QUANTITY,
p_atp_details_temp.CUSTOMER_ID,
p_atp_details_temp.CUSTOMER_SITE_ID
FROM  mrp_atp_details_temp
WHERE session_id = p_session_id;


EXCEPTION
  WHEN OTHERS THEN
     p_return_status :='E';
     p_error_message := substr(sqlerrm,1,100);
END get_details_temp_rows;

PROCEDURE populate_mrp_atp_temp_tables(p_session_id in NUMBER,
				p_return_status out nocopy VARCHAR2,
				p_error_message out nocopy VARCHAR2) IS
BEGIN
     p_return_status :='S';
     get_schedule_temp_rows(p_session_id,p_return_status, p_error_message);
EXCEPTION
  WHEN OTHERS THEN
     p_return_status :='E';
     p_error_message := substr(sqlerrm,1,100);

END populate_mrp_atp_temp_tables;

END MSC_ATPUI_UTIL ;

/
