--------------------------------------------------------
--  DDL for Package Body CN_REPOSITORIES_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."CN_REPOSITORIES_PKG" AS
-- $Header: cnrepob.pls 120.3 2005/11/22 00:58:27 raramasa noship $
--+
-- Public Functions
--+


PROCEDURE LOAD_SEED_ROW (
	x_UPLOAD_MODE in varchar2,
        x_REPOSITORY_ID in varchar2,
	x_VERSION in varchar2,
	x_SCHEMA in varchar2,
	x_STATUS in varchar2,
	x_APPLICATION_TYPE in varchar2,
	x_LAST_UPDATE_DATE in varchar2,
	x_LAST_UPDATED_BY in varchar2,
	x_CREATION_DATE in varchar2,
	x_CREATED_BY in varchar2,
	x_LAST_UPDATE_LOGIN in varchar2,
	x_DESCRIPTION in varchar2,
	x_DATABASE_LINK  in varchar2,
	x_USAGE_FLAG in varchar2,
	x_EMAIL_OWNER in varchar2,
	x_EMAIL_DBA in varchar2,
	x_CURRENT_PERIOD_ID in varchar2,
	x_SYSTEM_START_DATE in varchar2,
	x_SYSTEM_START_PERIOD_ID in varchar2,
	x_SYSTEM_END_DATE in varchar2,
	x_SYSTEM_END_PERIOD_ID in varchar2,
	x_REV_CLASS_HIERARCHY_ID in varchar2,
	x_SRP_ROLLUP_HIERARCHY_ID in varchar2,
	x_SYSTEM_BATCH_SIZE in varchar2,
	x_TRANSFER_BATCH_SIZE in varchar2,
	x_SRP_ROLLUP_FLAG in varchar2,
	x_SET_OF_BOOKS_ID in varchar2,
	x_CURRENT_PERIOD in varchar2,
	x_SYSTEM_START_PERIOD in varchar2,
	x_SYSTEM_END_PERIOD in varchar2,
	x_CLAWBACK_GRACE_DAYS in varchar2,
	x_TRX_ROLLUP_METHOD in varchar2,
	x_SRP_BATCH_SIZE in varchar2,
	x_NAME in varchar2,
	x_APPLICATION_ID in varchar2,
	x_REPOSITORY_TYPE in varchar2,
	x_ORG_ID in varchar2,
	x_CLS_PACKAGE_SIZE in varchar2,
	x_SALESREP_BATCH_SIZE in varchar2,
	x_LATEST_PROCESSED_DATE in varchar2,
	x_PERIOD_SET_ID in varchar2,
	x_PERIOD_TYPE_ID in varchar2,
	x_PAYABLES_FLAG in varchar2,
	x_PAYROLL_FLAG in varchar2,
	x_PAYABLES_CCID_LEVEL in varchar2,
	x_INCOME_PLANNER_DISCLAIMER in varchar2,
	x_OBJECT_VERSION_NUMBER in varchar2,
	x_SECURITY_GROUP_ID in varchar2,
	x_SCA_MAPPING_STATUS in varchar2,
	x_CN_ROLL_SUM_TRX in varchar2,
	x_CN_CUSTOM_AGGR_TRX in varchar2,
	x_CN_PRIOR_ADJUSTMENT in varchar2,
	x_CN_COMM_RATE_PRECISION in varchar2,
	x_CN_CONVERSION_TYPE in varchar2,
	x_CN_CUSTOM_FLAG in varchar2,
	x_CN_COLLECT_ON_ACCT_CREDITS in varchar2,
	x_CN_RAM_NEGATE in varchar2,
	x_CN_REPORTING_HIERARCHY in varchar2,
	x_CN_NON_REVENUE_SPLIT in varchar2,
	x_CN_RESET_ERROR_TRX in varchar2,
	x_CN_CUST_DISCLAIMER in varchar2,
	x_CN_DISPLAY_DRAW in varchar2,
        x_APPLICATION_SHORT_NAME in varchar2,
        x_OWNER in varchar2 )
    IS
    BEGIN
     if (x_upload_mode = 'NLS') then
       --CN_REPOSITORIES_PKG.TRANSLATE_ROW(x_owner);
       -- As this ldt is not required to loaded translated data, you could leave it blank.
	    null;
     else
       	CN_REPOSITORIES_PKG.LOAD_ROW(
	                x_REPOSITORY_ID,
			x_VERSION,
			x_SCHEMA,
			x_STATUS,
			x_APPLICATION_TYPE,
			x_LAST_UPDATE_DATE,
			x_LAST_UPDATED_BY,
			x_CREATION_DATE,
			x_CREATED_BY,
			x_LAST_UPDATE_LOGIN,
			x_DESCRIPTION,
			x_DATABASE_LINK ,
			x_USAGE_FLAG,
			x_EMAIL_OWNER,
			x_EMAIL_DBA,
			x_CURRENT_PERIOD_ID,
			x_SYSTEM_START_DATE,
			x_SYSTEM_START_PERIOD_ID,
			x_SYSTEM_END_DATE,
			x_SYSTEM_END_PERIOD_ID,
			x_REV_CLASS_HIERARCHY_ID,
			x_SRP_ROLLUP_HIERARCHY_ID,
			x_SYSTEM_BATCH_SIZE,
			x_TRANSFER_BATCH_SIZE,
			x_SRP_ROLLUP_FLAG,
			x_SET_OF_BOOKS_ID,
			x_CURRENT_PERIOD,
			x_SYSTEM_START_PERIOD,
			x_SYSTEM_END_PERIOD,
			x_CLAWBACK_GRACE_DAYS,
			x_TRX_ROLLUP_METHOD,
			x_SRP_BATCH_SIZE,
			x_NAME,
			x_APPLICATION_ID,
			x_REPOSITORY_TYPE,
			x_ORG_ID,
			x_CLS_PACKAGE_SIZE,
			x_SALESREP_BATCH_SIZE,
			x_LATEST_PROCESSED_DATE,
			x_PERIOD_SET_ID,
			x_PERIOD_TYPE_ID,
			x_PAYABLES_FLAG,
			x_PAYROLL_FLAG,
			x_PAYABLES_CCID_LEVEL,
			x_INCOME_PLANNER_DISCLAIMER,
			x_OBJECT_VERSION_NUMBER,
			x_SECURITY_GROUP_ID,
			x_SCA_MAPPING_STATUS,
			x_CN_ROLL_SUM_TRX,
			x_CN_CUSTOM_AGGR_TRX,
			x_CN_PRIOR_ADJUSTMENT,
			x_CN_COMM_RATE_PRECISION,
			x_CN_CONVERSION_TYPE,
			x_CN_CUSTOM_FLAG,
			x_CN_COLLECT_ON_ACCT_CREDITS,
			x_CN_RAM_NEGATE,
			x_CN_REPORTING_HIERARCHY,
			x_CN_NON_REVENUE_SPLIT,
			x_CN_RESET_ERROR_TRX,
			x_CN_CUST_DISCLAIMER,
			x_CN_DISPLAY_DRAW,
			x_APPLICATION_SHORT_NAME,
			x_OWNER);
       	    null;
     end if;
    END LOAD_SEED_ROW;


PROCEDURE LOAD_ROW (
			x_REPOSITORY_ID in varchar2,
			x_VERSION in varchar2,
			x_SCHEMA in varchar2,
			x_STATUS in varchar2,
			x_APPLICATION_TYPE in varchar2,
			x_LAST_UPDATE_DATE in varchar2,
			x_LAST_UPDATED_BY in varchar2,
			x_CREATION_DATE in varchar2,
			x_CREATED_BY in varchar2,
			x_LAST_UPDATE_LOGIN in varchar2,
			x_DESCRIPTION in varchar2,
			x_DATABASE_LINK  in varchar2,
			x_USAGE_FLAG in varchar2,
			x_EMAIL_OWNER in varchar2,
			x_EMAIL_DBA in varchar2,
			x_CURRENT_PERIOD_ID in varchar2,
			x_SYSTEM_START_DATE in varchar2,
			x_SYSTEM_START_PERIOD_ID in varchar2,
			x_SYSTEM_END_DATE in varchar2,
			x_SYSTEM_END_PERIOD_ID in varchar2,
			x_REV_CLASS_HIERARCHY_ID in varchar2,
			x_SRP_ROLLUP_HIERARCHY_ID in varchar2,
			x_SYSTEM_BATCH_SIZE in varchar2,
			x_TRANSFER_BATCH_SIZE in varchar2,
			x_SRP_ROLLUP_FLAG in varchar2,
			x_SET_OF_BOOKS_ID in varchar2,
			x_CURRENT_PERIOD in varchar2,
			x_SYSTEM_START_PERIOD in varchar2,
			x_SYSTEM_END_PERIOD in varchar2,
			x_CLAWBACK_GRACE_DAYS in varchar2,
			x_TRX_ROLLUP_METHOD in varchar2,
			x_SRP_BATCH_SIZE in varchar2,
			x_NAME in varchar2,
			x_APPLICATION_ID in varchar2,
			x_REPOSITORY_TYPE in varchar2,
			x_ORG_ID in varchar2,
			x_CLS_PACKAGE_SIZE in varchar2,
			x_SALESREP_BATCH_SIZE in varchar2,
			x_LATEST_PROCESSED_DATE in varchar2,
			x_PERIOD_SET_ID in varchar2,
			x_PERIOD_TYPE_ID in varchar2,
			x_PAYABLES_FLAG in varchar2,
			x_PAYROLL_FLAG in varchar2,
			x_PAYABLES_CCID_LEVEL in varchar2,
			x_INCOME_PLANNER_DISCLAIMER in varchar2,
			x_OBJECT_VERSION_NUMBER in varchar2,
			x_SECURITY_GROUP_ID in varchar2,
			x_SCA_MAPPING_STATUS in varchar2,
			x_CN_ROLL_SUM_TRX in varchar2,
			x_CN_CUSTOM_AGGR_TRX in varchar2,
			x_CN_PRIOR_ADJUSTMENT in varchar2,
			x_CN_COMM_RATE_PRECISION in varchar2,
			x_CN_CONVERSION_TYPE in varchar2,
			x_CN_CUSTOM_FLAG in varchar2,
			x_CN_COLLECT_ON_ACCT_CREDITS in varchar2,
			x_CN_RAM_NEGATE in varchar2,
			x_CN_REPORTING_HIERARCHY in varchar2,
			x_CN_NON_REVENUE_SPLIT in varchar2,
			x_CN_RESET_ERROR_TRX in varchar2,
			x_CN_CUST_DISCLAIMER in varchar2,
			x_CN_DISPLAY_DRAW in varchar2,
			x_APPLICATION_SHORT_NAME in varchar2,
			x_OWNER in varchar2 )
IS
	USER_ID NUMBER;
BEGIN
	NULL;

	-- Proceed only when the repository_id is not null
	if (x_REPOSITORY_ID is NOT NULL) then

		-- Check whether SEED Data or Custom Data you are uploading
		IF (x_OWNER IS NOT NULL) AND (x_OWNER = 'SEED') THEN
      			USER_ID := 1;
    		ELSE
      			USER_ID := 0;
   		END IF;

		update cn_repositories_all set
			REPOSITORY_ID = to_number(x_REPOSITORY_ID),
			VERSION = x_VERSION,
			SCHEMA = x_SCHEMA,
			STATUS = x_STATUS,
			APPLICATION_TYPE = x_APPLICATION_TYPE,
			LAST_UPDATE_DATE = SYSDATE,
			LAST_UPDATED_BY = USER_ID,
			CREATION_DATE = to_date(x_CREATION_DATE,'DD/MM/YYYY'),
			CREATED_BY = to_number(x_CREATED_BY),
			LAST_UPDATE_LOGIN = 0,
			DESCRIPTION = x_DESCRIPTION,
			DATABASE_LINK  = x_DATABASE_LINK ,
			USAGE_FLAG = x_USAGE_FLAG,
			EMAIL_OWNER = x_EMAIL_OWNER,
			EMAIL_DBA = x_EMAIL_DBA,
			CURRENT_PERIOD_ID = to_number(x_CURRENT_PERIOD_ID),
			SYSTEM_START_DATE = to_date(x_SYSTEM_START_DATE,'DD/MM/YYYY'),
			SYSTEM_START_PERIOD_ID = to_number(x_SYSTEM_START_PERIOD_ID),
			SYSTEM_END_DATE = to_date(x_SYSTEM_END_DATE,'DD/MM/YYYY'),
			SYSTEM_END_PERIOD_ID = to_number(x_SYSTEM_END_PERIOD_ID),
			REV_CLASS_HIERARCHY_ID = to_number(x_REV_CLASS_HIERARCHY_ID),
			SRP_ROLLUP_HIERARCHY_ID = to_number(x_SRP_ROLLUP_HIERARCHY_ID),
			SYSTEM_BATCH_SIZE = to_number(x_SYSTEM_BATCH_SIZE),
			TRANSFER_BATCH_SIZE = to_number(x_TRANSFER_BATCH_SIZE),
			SRP_ROLLUP_FLAG = x_SRP_ROLLUP_FLAG,
			SET_OF_BOOKS_ID = to_number(x_SET_OF_BOOKS_ID),
			CURRENT_PERIOD = x_CURRENT_PERIOD,
			SYSTEM_START_PERIOD = x_SYSTEM_START_PERIOD,
			SYSTEM_END_PERIOD = x_SYSTEM_END_PERIOD,
			CLAWBACK_GRACE_DAYS = to_number(x_CLAWBACK_GRACE_DAYS),
			TRX_ROLLUP_METHOD = x_TRX_ROLLUP_METHOD,
			SRP_BATCH_SIZE = to_number(x_SRP_BATCH_SIZE),
			NAME = x_NAME,
			APPLICATION_ID = to_number(x_APPLICATION_ID),
			REPOSITORY_TYPE = x_REPOSITORY_TYPE,
			ORG_ID = to_number(x_ORG_ID),
			CLS_PACKAGE_SIZE = to_number(x_CLS_PACKAGE_SIZE),
			SALESREP_BATCH_SIZE = to_number(x_SALESREP_BATCH_SIZE),
			LATEST_PROCESSED_DATE = to_date(x_LATEST_PROCESSED_DATE,'DD/MM/YYYY'),
			PERIOD_SET_ID = to_number(x_PERIOD_SET_ID),
			PERIOD_TYPE_ID = to_number(x_PERIOD_TYPE_ID),
			PAYABLES_FLAG = x_PAYABLES_FLAG,
			PAYROLL_FLAG = x_PAYROLL_FLAG,
			PAYABLES_CCID_LEVEL = x_PAYABLES_CCID_LEVEL,
			INCOME_PLANNER_DISCLAIMER = x_INCOME_PLANNER_DISCLAIMER,
			OBJECT_VERSION_NUMBER = to_number(x_OBJECT_VERSION_NUMBER),
			SECURITY_GROUP_ID = to_number(x_SECURITY_GROUP_ID),
			SCA_MAPPING_STATUS = x_SCA_MAPPING_STATUS,
			CN_ROLL_SUM_TRX = x_CN_ROLL_SUM_TRX,
			CN_CUSTOM_AGGR_TRX = x_CN_CUSTOM_AGGR_TRX,
			CN_PRIOR_ADJUSTMENT = x_CN_PRIOR_ADJUSTMENT,
			CN_COMM_RATE_PRECISION = to_number(x_CN_COMM_RATE_PRECISION),
			CN_CONVERSION_TYPE = x_CN_CONVERSION_TYPE,
			CN_CUSTOM_FLAG = x_CN_CUSTOM_FLAG,
			CN_COLLECT_ON_ACCT_CREDITS = x_CN_COLLECT_ON_ACCT_CREDITS,
			CN_RAM_NEGATE = x_CN_RAM_NEGATE,
			CN_REPORTING_HIERARCHY = x_CN_REPORTING_HIERARCHY,
			CN_NON_REVENUE_SPLIT = x_CN_NON_REVENUE_SPLIT,
			CN_RESET_ERROR_TRX = x_CN_RESET_ERROR_TRX,
			CN_CUST_DISCLAIMER = x_CN_CUST_DISCLAIMER,
			CN_DISPLAY_DRAW = x_CN_DISPLAY_DRAW
		where
			REPOSITORY_ID = X_REPOSITORY_ID
                        and ORG_ID = X_ORG_ID;

		IF (SQL%NOTFOUND)  THEN
     			-- Insert new record to CN_REPOSITORIES_ALL table
			insert into CN_REPOSITORIES_ALL
			(
			REPOSITORY_ID,
			VERSION,
			SCHEMA,
			STATUS,
			APPLICATION_TYPE,
			LAST_UPDATE_DATE,
			LAST_UPDATED_BY,
			CREATION_DATE,
			CREATED_BY,
			LAST_UPDATE_LOGIN,
			DESCRIPTION,
			DATABASE_LINK ,
			USAGE_FLAG,
			EMAIL_OWNER,
			EMAIL_DBA,
			CURRENT_PERIOD_ID,
			SYSTEM_START_DATE,
			SYSTEM_START_PERIOD_ID,
			SYSTEM_END_DATE,
			SYSTEM_END_PERIOD_ID,
			REV_CLASS_HIERARCHY_ID,
			SRP_ROLLUP_HIERARCHY_ID,
			SYSTEM_BATCH_SIZE,
			TRANSFER_BATCH_SIZE,
			SRP_ROLLUP_FLAG,
			SET_OF_BOOKS_ID,
			CURRENT_PERIOD,
			SYSTEM_START_PERIOD,
			SYSTEM_END_PERIOD,
			CLAWBACK_GRACE_DAYS,
			TRX_ROLLUP_METHOD,
			SRP_BATCH_SIZE,
			NAME,
			APPLICATION_ID,
			REPOSITORY_TYPE,
			ORG_ID,
			CLS_PACKAGE_SIZE,
			SALESREP_BATCH_SIZE,
			LATEST_PROCESSED_DATE,
			PERIOD_SET_ID,
			PERIOD_TYPE_ID,
			PAYABLES_FLAG,
			PAYROLL_FLAG,
			PAYABLES_CCID_LEVEL,
			INCOME_PLANNER_DISCLAIMER,
			OBJECT_VERSION_NUMBER,
			SECURITY_GROUP_ID,
			SCA_MAPPING_STATUS,
			CN_ROLL_SUM_TRX,
			CN_CUSTOM_AGGR_TRX,
			CN_PRIOR_ADJUSTMENT,
			CN_COMM_RATE_PRECISION,
			CN_CONVERSION_TYPE,
			CN_CUSTOM_FLAG,
			CN_COLLECT_ON_ACCT_CREDITS,
			CN_RAM_NEGATE,
			CN_REPORTING_HIERARCHY,
			CN_NON_REVENUE_SPLIT,
			CN_RESET_ERROR_TRX,
			CN_CUST_DISCLAIMER,
			CN_DISPLAY_DRAW)

			values
			(
			to_number(x_REPOSITORY_ID),
			x_VERSION,
			x_SCHEMA,
			x_STATUS,
			x_APPLICATION_TYPE,
			SYSDATE,
			USER_ID,
			SYSDATE,
			USER_ID,
			0,
			x_DESCRIPTION,
			x_DATABASE_LINK ,
			x_USAGE_FLAG,
			x_EMAIL_OWNER,
			x_EMAIL_DBA,
			to_number(x_CURRENT_PERIOD_ID),
			to_date(x_SYSTEM_START_DATE,'DD/MM/YYYY'),
			to_number(x_SYSTEM_START_PERIOD_ID),
			to_date(x_SYSTEM_END_DATE,'DD/MM/YYYY'),
			to_number(x_SYSTEM_END_PERIOD_ID),
			to_number(x_REV_CLASS_HIERARCHY_ID),
			to_number(x_SRP_ROLLUP_HIERARCHY_ID),
			to_number(x_SYSTEM_BATCH_SIZE),
			to_number(x_TRANSFER_BATCH_SIZE),
			x_SRP_ROLLUP_FLAG,
			to_number(x_SET_OF_BOOKS_ID),
			x_CURRENT_PERIOD,
			x_SYSTEM_START_PERIOD,
			x_SYSTEM_END_PERIOD,
			to_number(x_CLAWBACK_GRACE_DAYS),
			x_TRX_ROLLUP_METHOD,
			to_number(x_SRP_BATCH_SIZE),
			x_NAME,
			to_number(x_APPLICATION_ID),
			x_REPOSITORY_TYPE,
			to_number(x_ORG_ID),
			to_number(x_CLS_PACKAGE_SIZE),
			to_number(x_SALESREP_BATCH_SIZE),
			to_date(x_LATEST_PROCESSED_DATE,'DD/MM/YYYY'),
			to_number(x_PERIOD_SET_ID),
			to_number(x_PERIOD_TYPE_ID),
			x_PAYABLES_FLAG,
			x_PAYROLL_FLAG,
			x_PAYABLES_CCID_LEVEL,
			x_INCOME_PLANNER_DISCLAIMER,
			to_number(x_OBJECT_VERSION_NUMBER),
			to_number(x_SECURITY_GROUP_ID),
			x_SCA_MAPPING_STATUS,
			x_CN_ROLL_SUM_TRX,
			x_CN_CUSTOM_AGGR_TRX,
			x_CN_PRIOR_ADJUSTMENT,
			to_number(x_CN_COMM_RATE_PRECISION),
			x_CN_CONVERSION_TYPE,
			x_CN_CUSTOM_FLAG,
			x_CN_COLLECT_ON_ACCT_CREDITS,
			x_CN_RAM_NEGATE,
			x_CN_REPORTING_HIERARCHY,
			x_CN_NON_REVENUE_SPLIT,
			x_CN_RESET_ERROR_TRX,
			x_CN_CUST_DISCLAIMER,
			x_CN_DISPLAY_DRAW);


		END IF;
	end if;

END LOAD_ROW;



END cn_repositories_pkg;

/
