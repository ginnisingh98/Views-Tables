--------------------------------------------------------
--  DDL for Package Body PSB_PSBWSSUB_XMLP_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."PSB_PSBWSSUB_XMLP_PKG" AS
/* $Header: PSBWSSUBB.pls 120.0 2008/01/07 10:57:13 vijranga noship $ */
  FUNCTION BEFOREREPORT RETURN BOOLEAN IS
    L_RETURN_STATUS VARCHAR2(1);
    L_MSG_COUNT NUMBER;
    L_MSG_DATA VARCHAR2(2000);
    L_STARTDATE_PP DATE;
    L_ENDDATE_CY DATE;
    L_GLOBAL_WORKSHEET_ID PSB_WORKSHEETS.GLOBAL_WORKSHEET_ID%TYPE;
    L_GLOBAL_WORKSHEET_FLAG PSB_WORKSHEETS.GLOBAL_WORKSHEET_FLAG%TYPE;
    L_BUDGET_GROUP_ID PSB_WORKSHEETS.BUDGET_GROUP_ID%TYPE;
    L_BUDGET_CALENDAR_ID PSB_WORKSHEETS.BUDGET_CALENDAR_ID%TYPE;
  BEGIN
    P_CONC_REQUEST_ID := FND_GLOBAL.CONC_REQUEST_ID;
    /*SRW.USER_EXIT('FND SRWINIT')*/NULL;
    SELECT
      NAME
    INTO CP_BUDGET_GROUP_NAME
    FROM
      PSB_BUDGET_GROUPS
    WHERE BUDGET_GROUP_ID = P_BUDGET_GROUP_ID;
    SELECT
      MEANING
    INTO CP_NOT_SUBMITTED_ONLY
    FROM
      FND_LOOKUPS
    WHERE LOOKUP_TYPE = 'YES_NO'
      AND LOOKUP_CODE = P_NOT_SUBMITTED_ONLY_FLAG;
    SELECT
      BUDGET_CALENDAR_ID,
      GLOBAL_WORKSHEET_ID,
      NVL(GLOBAL_WORKSHEET_FLAG
         ,'N')
    INTO L_BUDGET_CALENDAR_ID,L_GLOBAL_WORKSHEET_ID,L_GLOBAL_WORKSHEET_FLAG
    FROM
      PSB_WORKSHEETS
    WHERE WORKSHEET_ID = P_WORKSHEET_ID;
    IF L_GLOBAL_WORKSHEET_FLAG <> 'Y' THEN
      CP_GLOBAL_WORKSHEET_ID := L_GLOBAL_WORKSHEET_ID;
    ELSE
      CP_GLOBAL_WORKSHEET_ID := P_WORKSHEET_ID;
    END IF;
    PSB_WS_ACCT1.GET_BUDGET_CALENDAR_INFO(P_RETURN_STATUS => L_RETURN_STATUS
                                         ,P_BUDGET_CALENDAR_ID => L_BUDGET_CALENDAR_ID
                                         ,P_STARTDATE_PP => L_STARTDATE_PP
                                         ,P_ENDDATE_CY => L_ENDDATE_CY);
    IF L_RETURN_STATUS <> 'S' THEN
      RETURN (FALSE);
    ELSE
      CP_STARTDATE_PP := L_STARTDATE_PP;
      CP_ENDDATE_CY := L_ENDDATE_CY;
    END IF;
    FND_MESSAGE.SET_NAME('PSB'
                        ,'PSB_NO_DATA_FOUND');
    CP_NO_DATA_FOUND := FND_MESSAGE.GET;
    FND_MESSAGE.SET_NAME('PSB'
                        ,'PSB_END_OF_REPORT');
    CP_END_OF_REPORT := FND_MESSAGE.GET;
    RETURN (TRUE);
  END BEFOREREPORT;

  FUNCTION BEFOREPFORM RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END BEFOREPFORM;

  FUNCTION AFTERPFORM RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END AFTERPFORM;

  FUNCTION BETWEENPAGE RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END BETWEENPAGE;

  FUNCTION AFTERREPORT RETURN BOOLEAN IS
  BEGIN
    /*SRW.USER_EXIT('FND SRWEXIT')*/NULL;
    RETURN (TRUE);
  END AFTERREPORT;

  FUNCTION CP_BUDGET_GROUP_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_BUDGET_GROUP_NAME;
  END CP_BUDGET_GROUP_NAME_P;

  FUNCTION CP_NO_DATA_FOUND_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_NO_DATA_FOUND;
  END CP_NO_DATA_FOUND_P;

  FUNCTION CP_END_OF_REPORT_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_END_OF_REPORT;
  END CP_END_OF_REPORT_P;

  FUNCTION CP_STARTDATE_PP_P RETURN DATE IS
  BEGIN
    RETURN CP_STARTDATE_PP;
  END CP_STARTDATE_PP_P;

  FUNCTION CP_ENDDATE_CY_P RETURN DATE IS
  BEGIN
    RETURN CP_ENDDATE_CY;
  END CP_ENDDATE_CY_P;

  FUNCTION CP_NOT_SUBMITTED_ONLY_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_NOT_SUBMITTED_ONLY;
  END CP_NOT_SUBMITTED_ONLY_P;

  FUNCTION CP_GLOBAL_WORKSHEET_ID_P RETURN NUMBER IS
  BEGIN
    RETURN CP_GLOBAL_WORKSHEET_ID;
  END CP_GLOBAL_WORKSHEET_ID_P;

END PSB_PSBWSSUB_XMLP_PKG;






/
