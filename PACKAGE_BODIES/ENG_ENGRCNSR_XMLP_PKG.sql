--------------------------------------------------------
--  DDL for Package Body ENG_ENGRCNSR_XMLP_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."ENG_ENGRCNSR_XMLP_PKG" AS
/* $Header: ENGRCNSRB.pls 120.1 2008/01/08 12:38:44 dwkrishn noship $ */
  FUNCTION AFTERREPORT RETURN BOOLEAN IS
  BEGIN
    BEGIN
      IF (P_DELETE_CODE = 1 AND ECN_FROM IS NOT NULL AND ECN_FROM = ECN_TO) THEN
        BOM_DELETE_ECO(ECN_FROM
                      ,ORG_ID);
        COMMIT;
      END IF;
    END;
    RETURN (TRUE);
  END AFTERREPORT;

  FUNCTION BEFOREREPORT RETURN BOOLEAN IS
  C_DATE_FORMAT varchar2(20);
  BEGIN
  C_DATE_FORMAT := 'DD-MON-YY';
C_DATE_FROM := to_Char(DATE_FROM ,C_DATE_FORMAT);
C_DATE_TO := to_Char(DATE_TO ,C_DATE_FORMAT);
    RETURN (TRUE);
  END BEFOREREPORT;

  FUNCTION ONHAND_QTYFORMULA(COMPONENT_ITEM_ID IN NUMBER) RETURN NUMBER IS
  BEGIN
    DECLARE
      X_ONHANDQTY NUMBER;
      CURSOR COMPUTE_ONHAND IS
        SELECT
          NVL(SUM(Q.TRANSACTION_QUANTITY)
             ,0) TOTALQTY
        FROM
          MTL_ONHAND_QUANTITIES Q
        WHERE Q.ORGANIZATION_ID = ORG_ID
          AND Q.INVENTORY_ITEM_ID = COMPONENT_ITEM_ID;
    BEGIN
      FOR X_OnHand IN COMPUTE_ONHAND LOOP
        X_ONHANDQTY := X_ONHAND.TOTALQTY;
      END LOOP;
      RETURN (X_ONHANDQTY);
    END;
    RETURN NULL;
  END ONHAND_QTYFORMULA;

  FUNCTION BETWEENPAGE RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END BETWEENPAGE;

  FUNCTION BEFOREPFORM RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END BEFOREPFORM;

  FUNCTION AFTERPFORM RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END AFTERPFORM;

  PROCEDURE BOM_DELETE_ECO(P_CHANGE_NOTICE IN VARCHAR2
                          ,P_ORGANIZATION_ID IN NUMBER) IS
  BEGIN
    /*STPROC.INIT('begin BOMPECOD.BOM_DELETE_ECO(:P_CHANGE_NOTICE, :P_ORGANIZATION_ID); end;');
    STPROC.BIND_I(P_CHANGE_NOTICE);
    STPROC.BIND_I(P_ORGANIZATION_ID);
    STPROC.EXECUTE;*/
    null;
  END BOM_DELETE_ECO;

END ENG_ENGRCNSR_XMLP_PKG;


/
