--------------------------------------------------------
--  DDL for Package Body FEM_BR_MAP_PREVIEW_PVT
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."FEM_BR_MAP_PREVIEW_PVT" AS
/* $Header: fem_br_map_preview_pvt.plb 120.1 2008/02/20 06:55:37 jcliving ship $ */

-------------------------------------------------------------------------------
-- PRIVATE CONSTANTS
-------------------------------------------------------------------------------

G_PKG_NAME constant varchar2(30) := 'FEM_BR_MAP_PREVIEW_PVT';


-------------------------------------------------------------------------------
-- PRIVATE SPECIFICATIONS
-------------------------------------------------------------------------------

PROCEDURE DeleteMappingPreviewRec(
  p_obj_def_id          IN          NUMBER
);

PROCEDURE DeletePreviewResults(
  p_obj_def_id          IN          NUMBER
);


-------------------------------------------------------------------------------
-- PUBLIC BODIES
-------------------------------------------------------------------------------

--
-- PROCEDURE
--   DeleteObjectDefinition
--
-- DESCRIPTION
--   Deletes all the details records of a Mapping Preview Definition.
--
-- IN
--   p_obj_def_id    - Object Definition ID.
--
-------------------------------------------------------------------------------
PROCEDURE DeleteObjectDefinition(
  p_obj_def_id          IN          NUMBER
)
-------------------------------------------------------------------------------
IS

  g_api_name    constant varchar2(30)   := 'DeleteObjectDefinition';

BEGIN

  DeletePreviewResults(
    p_obj_def_id     => p_obj_def_id
  );

  DeleteMappingPreviewRec(
    p_obj_def_id     => p_obj_def_id
  );

EXCEPTION

  WHEN OTHERS THEN
    FND_MSG_PUB.Add_Exc_Msg(G_PKG_NAME, g_api_name);
    RAISE FND_API.G_EXC_UNEXPECTED_ERROR;

END DeleteObjectDefinition;


-------------------------------------------------------------------------------
-- PRIVATE BODIES
-------------------------------------------------------------------------------

--
-- PROCEDURE
--   DeletMappingPreviewRec
--
-- DESCRIPTION
--   Deletes a Mapping Preview Definition by performing deletes on records
--   in the FEM_ALLOC_PREVIEWS table.
--
-- IN
--   p_obj_def_id    - Object Definition ID.
--
-------------------------------------------------------------------------------
PROCEDURE DeleteMappingPreviewRec(
  p_obj_def_id IN NUMBER
)
-------------------------------------------------------------------------------
IS
BEGIN

  DELETE FROM fem_alloc_previews
  WHERE preview_obj_def_id = p_obj_def_id;

END DeleteMappingPreviewRec;


--
-- PROCEDURE
--   DeletePreviewResults
--
-- DESCRIPTION
--   Deletes the results generated by the Mapping Preview.
--
-- IN
--   p_obj_def_id    - Preview Object Definition ID.
--
-------------------------------------------------------------------------------
PROCEDURE DeletePreviewResults(
  p_obj_def_id IN NUMBER
)
-------------------------------------------------------------------------------
IS
    v_return_status VARCHAR2(1);
    v_msg_count NUMBER;
    v_msg_data VARCHAR2 (4000);

BEGIN

    FEM_MAPPING_PREVIEW_UTIL_PKG.Remove_Results(
      p_api_version                  => 1.0,
      p_init_msg_list                => FND_API.G_FALSE,
      p_commit                       => FND_API.G_FALSE,
      x_return_status                => v_return_status,
      x_msg_count                    => v_msg_count,
      x_msg_data                     => v_msg_data,
      p_preview_obj_def_id           => p_obj_def_id
    );

    IF (v_return_status = FND_API.G_RET_STS_ERROR) THEN
      RAISE FND_API.G_EXC_ERROR;
    ELSIF (v_return_status = FND_API.G_RET_STS_UNEXP_ERROR) THEN
      RAISE FND_API.G_EXC_UNEXPECTED_ERROR;
    END IF;

END DeletePreviewResults;


-------------------------------------------------------------------------------

END FEM_BR_MAP_PREVIEW_PVT;

/
