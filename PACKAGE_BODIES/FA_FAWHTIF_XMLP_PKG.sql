--------------------------------------------------------
--  DDL for Package Body FA_FAWHTIF_XMLP_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."FA_FAWHTIF_XMLP_PKG" AS
/* $Header: FAWHTIFB.pls 120.0.12010000.1 2008/07/28 13:19:30 appldev ship $ */
  FUNCTION BEFOREREPORT RETURN BOOLEAN IS
  BEGIN
    DECLARE
      L_CURRENCY_CODE VARCHAR2(15);
      L_PRECISION NUMBER(15);
      L_COMPANY_NAME VARCHAR2(30);
    BEGIN

        P_CONC_REQUEST_ID := FND_GLOBAL.CONC_REQUEST_ID;
select SUBSTR(argument1,INSTR(argument1,'=',1)+1,LENGTH(argument1)),
SUBSTR(argument2,INSTR(argument2,'=',1)+1,LENGTH(argument2)),
SUBSTR(argument3,INSTR(argument3,'=',1)+1,LENGTH(argument3))
into P_REQUEST_ID_T,P_BOOK_T,P_CURRENCY_T
        from FND_CONCURRENT_REQUESTS
where request_id=P_CONC_REQUEST_ID;
      SELECT
        SC.COMPANY_NAME
      INTO
        L_COMPANY_NAME
      FROM
        FA_SYSTEM_CONTROLS SC;
      SELECT
        SOB.CURRENCY_CODE,
        CUR.PRECISION
      INTO
        L_CURRENCY_CODE
        ,L_PRECISION
      FROM
        FA_BOOK_CONTROLS BC,
        GL_SETS_OF_BOOKS SOB,
        FND_CURRENCIES CUR
      WHERE BC.BOOK_TYPE_CODE = P_BOOK_T
        AND SOB.SET_OF_BOOKS_ID = BC.SET_OF_BOOKS_ID
        AND CUR.CURRENCY_CODE = SOB.CURRENCY_CODE;
      RP_COMPANY_NAME := L_COMPANY_NAME;
      C_CURRENCY_CODE := L_CURRENCY_CODE;
      P_MIN_PRECISION := L_PRECISION;
      C_BOOK_TYPE_CODE := P_BOOK_T;
      C_CURRENCY_CODE := P_CURRENCY_T;
      DECLARE
        L_REPORT_NAME VARCHAR2(80);
        L_CONC_PROGRAM_ID NUMBER;
      BEGIN
        SELECT
          CR.CONCURRENT_PROGRAM_ID
        INTO
          L_CONC_PROGRAM_ID
        FROM
          FND_CONCURRENT_REQUESTS CR
        WHERE CR.PROGRAM_APPLICATION_ID = 140
          AND CR.REQUEST_ID = P_CONC_REQUEST_ID;
        SELECT
          CP.USER_CONCURRENT_PROGRAM_NAME
        INTO
          L_REPORT_NAME
        FROM
          FND_CONCURRENT_PROGRAMS_VL CP
        WHERE CP.CONCURRENT_PROGRAM_ID = L_CONC_PROGRAM_ID
          AND CP.APPLICATION_ID = 140;
        RP_REPORT_NAME := L_REPORT_NAME;
      EXCEPTION
        WHEN OTHERS THEN
          RP_REPORT_NAME := 'What-If Depreciation Report';
      END;
      RETURN (TRUE);
    EXCEPTION
      WHEN OTHERS THEN
        RETURN (FALSE);
    END;
  END BEFOREREPORT;

  FUNCTION AFTERREPORT RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END AFTERREPORT;

  FUNCTION RP_COMPANY_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN RP_COMPANY_NAME;
  END RP_COMPANY_NAME_P;

  FUNCTION RP_REPORT_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN RP_REPORT_NAME;
  END RP_REPORT_NAME_P;

  FUNCTION C_CURRENCY_CODE_P RETURN VARCHAR2 IS
  BEGIN
    RETURN C_CURRENCY_CODE;
  END C_CURRENCY_CODE_P;

  FUNCTION C_BOOK_TYPE_CODE_P RETURN VARCHAR2 IS
  BEGIN
    RETURN C_BOOK_TYPE_CODE;
  END C_BOOK_TYPE_CODE_P;

END FA_FAWHTIF_XMLP_PKG;


/
