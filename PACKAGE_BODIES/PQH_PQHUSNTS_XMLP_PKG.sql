--------------------------------------------------------
--  DDL for Package Body PQH_PQHUSNTS_XMLP_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."PQH_PQHUSNTS_XMLP_PKG" AS
/* $Header: PQHUSNTSB.pls 120.1 2007/12/07 06:57:48 vjaganat noship $ */
  FUNCTION BEFOREREPORT RETURN BOOLEAN IS
    L_PERSON_ID NUMBER;
    L_MANAGER_ID NUMBER;
    L_LNAME VARCHAR2(150);
    L_TITLE VARCHAR2(240);
    L_EMPID VARCHAR2(240);
    L_BODY_TEXT2 VARCHAR2(2000);
    L_BODY_TEXT3 VARCHAR2(2000);
    L_BODY_TEXT4 VARCHAR2(2000);
    L_BODY_TEXT5 VARCHAR2(2000);
    L_BODY_TEXT6 VARCHAR2(2000);
    L_BODY_TEXT7 VARCHAR2(2000);
    L_BODY_TEXT8 VARCHAR2(2000);
    L_HIREDATE DATE;
  BEGIN
    P_CONC_REQUEST_ID := FND_GLOBAL.CONC_REQUEST_ID;
    CP_BUSINESS_GROUP_NAME := GET_BUSINESS_GROUP(P_BUSINESS_GROUP_ID);
    CP_LOGGED_USER_NAME := FND_PROFILE.VALUE('USERNAME');
    L_MANAGER_ID := PQH_TENURE_DETAIL.GETPERSONSUPERVISOR(P_PERSON_ID);
    CP_ACADEMIC_MANAGER_ADDRESS := PQH_TENURE_DETAIL.GETPERSONADDRESS(L_MANAGER_ID
                                                                     ,P_BUSINESS_GROUP_ID);
    CP_FACULTY_MEMBER_ADDRESS := PQH_TENURE_DETAIL.GETPERSONADDRESS(P_PERSON_ID
                                                                   ,P_BUSINESS_GROUP_ID);
    PQH_TENURE_DETAIL.GETPERSONINFO(P_PERSON_ID
                                   ,L_EMPID
                                   ,CP_FACULTY_MEMBER_NAME
                                   ,CP_FACULTY_MEMBER_LNAME
                                   ,CP_FACULTY_MEMBER_TITLE
                                   ,CP_FACULTY_MEMBER_EMAIL
                                   ,CP_CONTRACT_START_DATE);
    PQH_TENURE_DETAIL.GETPERSONINFO(L_MANAGER_ID
                                   ,L_EMPID
                                   ,CP_ACADEMIC_MANAGER_NAME
                                   ,L_LNAME
                                   ,L_TITLE
                                   ,CP_ACADEMIC_MANAGER_EMAIL
                                   ,L_HIREDATE);
    PQH_TENURE_DETAIL.GETREPORTBODYTEXT('TS'
                                       ,CP_REGARDS
                                       ,CP_BODY_TEXT
                                       ,L_BODY_TEXT2
                                       ,L_BODY_TEXT3
                                       ,L_BODY_TEXT4
                                       ,L_BODY_TEXT5
                                       ,L_BODY_TEXT6
                                       ,L_BODY_TEXT7
                                       ,L_BODY_TEXT8);
    CP_BODY_TEXT := REPLACE(CP_BODY_TEXT
                           ,'COLLEGE_UNIVERSITY_NAME'
                           ,CP_BUSINESS_GROUP_NAME);
    CP_BODY_TEXT := REPLACE(CP_BODY_TEXT
                            ,fnd_global.local_chr(38)
                            ,'');
    RETURN (TRUE);
  END BEFOREREPORT;

  FUNCTION AFTERREPORT RETURN BOOLEAN IS
  BEGIN
    --HR_STANDARD.EVENT('AFTER REPORT');
    RETURN (TRUE);
  END AFTERREPORT;

  FUNCTION CP_BUSINESS_GROUP_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_BUSINESS_GROUP_NAME;
  END CP_BUSINESS_GROUP_NAME_P;

  FUNCTION CP_BODY_TEXT_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_BODY_TEXT;
  END CP_BODY_TEXT_P;

  FUNCTION CP_FACULTY_MEMBER_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_FACULTY_MEMBER_NAME;
  END CP_FACULTY_MEMBER_NAME_P;

  FUNCTION CP_FACULTY_MEMBER_EMAIL_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_FACULTY_MEMBER_EMAIL;
  END CP_FACULTY_MEMBER_EMAIL_P;

  FUNCTION CP_FACULTY_MEMBER_ADDRESS_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_FACULTY_MEMBER_ADDRESS;
  END CP_FACULTY_MEMBER_ADDRESS_P;

  FUNCTION CP_FACULTY_MEMBER_TITLE_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_FACULTY_MEMBER_TITLE;
  END CP_FACULTY_MEMBER_TITLE_P;

  FUNCTION CP_ACADEMIC_MANAGER_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_ACADEMIC_MANAGER_NAME;
  END CP_ACADEMIC_MANAGER_NAME_P;

  FUNCTION CP_ACADEMIC_MANAGER_EMAIL_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_ACADEMIC_MANAGER_EMAIL;
  END CP_ACADEMIC_MANAGER_EMAIL_P;

  FUNCTION CP_ACADEMIC_MANAGER_ADDRESS_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_ACADEMIC_MANAGER_ADDRESS;
  END CP_ACADEMIC_MANAGER_ADDRESS_P;

  FUNCTION CP_LOGGED_USER_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_LOGGED_USER_NAME;
  END CP_LOGGED_USER_NAME_P;

  FUNCTION CP_CONTRACT_START_DATE_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_CONTRACT_START_DATE;
  END CP_CONTRACT_START_DATE_P;

  FUNCTION CP_FACULTY_MEMBER_LNAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_FACULTY_MEMBER_LNAME;
  END CP_FACULTY_MEMBER_LNAME_P;

  FUNCTION CP_REGARDS_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_REGARDS;
  END CP_REGARDS_P;

FUNCTION GET_BUSINESS_GROUP(P_BUSINESS_GROUP_ID IN NUMBER) RETURN VARCHAR2 IS
    X0 VARCHAR2(2000);
  BEGIN
    X0 := HR_REPORTS.GET_BUSINESS_GROUP(P_BUSINESS_GROUP_ID);
    RETURN X0;
  END GET_BUSINESS_GROUP;

END PQH_PQHUSNTS_XMLP_PKG;

/
