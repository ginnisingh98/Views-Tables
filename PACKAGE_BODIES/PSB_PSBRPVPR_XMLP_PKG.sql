--------------------------------------------------------
--  DDL for Package Body PSB_PSBRPVPR_XMLP_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."PSB_PSBRPVPR_XMLP_PKG" AS
/* $Header: PSBRPVPRB.pls 120.0 2008/01/07 10:49:27 vijranga noship $ */
  FUNCTION BEFOREREPORT RETURN BOOLEAN IS
    L_RETURN_STATUS VARCHAR2(1);
    L_MSG_COUNT NUMBER;
    L_MSG_DATA VARCHAR2(2000);
    L_WORKSHEET_ID NUMBER;
    L_OUT_START_DATE DATE;
    L_OUT_END_DATE DATE;
  BEGIN
    P_CONC_REQUEST_ID := FND_GLOBAL.CONC_REQUEST_ID;
    /*SRW.USER_EXIT('FND SRWINIT')*/NULL;
    FND_MESSAGE.SET_NAME('PSB'
                        ,'PSB_NO_DATA_FOUND');
    CP_NO_DATA_FOUND := FND_MESSAGE.GET;
    FND_MESSAGE.SET_NAME('PSB'
                        ,'PSB_END_OF_REPORT');
    CP_END_OF_REPORT := FND_MESSAGE.GET;
    IF P_WORKSHEET_ID IS NOT NULL THEN
      SELECT
        NAME
      INTO CP_WORKSHEET_NAME
      FROM
        PSB_WORKSHEETS
      WHERE WORKSHEET_ID = P_WORKSHEET_ID;
      SELECT
        NAME
      INTO CP_YEAR_NAME
      FROM
        PSB_BUDGET_PERIODS
      WHERE BUDGET_PERIOD_ID = P_BUDGET_YEAR_ID;
      CP_REPORT_TYPE := 'W';
      PSB_POSITIONS_I_PVT.DEFINE_WORKSHEET_VALUES(P_API_VERSION => 1.0
                                                 ,P_INIT_MSG_LIST => NULL
                                                 ,P_COMMIT => NULL
                                                 ,P_VALIDATION_LEVEL => NULL
                                                 ,P_RETURN_STATUS => L_RETURN_STATUS
                                                 ,P_MSG_COUNT => L_MSG_COUNT
                                                 ,P_MSG_DATA => L_MSG_DATA
                                                 ,P_WORKSHEET_ID => P_WORKSHEET_ID
                                                 ,P_POSITION_ID => NULL
                                                 ,P_POS_EFFECTIVE_START_DATE => NULL
                                                 ,P_POS_EFFECTIVE_END_DATE => NULL
                                                 ,P_OUT_WORKSHEET_ID => L_WORKSHEET_ID
                                                 ,P_BUDGET_SOURCE => 'BP'
                                                 ,P_OUT_START_DATE => L_OUT_START_DATE
                                                 ,P_OUT_END_DATE => L_OUT_END_DATE);
      IF L_RETURN_STATUS <> 'S' THEN
        RETURN FALSE;
      END IF;
      PSB_POSITIONS_I_PVT.INITIALIZE_VIEW(P_WORKSHEET_ID => L_WORKSHEET_ID
                                         ,P_START_DATE => L_OUT_START_DATE
                                         ,P_END_DATE => L_OUT_END_DATE
                                         ,P_SELECT_DATE => NULL);
    ELSIF P_DATA_EXTRACT_ID IS NOT NULL THEN
      SELECT
        DATA_EXTRACT_NAME
      INTO CP_EXTRACT_NAME
      FROM
        PSB_DATA_EXTRACTS
      WHERE DATA_EXTRACT_ID = P_DATA_EXTRACT_ID;
      CP_REPORT_TYPE := 'D';
    END IF;
    RETURN TRUE;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      RETURN (FALSE);
    WHEN OTHERS THEN
      RETURN NULL;
  END BEFOREREPORT;
  FUNCTION BEFOREPFORM RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END BEFOREPFORM;
  FUNCTION AFTERPFORM RETURN BOOLEAN IS
  BEGIN
    P_CONC_REQUEST_ID := FND_GLOBAL.CONC_REQUEST_ID;
    /*SRW.USER_EXIT('FND SRWINIT')*/NULL;
    RETURN (TRUE);
  END AFTERPFORM;
  FUNCTION AFTERREPORT RETURN BOOLEAN IS
  BEGIN
    P_CONC_REQUEST_ID := FND_GLOBAL.CONC_REQUEST_ID;
    /*SRW.USER_EXIT('FND SRWINIT')*/NULL;
    /*SRW.USER_EXIT('FND SRWEXIT')*/NULL;
    RETURN (TRUE);
  END AFTERREPORT;
  FUNCTION CF_1FORMULA0090(BUDGET_GROUP_ID_1 IN NUMBER) RETURN VARCHAR2 IS
  BEGIN
    SELECT
      TOPBG.CURRENCY_CODE
    INTO CP_CURRENCY_CODE
    FROM
      PSB_BUDGET_GROUPS_V TOPBG,
      PSB_BUDGET_GROUPS_V REGBG
    WHERE REGBG.BUDGET_GROUP_ID = BUDGET_GROUP_ID_1
      AND DECODE(REGBG.ROOT_BUDGET_GROUP_ID
          ,NULL
          ,REGBG.BUDGET_GROUP_ID
          ,REGBG.ROOT_BUDGET_GROUP_ID) = TOPBG.BUDGET_GROUP_ID;
    RETURN (CP_CURRENCY_CODE);
  END CF_1FORMULA0090;
  FUNCTION BETWEENPAGE RETURN BOOLEAN IS
  BEGIN
    RETURN (TRUE);
  END BETWEENPAGE;
  FUNCTION CP_CURRENCY_CODE_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_CURRENCY_CODE;
  END CP_CURRENCY_CODE_P;
  FUNCTION CP_ELEM_TOTAL_P RETURN NUMBER IS
  BEGIN
    RETURN CP_ELEM_TOTAL;
  END CP_ELEM_TOTAL_P;
  FUNCTION CP_POS_TOTAL_P RETURN NUMBER IS
  BEGIN
    RETURN CP_POS_TOTAL;
  END CP_POS_TOTAL_P;
  FUNCTION CP_NO_DATA_FOUND_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_NO_DATA_FOUND;
  END CP_NO_DATA_FOUND_P;
  FUNCTION CP_END_OF_REPORT_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_END_OF_REPORT;
  END CP_END_OF_REPORT_P;
  FUNCTION CP_POS_ASS_WS_P RETURN NUMBER IS
  BEGIN
    RETURN CP_POS_ASS_WS;
  END CP_POS_ASS_WS_P;
  FUNCTION CP_EXTRACT_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_EXTRACT_NAME;
  END CP_EXTRACT_NAME_P;
  FUNCTION CP_WORKSHEET_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_WORKSHEET_NAME;
  END CP_WORKSHEET_NAME_P;
  FUNCTION CP_YEAR_NAME_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_YEAR_NAME;
  END CP_YEAR_NAME_P;
  FUNCTION CP_REPORT_TYPE_P RETURN VARCHAR2 IS
  BEGIN
    RETURN CP_REPORT_TYPE;
  END CP_REPORT_TYPE_P;
END PSB_PSBRPVPR_XMLP_PKG;






/
