--------------------------------------------------------
--  DDL for Package Body IEX_PAYMENTS_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."IEX_PAYMENTS_PKG" AS
/* $Header: iextpayb.pls 120.0 2004/01/24 03:22:24 appldev noship $ */

/* Insert_Row procedure */
PG_DEBUG NUMBER(2) := TO_NUMBER(NVL(FND_PROFILE.value('IEX_DEBUG_LEVEL'), '20'));

PROCEDURE Insert_Row(x_rowid	IN OUT NOCOPY VARCHAR2
	,p_PAYMENT_ID		NUMBER
	,p_OBJECT_VERSION_NUMBER		NUMBER
	,p_PROGRAM_ID		NUMBER	DEFAULT NULL
	,p_LAST_UPDATE_DATE		DATE
	,p_LAST_UPDATED_BY		NUMBER
	,p_LAST_UPDATE_LOGIN		NUMBER	DEFAULT NULL
	,p_CREATION_DATE		DATE
	,p_CREATED_BY		NUMBER
	,p_PAYMENT_METHOD_ID		NUMBER	DEFAULT NULL
	,p_PAYMENT_METHOD		VARCHAR2
	,p_IPAYMENT_TRANS_ID		VARCHAR2	DEFAULT NULL
	,p_IPAYMENT_STATUS		NUMBER	DEFAULT NULL
	,p_PAY_SVR_CONFIRMATION		VARCHAR2	DEFAULT NULL
	,p_CAMPAIGN_SCHED_ID		NUMBER	DEFAULT NULL
	,p_ATTRIBUTE_CATEGORY		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE1		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE2		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE3		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE4		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE5		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE6		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE7		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE8		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE9		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE10		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE11		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE12		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE13		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE14		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE15		VARCHAR2	DEFAULT NULL
	,p_TANGIBLE_ID		VARCHAR2	DEFAULT NULL
	,p_PAYEE_ID		VARCHAR2	DEFAULT NULL
	,p_RESOURCE_ID		NUMBER	DEFAULT NULL
) IS
	CURSOR C IS SELECT ROWID FROM IEX_PAYMENTS
		WHERE PAYMENT_ID = p_PAYMENT_ID;

BEGIN
	INSERT INTO IEX_PAYMENTS
	(
		PAYMENT_ID
		,OBJECT_VERSION_NUMBER
		,PROGRAM_ID
		,LAST_UPDATE_DATE
		,LAST_UPDATED_BY
		,LAST_UPDATE_LOGIN
		,CREATION_DATE
		,CREATED_BY
		,PAYMENT_METHOD_ID
		,PAYMENT_METHOD
		,IPAYMENT_TRANS_ID
		,IPAYMENT_STATUS
		,PAY_SVR_CONFIRMATION
		,CAMPAIGN_SCHED_ID
		,ATTRIBUTE_CATEGORY
		,ATTRIBUTE1
		,ATTRIBUTE2
		,ATTRIBUTE3
		,ATTRIBUTE4
		,ATTRIBUTE5
		,ATTRIBUTE6
		,ATTRIBUTE7
		,ATTRIBUTE8
		,ATTRIBUTE9
		,ATTRIBUTE10
		,ATTRIBUTE11
		,ATTRIBUTE12
		,ATTRIBUTE13
		,ATTRIBUTE14
		,ATTRIBUTE15
		,TANGIBLE_ID
		,PAYEE_ID
		,RESOURCE_ID
	) VALUES (
		p_PAYMENT_ID
		,p_OBJECT_VERSION_NUMBER
		,p_PROGRAM_ID
		,p_LAST_UPDATE_DATE
		,p_LAST_UPDATED_BY
		,p_LAST_UPDATE_LOGIN
		,p_CREATION_DATE
		,p_CREATED_BY
		,p_PAYMENT_METHOD_ID
		,p_PAYMENT_METHOD
		,p_IPAYMENT_TRANS_ID
		,p_IPAYMENT_STATUS
		,p_PAY_SVR_CONFIRMATION
		,p_CAMPAIGN_SCHED_ID
		,p_ATTRIBUTE_CATEGORY
		,p_ATTRIBUTE1
		,p_ATTRIBUTE2
		,p_ATTRIBUTE3
		,p_ATTRIBUTE4
		,p_ATTRIBUTE5
		,p_ATTRIBUTE6
		,p_ATTRIBUTE7
		,p_ATTRIBUTE8
		,p_ATTRIBUTE9
		,p_ATTRIBUTE10
		,p_ATTRIBUTE11
		,p_ATTRIBUTE12
		,p_ATTRIBUTE13
		,p_ATTRIBUTE14
		,p_ATTRIBUTE15
		,p_TANGIBLE_ID
		,p_PAYEE_ID
		,p_RESOURCE_ID
	);

	OPEN C;
	FETCH C INTO x_rowid;
	IF (C%NOTFOUND) THEN
		CLOSE C;
		RAISE NO_DATA_FOUND;
	END IF;
	CLOSE C;
END Insert_Row;

/* Update_Row procedure */
PROCEDURE Update_Row(x_rowid	VARCHAR2
	,p_PAYMENT_ID		NUMBER
	,p_OBJECT_VERSION_NUMBER		NUMBER
	,p_PROGRAM_ID		NUMBER	DEFAULT NULL
	,p_LAST_UPDATE_DATE		DATE
	,p_LAST_UPDATED_BY		NUMBER
	,p_LAST_UPDATE_LOGIN		NUMBER	DEFAULT NULL
	,p_CREATION_DATE		DATE
	,p_CREATED_BY		NUMBER
	,p_PAYMENT_METHOD_ID		NUMBER	DEFAULT NULL
	,p_PAYMENT_METHOD		VARCHAR2
	,p_IPAYMENT_TRANS_ID		VARCHAR2	DEFAULT NULL
	,p_IPAYMENT_STATUS		NUMBER	DEFAULT NULL
	,p_PAY_SVR_CONFIRMATION		VARCHAR2	DEFAULT NULL
	,p_CAMPAIGN_SCHED_ID		NUMBER	DEFAULT NULL
	,p_ATTRIBUTE_CATEGORY		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE1		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE2		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE3		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE4		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE5		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE6		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE7		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE8		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE9		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE10		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE11		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE12		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE13		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE14		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE15		VARCHAR2	DEFAULT NULL
	,p_TANGIBLE_ID		VARCHAR2	DEFAULT NULL
	,p_PAYEE_ID		VARCHAR2	DEFAULT NULL
	,p_RESOURCE_ID		NUMBER	DEFAULT NULL
) IS
BEGIN
	UPDATE IEX_PAYMENTS SET
		PAYMENT_ID = p_PAYMENT_ID
		,OBJECT_VERSION_NUMBER = p_OBJECT_VERSION_NUMBER
		,PROGRAM_ID = p_PROGRAM_ID
		,LAST_UPDATE_DATE = p_LAST_UPDATE_DATE
		,LAST_UPDATED_BY = p_LAST_UPDATED_BY
		,LAST_UPDATE_LOGIN = p_LAST_UPDATE_LOGIN
		,CREATION_DATE = p_CREATION_DATE
		,CREATED_BY = p_CREATED_BY
		,PAYMENT_METHOD_ID = p_PAYMENT_METHOD_ID
		,PAYMENT_METHOD = p_PAYMENT_METHOD
		,IPAYMENT_TRANS_ID = p_IPAYMENT_TRANS_ID
		,IPAYMENT_STATUS = p_IPAYMENT_STATUS
		,PAY_SVR_CONFIRMATION = p_PAY_SVR_CONFIRMATION
		,CAMPAIGN_SCHED_ID = p_CAMPAIGN_SCHED_ID
		,ATTRIBUTE_CATEGORY = p_ATTRIBUTE_CATEGORY
		,ATTRIBUTE1 = p_ATTRIBUTE1
		,ATTRIBUTE2 = p_ATTRIBUTE2
		,ATTRIBUTE3 = p_ATTRIBUTE3
		,ATTRIBUTE4 = p_ATTRIBUTE4
		,ATTRIBUTE5 = p_ATTRIBUTE5
		,ATTRIBUTE6 = p_ATTRIBUTE6
		,ATTRIBUTE7 = p_ATTRIBUTE7
		,ATTRIBUTE8 = p_ATTRIBUTE8
		,ATTRIBUTE9 = p_ATTRIBUTE9
		,ATTRIBUTE10 = p_ATTRIBUTE10
		,ATTRIBUTE11 = p_ATTRIBUTE11
		,ATTRIBUTE12 = p_ATTRIBUTE12
		,ATTRIBUTE13 = p_ATTRIBUTE13
		,ATTRIBUTE14 = p_ATTRIBUTE14
		,ATTRIBUTE15 = p_ATTRIBUTE15
		,TANGIBLE_ID = p_TANGIBLE_ID
		,PAYEE_ID = p_PAYEE_ID
		,RESOURCE_ID = p_RESOURCE_ID
	 WHERE rowid = x_rowid;

	if (sql%notfound) then
		raise no_data_found;
	end if;
END Update_Row;

/* Delete_Row procedure */
PROCEDURE Delete_Row(x_rowid VARCHAR2) IS
BEGIN
	DELETE FROM IEX_PAYMENTS
		WHERE rowid = x_rowid;

	if (sql%notfound) then
		raise no_data_found;
	end if;
END Delete_Row;

/* Lock_Row procedure */
PROCEDURE Lock_Row(x_rowid	VARCHAR2
	,p_PAYMENT_ID		NUMBER
	,p_OBJECT_VERSION_NUMBER		NUMBER
	,p_PROGRAM_ID		NUMBER	DEFAULT NULL
	,p_LAST_UPDATE_DATE		DATE
	,p_LAST_UPDATED_BY		NUMBER
	,p_LAST_UPDATE_LOGIN		NUMBER	DEFAULT NULL
	,p_CREATION_DATE		DATE
	,p_CREATED_BY		NUMBER
	,p_PAYMENT_METHOD_ID		NUMBER	DEFAULT NULL
	,p_PAYMENT_METHOD		VARCHAR2
	,p_IPAYMENT_TRANS_ID		VARCHAR2	DEFAULT NULL
	,p_IPAYMENT_STATUS		NUMBER	DEFAULT NULL
	,p_PAY_SVR_CONFIRMATION		VARCHAR2	DEFAULT NULL
	,p_CAMPAIGN_SCHED_ID		NUMBER	DEFAULT NULL
	,p_ATTRIBUTE_CATEGORY		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE1		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE2		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE3		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE4		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE5		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE6		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE7		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE8		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE9		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE10		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE11		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE12		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE13		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE14		VARCHAR2	DEFAULT NULL
	,p_ATTRIBUTE15		VARCHAR2	DEFAULT NULL
	,p_TANGIBLE_ID		VARCHAR2	DEFAULT NULL
	,p_PAYEE_ID		VARCHAR2	DEFAULT NULL
	,p_RESOURCE_ID		NUMBER	DEFAULT NULL
) IS
	CURSOR C IS SELECT * FROM IEX_PAYMENTS
		WHERE rowid = x_rowid
		FOR UPDATE of PAYMENT_ID NOWAIT;
	Recinfo C%ROWTYPE;
BEGIN
	OPEN C;
	FETCH C INTO Recinfo;
	IF (C%NOTFOUND) THEN
		CLOSE C;
		FND_MESSAGE.Set_Name('FND', 'FORM_RECORD_DELETED');
		APP_EXCEPTION.Raise_Exception;
	END IF;
	CLOSE C;

	IF (
		(Recinfo.PAYMENT_ID = p_PAYMENT_ID)
		AND ( (Recinfo.OBJECT_VERSION_NUMBER = p_OBJECT_VERSION_NUMBER)
			OR ( (Recinfo.OBJECT_VERSION_NUMBER IS NULL)
				AND (p_OBJECT_VERSION_NUMBER IS NULL)))
		AND ( (Recinfo.PROGRAM_ID = p_PROGRAM_ID)
			OR ( (Recinfo.PROGRAM_ID IS NULL)
				AND (p_PROGRAM_ID IS NULL)))
		AND ( (Recinfo.LAST_UPDATE_DATE = p_LAST_UPDATE_DATE)
			OR ( (Recinfo.LAST_UPDATE_DATE IS NULL)
				AND (p_LAST_UPDATE_DATE IS NULL)))
		AND ( (Recinfo.LAST_UPDATED_BY = p_LAST_UPDATED_BY)
			OR ( (Recinfo.LAST_UPDATED_BY IS NULL)
				AND (p_LAST_UPDATED_BY IS NULL)))
		AND ( (Recinfo.LAST_UPDATE_LOGIN = p_LAST_UPDATE_LOGIN)
			OR ( (Recinfo.LAST_UPDATE_LOGIN IS NULL)
				AND (p_LAST_UPDATE_LOGIN IS NULL)))
		AND ( (Recinfo.CREATION_DATE = p_CREATION_DATE)
			OR ( (Recinfo.CREATION_DATE IS NULL)
				AND (p_CREATION_DATE IS NULL)))
		AND ( (Recinfo.CREATED_BY = p_CREATED_BY)
			OR ( (Recinfo.CREATED_BY IS NULL)
				AND (p_CREATED_BY IS NULL)))
		AND ( (Recinfo.PAYMENT_METHOD_ID = p_PAYMENT_METHOD_ID)
			OR ( (Recinfo.PAYMENT_METHOD_ID IS NULL)
				AND (p_PAYMENT_METHOD_ID IS NULL)))
		AND ( (Recinfo.PAYMENT_METHOD = p_PAYMENT_METHOD)
			OR ( (Recinfo.PAYMENT_METHOD IS NULL)
				AND (p_PAYMENT_METHOD IS NULL)))
		AND ( (Recinfo.IPAYMENT_TRANS_ID = p_IPAYMENT_TRANS_ID)
			OR ( (Recinfo.IPAYMENT_TRANS_ID IS NULL)
				AND (p_IPAYMENT_TRANS_ID IS NULL)))
		AND ( (Recinfo.IPAYMENT_STATUS = p_IPAYMENT_STATUS)
			OR ( (Recinfo.IPAYMENT_STATUS IS NULL)
				AND (p_IPAYMENT_STATUS IS NULL)))
		AND ( (Recinfo.PAY_SVR_CONFIRMATION = p_PAY_SVR_CONFIRMATION)
			OR ( (Recinfo.PAY_SVR_CONFIRMATION IS NULL)
				AND (p_PAY_SVR_CONFIRMATION IS NULL)))
		AND ( (Recinfo.CAMPAIGN_SCHED_ID = p_CAMPAIGN_SCHED_ID)
			OR ( (Recinfo.CAMPAIGN_SCHED_ID IS NULL)
				AND (p_CAMPAIGN_SCHED_ID IS NULL)))
		AND ( (Recinfo.ATTRIBUTE_CATEGORY = p_ATTRIBUTE_CATEGORY)
			OR ( (Recinfo.ATTRIBUTE_CATEGORY IS NULL)
				AND (p_ATTRIBUTE_CATEGORY IS NULL)))
		AND ( (Recinfo.ATTRIBUTE1 = p_ATTRIBUTE1)
			OR ( (Recinfo.ATTRIBUTE1 IS NULL)
				AND (p_ATTRIBUTE1 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE2 = p_ATTRIBUTE2)
			OR ( (Recinfo.ATTRIBUTE2 IS NULL)
				AND (p_ATTRIBUTE2 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE3 = p_ATTRIBUTE3)
			OR ( (Recinfo.ATTRIBUTE3 IS NULL)
				AND (p_ATTRIBUTE3 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE4 = p_ATTRIBUTE4)
			OR ( (Recinfo.ATTRIBUTE4 IS NULL)
				AND (p_ATTRIBUTE4 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE5 = p_ATTRIBUTE5)
			OR ( (Recinfo.ATTRIBUTE5 IS NULL)
				AND (p_ATTRIBUTE5 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE6 = p_ATTRIBUTE6)
			OR ( (Recinfo.ATTRIBUTE6 IS NULL)
				AND (p_ATTRIBUTE6 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE7 = p_ATTRIBUTE7)
			OR ( (Recinfo.ATTRIBUTE7 IS NULL)
				AND (p_ATTRIBUTE7 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE8 = p_ATTRIBUTE8)
			OR ( (Recinfo.ATTRIBUTE8 IS NULL)
				AND (p_ATTRIBUTE8 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE9 = p_ATTRIBUTE9)
			OR ( (Recinfo.ATTRIBUTE9 IS NULL)
				AND (p_ATTRIBUTE9 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE10 = p_ATTRIBUTE10)
			OR ( (Recinfo.ATTRIBUTE10 IS NULL)
				AND (p_ATTRIBUTE10 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE11 = p_ATTRIBUTE11)
			OR ( (Recinfo.ATTRIBUTE11 IS NULL)
				AND (p_ATTRIBUTE11 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE12 = p_ATTRIBUTE12)
			OR ( (Recinfo.ATTRIBUTE12 IS NULL)
				AND (p_ATTRIBUTE12 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE13 = p_ATTRIBUTE13)
			OR ( (Recinfo.ATTRIBUTE13 IS NULL)
				AND (p_ATTRIBUTE13 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE14 = p_ATTRIBUTE14)
			OR ( (Recinfo.ATTRIBUTE14 IS NULL)
				AND (p_ATTRIBUTE14 IS NULL)))
		AND ( (Recinfo.ATTRIBUTE15 = p_ATTRIBUTE15)
			OR ( (Recinfo.ATTRIBUTE15 IS NULL)
				AND (p_ATTRIBUTE15 IS NULL)))
		AND ( (Recinfo.TANGIBLE_ID = p_TANGIBLE_ID)
			OR ( (Recinfo.TANGIBLE_ID IS NULL)
				AND (p_TANGIBLE_ID IS NULL)))
		AND ( (Recinfo.PAYEE_ID = p_PAYEE_ID)
			OR ( (Recinfo.PAYEE_ID IS NULL)
				AND (p_PAYEE_ID IS NULL)))
		AND ( (Recinfo.RESOURCE_ID = p_RESOURCE_ID)
			OR ( (Recinfo.RESOURCE_ID IS NULL)
				AND (p_RESOURCE_ID IS NULL)))
	   ) THEN
		return;
	ELSE
		FND_MESSAGE.Set_Name('FND', 'FORM_RECORD_CHANGED');
		APP_EXCEPTION.Raise_Exception;
	END IF;
END Lock_Row;
END;


/
