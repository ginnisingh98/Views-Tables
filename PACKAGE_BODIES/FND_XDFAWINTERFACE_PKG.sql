--------------------------------------------------------
--  DDL for Package Body FND_XDFAWINTERFACE_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."FND_XDFAWINTERFACE_PKG" as
/* $Header: fndpawib.pls 120.0 2006/05/25 11:54:07 bhthiaga noship $ */

--
-- INSERT_AW_DEF_INTERFACE (PRIVATE))
--   Add a new column into FND_AW_DEF_INTERFACE. This is only called after checking
--   there is no such column exists in UPLOAD_AW_DEF_INTERFACE().
--
procedure INSERT_AW_DEF_INTERFACE(
    X_OBJECT_NAME in VARCHAR2,
    X_OBJECT_TYPE in VARCHAR2,
    X_OBJECT_OWNER in VARCHAR2,
    X_OBJECT_DEFINITION IN CLOB,
    X_AW_NAME in VARCHAR2,
    X_LAST_UPDATE_DATE IN DATE,
    X_LAST_UPDATED_BY  IN NUMBER,
    X_CREATION_DATE IN DATE,
    X_CREATED_BY  IN NUMBER,
    X_LAST_UPDATE_LOGIN  IN NUMBER
) IS
BEGIN
INSERT INTO FND_AW_DEF_INTERFACE(
	OBJECT_NAME,
	OBJECT_TYPE,
	OBJECT_OWNER,
	OBJECT_DEFINITION,
        AW_NAME,
	LAST_UPDATE_DATE,
	LAST_UPDATED_BY,
	CREATION_DATE,
	CREATED_BY,
	LAST_UPDATE_LOGIN)
	VALUES(
	X_OBJECT_NAME,
	X_OBJECT_TYPE,
	X_OBJECT_OWNER,
	X_OBJECT_DEFINITION,
	X_AW_NAME,
	X_LAST_UPDATE_DATE,
	X_LAST_UPDATED_BY,
	X_CREATION_DATE,
	X_CREATED_BY,
	X_LAST_UPDATE_LOGIN);
END INSERT_AW_DEF_INTERFACE;

procedure UPLOAD_AW_DEF_INTERFACE(
    X_OBJECT_NAME in VARCHAR2,
    X_OBJECT_TYPE in VARCHAR2,
    X_OBJECT_OWNER in VARCHAR2,
    X_OBJECT_DEFINITION in CLOB,
    X_AW_NAME     in VARCHAR2,
    X_LAST_UPDATE_DATE IN VARCHAR2,
    X_CUSTOM_MODE IN VARCHAR2,
    X_LAST_UPDATED_BY  in VARCHAR2
)IS
  F_LUBY    NUMBER;  -- entity owner in file
  F_LUDATE  DATE;    -- entity update date in file
  DB_LUBY   NUMBER;  -- entity owner in db
  DB_LUDATE DATE;    -- entity update date in db

BEGIN

   -- No need to test last update for interface table

  F_LUDATE := NVL(TO_DATE(X_LAST_UPDATE_DATE, 'YYYY/MM/DD'), SYSDATE);

  BEGIN
    SELECT LAST_UPDATED_BY, LAST_UPDATE_DATE
    INTO DB_LUBY, DB_LUDATE
    FROM FND_AW_DEF_INTERFACE
    WHERE OBJECT_NAME = X_OBJECT_NAME AND OBJECT_TYPE = X_OBJECT_TYPE;


	 UPDATE FND_AW_DEF_INTERFACE SET
	 OBJECT_NAME = X_OBJECT_NAME,
	 OBJECT_TYPE = X_OBJECT_TYPE,
	 OBJECT_OWNER = X_OBJECT_OWNER,
	 OBJECT_DEFINITION = X_OBJECT_DEFINITION,
	 AW_NAME = X_AW_NAME,
	 LAST_UPDATE_DATE = F_LUDATE,
	 LAST_UPDATED_BY = F_LUBY,
         LAST_UPDATE_LOGIN = F_LUBY
	 WHERE OBJECT_NAME = X_OBJECT_NAME AND OBJECT_TYPE = X_OBJECT_TYPE;
EXCEPTION
 WHEN NO_DATA_FOUND THEN
    FND_XDFAWINTERFACE_PKG.INSERT_AW_DEF_INTERFACE(
	X_OBJECT_NAME,
	X_OBJECT_TYPE,
	X_OBJECT_OWNER,
	X_OBJECT_DEFINITION,
	X_AW_NAME,
	F_LUDATE,
	F_LUBY,
	F_LUDATE,
	F_LUBY,
	0);

END;
END UPLOAD_AW_DEF_INTERFACE;

end Fnd_XdfAWInterface_Pkg;

/
