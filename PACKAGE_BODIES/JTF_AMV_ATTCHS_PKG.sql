--------------------------------------------------------
--  DDL for Package Body JTF_AMV_ATTCHS_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."JTF_AMV_ATTCHS_PKG" as
/* $Header: jtfvattb.pls 120.4 2006/01/16 01:41:42 vimohan ship $ */
procedure Load_Row(
  X_ATTACHMENT_ID in VARCHAR2,
  X_OBJECT_VERSION_NUMBER in VARCHAR2,
  X_OWNER_USER_ID in VARCHAR2,
  X_ATTACHMENT_USED_BY_ID in VARCHAR2,
  X_ATTACHMENT_USED_BY in VARCHAR2,
  X_VERSION in VARCHAR2,
  X_ENABLED_FLAG in VARCHAR2,
  X_CAN_FULFILL_ELECTRONIC_FLAG in VARCHAR2,
  X_FILE_ID in VARCHAR2,
  X_FILE_NAME in VARCHAR2,
  X_FILE_EXTENSION in VARCHAR2,
  X_KEYWORDS in VARCHAR2,
  X_DISPLAY_WIDTH in VARCHAR2,
  X_DISPLAY_HEIGHT in VARCHAR2,
  X_DISPLAY_LOCATION in VARCHAR2,
  X_LINK_TO in VARCHAR2,
  X_LINK_URL in VARCHAR2,
  X_SEND_FOR_PREVIEW_FLAG in VARCHAR2,
  X_ATTACHMENT_TYPE in VARCHAR2,
  X_LANGUAGE_CODE in VARCHAR2,
  X_APPLICATION_ID in VARCHAR2,
  X_DESCRIPTION in VARCHAR2,
  X_DEFAULT_STYLE_SHEET in VARCHAR2,
  X_DISPLAY_URL in VARCHAR2,
  X_DISPLAY_RULE_ID in VARCHAR2,
  X_DISPLAY_PROGRAM in VARCHAR2,
  X_ATTRIBUTE_CATEGORY in VARCHAR2,
  X_ATTRIBUTE1 in VARCHAR2,
  X_ATTRIBUTE2 in VARCHAR2,
  X_ATTRIBUTE3 in VARCHAR2,
  X_ATTRIBUTE4 in VARCHAR2,
  X_ATTRIBUTE5 in VARCHAR2,
  X_ATTRIBUTE6 in VARCHAR2,
  X_ATTRIBUTE7 in VARCHAR2,
  X_ATTRIBUTE8 in VARCHAR2,
  X_ATTRIBUTE9 in VARCHAR2,
  X_ATTRIBUTE10 in VARCHAR2,
  X_ATTRIBUTE11 in VARCHAR2,
  X_ATTRIBUTE12 in VARCHAR2,
  X_ATTRIBUTE13 in VARCHAR2,
  X_ATTRIBUTE14 in VARCHAR2,
  X_ATTRIBUTE15 in VARCHAR2,
  X_DISPLAY_TEXT in VARCHAR2 := NULL,
  X_ALTERNATE_TEXT in VARCHAR2 := NULL,
  X_ATTACHMENT_SUB_TYPE in VARCHAR2 := NULL,
  X_DOCUMENT_ID in VARCHAR2 := NULL,
  X_SECURED_FLAG in VARCHAR2 := NULL,
  X_OWNER  in  VARCHAR2,
  X_CUSTOM_MODE VARCHAR2 DEFAULT NULL,
  X_LAST_UPDATE_DATE  VARCHAR2 DEFAULT NULL
) AS
--
l_user_id number := fnd_load_util.owner_id(x_owner);
l_row_id varchar2(2000);
l_ATTACHMENT_ID NUMBER;
L_OBJECT_VERSION_NUMBER NUMBER;
L_APPLICATION_ID NUMBER;
L_ATTACHMENT_USED_BY_ID NUMBER;
L_FILE_ID NUMBER;
L_DISPLAY_WIDTH NUMBER;
L_DISPLAY_HEIGHT NUMBER;
L_DISPLAY_RULE_ID NUMBER;
L_DOCUMENT_ID NUMBER;
f_luby    number;  -- entity owner in file
f_ludate  date;    -- entity update date in file
db_luby   number;  -- entity owner in db
db_ludate date;    -- entity update date in db

BEGIN
    -- if (X_OWNER = 'SEED') then
    --      l_user_id := 1;
    -- end if;
     l_ATTACHMENT_ID := to_number(X_ATTACHMENT_ID);
     L_OBJECT_VERSION_NUMBER := to_number(X_OBJECT_VERSION_NUMBER);
     L_APPLICATION_ID := to_number(X_APPLICATION_ID);
     L_ATTACHMENT_USED_BY_ID := to_number(X_ATTACHMENT_USED_BY_ID);
     L_FILE_ID := to_number(X_FILE_ID);
     L_DISPLAY_WIDTH := to_number(X_DISPLAY_WIDTH);
     L_DISPLAY_HEIGHT := to_number(X_DISPLAY_HEIGHT);
     L_DISPLAY_RULE_ID := to_number(X_DISPLAY_RULE_ID);
     L_DOCUMENT_ID := to_number(X_DOCUMENT_ID);


-- Translate owner to file_last_updated_by
    f_luby := fnd_load_util.owner_id(x_owner);
    -- Translate char last_update_date to date
    f_ludate := to_date(nvl(x_last_update_date,sysdate ), 'YYYY/MM/DD');
--f_ludate :=sysdate;
    -- This select stmnt also checks if
    -- there is a row for this app_id and this app_short_name
    -- Exception is thrown otherwise.

    select LAST_UPDATED_BY, LAST_UPDATE_DATE
      into db_luby, db_ludate
      FROM JTF_AMV_ATTACHMENTS
     where ATTACHMENT_ID = X_ATTACHMENT_ID;

    if (fnd_load_util.upload_test(f_luby, f_ludate, db_luby,
                                  db_ludate, X_CUSTOM_MODE)) then
     UPDATE_ROW (
            X_ATTACHMENT_ID => l_ATTACHMENT_ID,
            X_LAST_UPDATE_DATE => f_ludate,
            X_LAST_UPDATED_BY => f_luby,
            X_LAST_UPDATE_LOGIN => l_user_id,
            X_OBJECT_VERSION_NUMBER => l_OBJECT_VERSION_NUMBER,
            X_OWNER_USER_ID => X_OWNER_USER_ID,
            X_ATTACHMENT_USED_BY_ID => l_ATTACHMENT_USED_BY_ID,
            X_ATTACHMENT_USED_BY => X_ATTACHMENT_USED_BY,
            X_VERSION => X_VERSION,
            X_ENABLED_FLAG => X_ENABLED_FLAG,
            X_CAN_FULFILL_ELECTRONIC_FLAG => X_CAN_FULFILL_ELECTRONIC_FLAG,
            X_FILE_ID => l_FILE_ID,
            X_FILE_NAME => X_FILE_NAME,
            X_FILE_EXTENSION => X_FILE_EXTENSION,
            X_KEYWORDS => X_KEYWORDS,
            X_DISPLAY_WIDTH => l_DISPLAY_WIDTH,
            X_DISPLAY_HEIGHT => l_DISPLAY_HEIGHT,
            X_DISPLAY_LOCATION => X_DISPLAY_LOCATION,
            X_LINK_TO => X_LINK_TO,
            X_LINK_URL => X_LINK_URL,
            X_SEND_FOR_PREVIEW_FLAG => X_SEND_FOR_PREVIEW_FLAG,
            X_ATTACHMENT_TYPE => X_ATTACHMENT_TYPE,
            X_LANGUAGE_CODE => X_LANGUAGE_CODE,
            X_APPLICATION_ID => l_APPLICATION_ID,
            X_DESCRIPTION => X_DESCRIPTION,
            X_DEFAULT_STYLE_SHEET => X_DEFAULT_STYLE_SHEET,
            X_DISPLAY_URL => X_DISPLAY_URL,
            X_DISPLAY_RULE_ID => l_DISPLAY_RULE_ID,
            X_DISPLAY_PROGRAM => X_DISPLAY_PROGRAM,
            X_ATTRIBUTE_CATEGORY => X_ATTRIBUTE_CATEGORY,
            X_ATTRIBUTE1 => X_ATTRIBUTE1,
            X_ATTRIBUTE2 => X_ATTRIBUTE2,
            X_ATTRIBUTE3 => X_ATTRIBUTE3,
            X_ATTRIBUTE4 => X_ATTRIBUTE4,
            X_ATTRIBUTE5 => X_ATTRIBUTE5,
            X_ATTRIBUTE6 => X_ATTRIBUTE6,
            X_ATTRIBUTE7 => X_ATTRIBUTE7,
            X_ATTRIBUTE8 => X_ATTRIBUTE8,
            X_ATTRIBUTE9 => X_ATTRIBUTE9,
            X_ATTRIBUTE10 => X_ATTRIBUTE10,
            X_ATTRIBUTE11 => X_ATTRIBUTE11,
            X_ATTRIBUTE12 => X_ATTRIBUTE12,
            X_ATTRIBUTE13 => X_ATTRIBUTE13,
            X_ATTRIBUTE14 => X_ATTRIBUTE14,
            X_ATTRIBUTE15 => X_ATTRIBUTE15,
            X_DISPLAY_TEXT => X_DISPLAY_TEXT,
            X_ALTERNATE_TEXT => X_ALTERNATE_TEXT,
            X_ATTACHMENT_SUB_TYPE => X_ATTACHMENT_SUB_TYPE,
            X_DOCUMENT_ID => l_DOCUMENT_ID,
            X_SECURED_FLAG => X_SECURED_FLAG
     );
     end if;
exception
     when NO_DATA_FOUND then
         INSERT_ROW (
            X_ROWID => l_row_id,
            X_ATTACHMENT_ID => l_ATTACHMENT_ID,
            X_LAST_UPDATE_DATE => f_ludate,
            X_LAST_UPDATED_BY => f_luby,
            X_CREATION_DATE => f_ludate,
            X_CREATED_BY => f_luby,
            X_LAST_UPDATE_LOGIN => l_user_id,
            X_OBJECT_VERSION_NUMBER => l_OBJECT_VERSION_NUMBER,
            X_OWNER_USER_ID => X_OWNER_USER_ID,
            X_ATTACHMENT_USED_BY_ID => l_ATTACHMENT_USED_BY_ID,
            X_ATTACHMENT_USED_BY => X_ATTACHMENT_USED_BY,
            X_VERSION => X_VERSION,
            X_ENABLED_FLAG => X_ENABLED_FLAG,
            X_CAN_FULFILL_ELECTRONIC_FLAG => X_CAN_FULFILL_ELECTRONIC_FLAG,
            X_FILE_ID => l_FILE_ID,
            X_FILE_NAME => X_FILE_NAME,
            X_FILE_EXTENSION => X_FILE_EXTENSION,
            X_KEYWORDS => X_KEYWORDS,
            X_DISPLAY_WIDTH => l_DISPLAY_WIDTH,
            X_DISPLAY_HEIGHT => l_DISPLAY_HEIGHT,
            X_DISPLAY_LOCATION => X_DISPLAY_LOCATION,
            X_LINK_TO => X_LINK_TO,
            X_LINK_URL => X_LINK_URL,
            X_SEND_FOR_PREVIEW_FLAG => X_SEND_FOR_PREVIEW_FLAG,
            X_ATTACHMENT_TYPE => X_ATTACHMENT_TYPE,
            X_LANGUAGE_CODE => X_LANGUAGE_CODE,
            X_APPLICATION_ID => l_APPLICATION_ID,
            X_DESCRIPTION => X_DESCRIPTION,
            X_DEFAULT_STYLE_SHEET => X_DEFAULT_STYLE_SHEET,
            X_DISPLAY_URL => X_DISPLAY_URL,
            X_DISPLAY_RULE_ID => l_DISPLAY_RULE_ID,
            X_DISPLAY_PROGRAM => X_DISPLAY_PROGRAM,
            X_ATTRIBUTE_CATEGORY => X_ATTRIBUTE_CATEGORY,
            X_ATTRIBUTE1 => X_ATTRIBUTE1,
            X_ATTRIBUTE2 => X_ATTRIBUTE2,
            X_ATTRIBUTE3 => X_ATTRIBUTE3,
            X_ATTRIBUTE4 => X_ATTRIBUTE4,
            X_ATTRIBUTE5 => X_ATTRIBUTE5,
            X_ATTRIBUTE6 => X_ATTRIBUTE6,
            X_ATTRIBUTE7 => X_ATTRIBUTE7,
            X_ATTRIBUTE8 => X_ATTRIBUTE8,
            X_ATTRIBUTE9 => X_ATTRIBUTE9,
            X_ATTRIBUTE10 => X_ATTRIBUTE10,
            X_ATTRIBUTE11 => X_ATTRIBUTE11,
            X_ATTRIBUTE12 => X_ATTRIBUTE12,
            X_ATTRIBUTE13 => X_ATTRIBUTE13,
            X_ATTRIBUTE14 => X_ATTRIBUTE14,
            X_ATTRIBUTE15 => X_ATTRIBUTE15,
            X_DISPLAY_TEXT => X_DISPLAY_TEXT,
            X_ALTERNATE_TEXT => X_ALTERNATE_TEXT,
            X_ATTACHMENT_SUB_TYPE => X_ATTACHMENT_SUB_TYPE,
            X_DOCUMENT_ID => l_DOCUMENT_ID,
            X_SECURED_FLAG => X_SECURED_FLAG
         );
END;
procedure INSERT_ROW (
  X_ROWID in out NOCOPY VARCHAR2,
  X_ATTACHMENT_ID in NUMBER,
  X_LAST_UPDATE_DATE in DATE,
  X_LAST_UPDATED_BY in NUMBER,
  X_CREATION_DATE in DATE,
  X_CREATED_BY in NUMBER,
  X_LAST_UPDATE_LOGIN in NUMBER,
  X_OBJECT_VERSION_NUMBER in NUMBER,
  X_OWNER_USER_ID in NUMBER,
  X_ATTACHMENT_USED_BY_ID in NUMBER,
  X_ATTACHMENT_USED_BY in VARCHAR2,
  X_VERSION in VARCHAR2,
  X_ENABLED_FLAG in VARCHAR2,
  X_CAN_FULFILL_ELECTRONIC_FLAG in VARCHAR2,
  X_FILE_ID in NUMBER,
  X_FILE_NAME in VARCHAR2,
  X_FILE_EXTENSION in VARCHAR2,
  X_KEYWORDS in VARCHAR2,
  X_DISPLAY_WIDTH in NUMBER,
  X_DISPLAY_HEIGHT in NUMBER,
  X_DISPLAY_LOCATION in VARCHAR2,
  X_LINK_TO in VARCHAR2,
  X_LINK_URL in VARCHAR2,
  X_SEND_FOR_PREVIEW_FLAG in VARCHAR2,
  X_ATTACHMENT_TYPE in VARCHAR2,
  X_LANGUAGE_CODE in VARCHAR2,
  X_APPLICATION_ID in NUMBER,
  X_DESCRIPTION in VARCHAR2,
  X_DEFAULT_STYLE_SHEET in VARCHAR2,
  X_DISPLAY_URL in VARCHAR2,
  X_DISPLAY_RULE_ID in NUMBER,
  X_DISPLAY_PROGRAM in VARCHAR2,
  X_ATTRIBUTE_CATEGORY in VARCHAR2,
  X_ATTRIBUTE1 in VARCHAR2,
  X_ATTRIBUTE2 in VARCHAR2,
  X_ATTRIBUTE3 in VARCHAR2,
  X_ATTRIBUTE4 in VARCHAR2,
  X_ATTRIBUTE5 in VARCHAR2,
  X_ATTRIBUTE6 in VARCHAR2,
  X_ATTRIBUTE7 in VARCHAR2,
  X_ATTRIBUTE8 in VARCHAR2,
  X_ATTRIBUTE9 in VARCHAR2,
  X_ATTRIBUTE10 in VARCHAR2,
  X_ATTRIBUTE11 in VARCHAR2,
  X_ATTRIBUTE12 in VARCHAR2,
  X_ATTRIBUTE13 in VARCHAR2,
  X_ATTRIBUTE14 in VARCHAR2,
  X_ATTRIBUTE15 in VARCHAR2,
  X_DISPLAY_TEXT in VARCHAR2 := NULL,
  X_ALTERNATE_TEXT in VARCHAR2 := NULL,
  X_ATTACHMENT_SUB_TYPE in VARCHAR2 := NULL,
  X_DOCUMENT_ID in NUMBER := NULL,
  X_SECURED_FLAG in VARCHAR2 := NULL
) AS
  cursor C is select ROWID from JTF_AMV_ATTACHMENTS
    where attachment_id = x_attachment_id
    ;
begin
   insert into JTF_AMV_ATTACHMENTS
     (
        ATTACHMENT_ID,
        LAST_UPDATE_DATE,
        LAST_UPDATED_BY,
        CREATION_DATE,
        CREATED_BY,
        LAST_UPDATE_LOGIN,
        OBJECT_VERSION_NUMBER,
        OWNER_USER_ID,
        ATTACHMENT_USED_BY_ID,
        ATTACHMENT_USED_BY,
        VERSION,
        ENABLED_FLAG,
        CAN_FULFILL_ELECTRONIC_FLAG,
        FILE_ID,
        FILE_NAME,
        FILE_EXTENSION,
        KEYWORDS,
        DISPLAY_WIDTH,
        DISPLAY_HEIGHT,
        DISPLAY_LOCATION,
        LINK_TO,
        LINK_URL,
        SEND_FOR_PREVIEW_FLAG,
        ATTACHMENT_TYPE,
        LANGUAGE_CODE,
        APPLICATION_ID,
        DESCRIPTION,
        DEFAULT_STYLE_SHEET,
        DISPLAY_URL,
        DISPLAY_RULE_ID,
        DISPLAY_PROGRAM,
        ATTRIBUTE_CATEGORY,
        ATTRIBUTE1,
        ATTRIBUTE2,
        ATTRIBUTE3,
        ATTRIBUTE4,
        ATTRIBUTE5,
        ATTRIBUTE6,
        ATTRIBUTE7,
        ATTRIBUTE8,
        ATTRIBUTE9,
        ATTRIBUTE10,
        ATTRIBUTE11,
        ATTRIBUTE12,
        ATTRIBUTE13,
        ATTRIBUTE14,
        ATTRIBUTE15,
        DISPLAY_TEXT,
	   ALTERNATE_TEXT,
	   ATTACHMENT_SUB_TYPE,
    DOCUMENT_ID,
    SECURED_FLAG
    ) VALUES (
        X_ATTACHMENT_ID,
        X_LAST_UPDATE_DATE,
        X_LAST_UPDATED_BY,
        X_CREATION_DATE,
        X_CREATED_BY,
        X_LAST_UPDATE_LOGIN,
        X_OBJECT_VERSION_NUMBER,
        X_OWNER_USER_ID,
        X_ATTACHMENT_USED_BY_ID,
        X_ATTACHMENT_USED_BY,
        X_VERSION,
        X_ENABLED_FLAG,
        X_CAN_FULFILL_ELECTRONIC_FLAG,
        X_FILE_ID,
        X_FILE_NAME,
        X_FILE_EXTENSION,
        X_KEYWORDS,
        X_DISPLAY_WIDTH,
        X_DISPLAY_HEIGHT,
        X_DISPLAY_LOCATION,
        X_LINK_TO,
        X_LINK_URL,
        X_SEND_FOR_PREVIEW_FLAG,
        X_ATTACHMENT_TYPE,
        X_LANGUAGE_CODE,
        X_APPLICATION_ID,
        X_DESCRIPTION,
        X_DEFAULT_STYLE_SHEET,
        X_DISPLAY_URL,
        X_DISPLAY_RULE_ID,
        X_DISPLAY_PROGRAM,
        X_ATTRIBUTE_CATEGORY,
        X_ATTRIBUTE1,
        X_ATTRIBUTE2,
        X_ATTRIBUTE3,
        X_ATTRIBUTE4,
        X_ATTRIBUTE5,
        X_ATTRIBUTE6,
        X_ATTRIBUTE7,
        X_ATTRIBUTE8,
        X_ATTRIBUTE9,
        X_ATTRIBUTE10,
        X_ATTRIBUTE11,
        X_ATTRIBUTE12,
        X_ATTRIBUTE13,
        X_ATTRIBUTE14,
        X_ATTRIBUTE15,
	   X_DISPLAY_TEXT,
	   X_ALTERNATE_TEXT,
	   X_ATTACHMENT_SUB_TYPE,
    X_DOCUMENT_ID,
    X_SECURED_FLAG
    );
  open c;
  fetch c into X_ROWID;
  if (c%notfound) then
    close c;
    raise no_data_found;
  end if;
  close c;

END;
procedure UPDATE_ROW (
  X_ATTACHMENT_ID in NUMBER,
  X_LAST_UPDATE_DATE in DATE,
  X_LAST_UPDATED_BY in NUMBER,
  X_LAST_UPDATE_LOGIN in NUMBER,
  X_OBJECT_VERSION_NUMBER in NUMBER,
  X_OWNER_USER_ID in NUMBER,
  X_ATTACHMENT_USED_BY_ID in NUMBER,
  X_ATTACHMENT_USED_BY in VARCHAR2,
  X_VERSION in VARCHAR2,
  X_ENABLED_FLAG in VARCHAR2,
  X_CAN_FULFILL_ELECTRONIC_FLAG in VARCHAR2,
  X_FILE_ID in NUMBER,
  X_FILE_NAME in VARCHAR2,
  X_FILE_EXTENSION in VARCHAR2,
  X_KEYWORDS in VARCHAR2,
  X_DISPLAY_WIDTH in NUMBER,
  X_DISPLAY_HEIGHT in NUMBER,
  X_DISPLAY_LOCATION in VARCHAR2,
  X_LINK_TO in VARCHAR2,
  X_LINK_URL in VARCHAR2,
  X_SEND_FOR_PREVIEW_FLAG in VARCHAR2,
  X_ATTACHMENT_TYPE in VARCHAR2,
  X_LANGUAGE_CODE in VARCHAR2,
  X_APPLICATION_ID in NUMBER,
  X_DESCRIPTION in VARCHAR2,
  X_DEFAULT_STYLE_SHEET in VARCHAR2,
  X_DISPLAY_URL in VARCHAR2,
  X_DISPLAY_RULE_ID in NUMBER,
  X_DISPLAY_PROGRAM in VARCHAR2,
  X_ATTRIBUTE_CATEGORY in VARCHAR2,
  X_ATTRIBUTE1 in VARCHAR2,
  X_ATTRIBUTE2 in VARCHAR2,
  X_ATTRIBUTE3 in VARCHAR2,
  X_ATTRIBUTE4 in VARCHAR2,
  X_ATTRIBUTE5 in VARCHAR2,
  X_ATTRIBUTE6 in VARCHAR2,
  X_ATTRIBUTE7 in VARCHAR2,
  X_ATTRIBUTE8 in VARCHAR2,
  X_ATTRIBUTE9 in VARCHAR2,
  X_ATTRIBUTE10 in VARCHAR2,
  X_ATTRIBUTE11 in VARCHAR2,
  X_ATTRIBUTE12 in VARCHAR2,
  X_ATTRIBUTE13 in VARCHAR2,
  X_ATTRIBUTE14 in VARCHAR2,
  X_ATTRIBUTE15 in VARCHAR2,
  X_DISPLAY_TEXT in VARCHAR2 := NULL,
  X_ALTERNATE_TEXT in VARCHAR2 := NULL,
  X_ATTACHMENT_SUB_TYPE in VARCHAR2 := NULL,
  X_DOCUMENT_ID in NUMBER := NULL,
  X_SECURED_FLAG in VARCHAR2 := NULL
) AS
BEGIN
   Update JTF_AMV_ATTACHMENTS SET
        LAST_UPDATE_DATE = X_LAST_UPDATE_DATE,
        LAST_UPDATED_BY = X_LAST_UPDATED_BY,
        LAST_UPDATE_LOGIN = X_LAST_UPDATE_LOGIN,
        OBJECT_VERSION_NUMBER = X_OBJECT_VERSION_NUMBER,
        OWNER_USER_ID = X_OWNER_USER_ID,
        ATTACHMENT_USED_BY_ID = X_ATTACHMENT_USED_BY_ID,
        ATTACHMENT_USED_BY = X_ATTACHMENT_USED_BY,
        VERSION = X_VERSION,
        ENABLED_FLAG = X_ENABLED_FLAG,
        CAN_FULFILL_ELECTRONIC_FLAG = X_CAN_FULFILL_ELECTRONIC_FLAG,
--        FILE_ID = X_FILE_ID,
        FILE_NAME = X_FILE_NAME,
        FILE_EXTENSION = X_FILE_EXTENSION,
        KEYWORDS = X_KEYWORDS,
        DISPLAY_WIDTH = X_DISPLAY_WIDTH,
        DISPLAY_HEIGHT = X_DISPLAY_HEIGHT,
        DISPLAY_LOCATION = X_DISPLAY_LOCATION,
        LINK_TO = X_LINK_TO,
        LINK_URL = X_LINK_URL,
        SEND_FOR_PREVIEW_FLAG = X_SEND_FOR_PREVIEW_FLAG,
        ATTACHMENT_TYPE = X_ATTACHMENT_TYPE,
        LANGUAGE_CODE = X_LANGUAGE_CODE,
        APPLICATION_ID = X_APPLICATION_ID,
        DESCRIPTION = X_DESCRIPTION,
        DEFAULT_STYLE_SHEET = X_DEFAULT_STYLE_SHEET,
        DISPLAY_URL = X_DISPLAY_URL,
        DISPLAY_RULE_ID = X_DISPLAY_RULE_ID,
        DISPLAY_PROGRAM = X_DISPLAY_PROGRAM,
        ATTRIBUTE_CATEGORY = X_ATTRIBUTE_CATEGORY,
        ATTRIBUTE1 = X_ATTRIBUTE1,
        ATTRIBUTE2 = X_ATTRIBUTE2,
        ATTRIBUTE3 = X_ATTRIBUTE3,
        ATTRIBUTE4 = X_ATTRIBUTE4,
        ATTRIBUTE5 = X_ATTRIBUTE5,
        ATTRIBUTE6 = X_ATTRIBUTE6,
        ATTRIBUTE7 = X_ATTRIBUTE7,
        ATTRIBUTE8 = X_ATTRIBUTE8,
        ATTRIBUTE9 = X_ATTRIBUTE9,
        ATTRIBUTE10 = X_ATTRIBUTE10,
        ATTRIBUTE11 = X_ATTRIBUTE11,
        ATTRIBUTE12 = X_ATTRIBUTE12,
        ATTRIBUTE13 = X_ATTRIBUTE13,
        ATTRIBUTE14 = X_ATTRIBUTE14,
        ATTRIBUTE15 = X_ATTRIBUTE15,
	   DISPLAY_TEXT = X_DISPLAY_TEXT,
	   ALTERNATE_TEXT = X_ALTERNATE_TEXT,
	   ATTACHMENT_SUB_TYPE = X_ATTACHMENT_SUB_TYPE,
    DOCUMENT_ID = X_DOCUMENT_ID,
    SECURED_FLAG = X_SECURED_FLAG
    where ATTACHMENT_ID = X_ATTACHMENT_ID;

  if (sql%notfound) then
    raise no_data_found;
  end if;
END;

procedure LOAD_SEED_ROW(
x_upload_mode in varchar2,
x_attachment_id in varchar2,
x_object_version_number in varchar2,
x_owner_user_id in varchar2,
x_attachment_used_by_id in varchar2,
x_attachment_used_by in varchar2,
x_version in varchar2,
x_enabled_flag in varchar2,
x_can_fulfill_electronic_flag in varchar2,
x_file_id in varchar2,
x_file_name in varchar2,
x_file_extension in varchar2,
x_keywords in varchar2,
x_display_width in varchar2,
x_display_height in varchar2,
x_display_location in varchar2,
x_link_to in varchar2,
x_link_url in varchar2,
x_send_for_preview_flag in varchar2,
x_attachment_type in varchar2,
x_language_code in varchar2,
x_application_id in varchar2,
x_description in varchar2,
x_default_style_sheet in varchar2,
x_display_url in varchar2,
x_display_rule_id in varchar2,
x_display_program in varchar2,
x_attribute_category in varchar2,
x_attribute1 in varchar2,
x_attribute2 in varchar2,
x_attribute3 in varchar2,
x_attribute4 in varchar2,
x_attribute5 in varchar2,
x_attribute6 in varchar2,
x_attribute7 in varchar2,
x_attribute8 in varchar2,
x_attribute9 in varchar2,
x_attribute10 in varchar2,
x_attribute11 in varchar2,
x_attribute12 in varchar2,
x_attribute13 in varchar2,
x_attribute14 in varchar2,
x_attribute15 in varchar2,
x_display_text in varchar2,
x_alternate_text in varchar2,
x_attachment_sub_type in varchar2,
x_document_id in varchar2,
x_secured_flag in varchar2,
x_owner in varchar2,
x_custom_mode in varchar2,
x_last_update_date in varchar2)
is
         v_db_owner_id number;
     begin
     if (x_upload_mode = 'NLS') then
        null;
     else


         JTF_AMV_ATTCHS_PKG.LOAD_ROW (
            X_ATTACHMENT_ID =>         x_attachment_id,
            X_OBJECT_VERSION_NUMBER => x_object_version_number,
            X_OWNER_USER_ID =>         x_owner_user_id,
            X_ATTACHMENT_USED_BY_ID => x_attachment_used_by_id,
            X_ATTACHMENT_USED_BY =>    x_attachment_used_by,
            X_VERSION =>               x_version,
            X_ENABLED_FLAG =>          x_enabled_flag,
            X_CAN_FULFILL_ELECTRONIC_FLAG => x_can_fulfill_electronic_flag,
            X_FILE_ID =>         x_file_id,
            X_FILE_NAME =>       x_file_name,
            X_FILE_EXTENSION =>  x_file_extension,
            X_KEYWORDS =>        x_keywords,
            X_DISPLAY_WIDTH =>   x_display_width,
            X_DISPLAY_HEIGHT =>  x_display_height,
            X_DISPLAY_LOCATION =>x_display_location,
            X_LINK_TO =>         x_link_to,
            X_LINK_URL =>        x_link_url,
            X_SEND_FOR_PREVIEW_FLAG => x_send_for_preview_flag,
            X_ATTACHMENT_TYPE =>       x_attachment_type,
            X_LANGUAGE_CODE =>         x_language_code,
            X_APPLICATION_ID =>        x_application_id,
            X_DESCRIPTION =>           x_description,
            X_DEFAULT_STYLE_SHEET =>   x_default_style_sheet,
            X_DISPLAY_URL =>           x_display_url,
            X_DISPLAY_RULE_ID =>       x_display_rule_id,
            X_DISPLAY_PROGRAM =>       x_display_program,
            X_ATTRIBUTE_CATEGORY =>    x_attribute_category,
            X_ATTRIBUTE1 => x_attribute1,
            X_ATTRIBUTE2 => x_attribute2,
            X_ATTRIBUTE3 => x_attribute3,
            X_ATTRIBUTE4 => x_attribute4,
            X_ATTRIBUTE5 => x_attribute5,
            X_ATTRIBUTE6 => x_attribute6,
            X_ATTRIBUTE7 => x_attribute7,
            X_ATTRIBUTE8 => x_attribute8,
            X_ATTRIBUTE9 => x_attribute9,
            X_ATTRIBUTE10 => x_attribute10,
            X_ATTRIBUTE11 => x_attribute11,
            X_ATTRIBUTE12 => x_attribute12,
            X_ATTRIBUTE13 => x_attribute13,
            X_ATTRIBUTE14 => x_attribute14,
            X_ATTRIBUTE15 => x_attribute15,
            X_DISPLAY_TEXT =>        x_display_text,
            X_ALTERNATE_TEXT =>      x_alternate_text,
            X_ATTACHMENT_SUB_TYPE => x_attachment_sub_type,
            X_DOCUMENT_ID =>         x_document_id,
            X_SECURED_FLAG =>        x_secured_flag,
            X_Owner   =>             x_owner,
	    x_custom_mode => x_custom_mode,
	    x_last_update_date=> x_last_update_date
           );


     end if;


      exception
        when no_data_found then
         JTF_AMV_ATTCHS_PKG.LOAD_ROW (
            X_ATTACHMENT_ID =>         x_attachment_id,
            X_OBJECT_VERSION_NUMBER => x_object_version_number,
            X_OWNER_USER_ID =>         x_owner_user_id,
            X_ATTACHMENT_USED_BY_ID => x_attachment_used_by_id,
            X_ATTACHMENT_USED_BY =>    x_attachment_used_by,
            X_VERSION =>               x_version,
            X_ENABLED_FLAG =>          x_enabled_flag,
            X_CAN_FULFILL_ELECTRONIC_FLAG => x_can_fulfill_electronic_flag,
            X_FILE_ID =>        x_file_id,
            X_FILE_NAME =>      x_file_name,
            X_FILE_EXTENSION => x_file_extension,
            X_KEYWORDS =>       x_keywords,
            X_DISPLAY_WIDTH =>  x_display_width,
            X_DISPLAY_HEIGHT => x_display_height,
            X_DISPLAY_LOCATION => x_display_location,
            X_LINK_TO =>          x_link_to,
            X_LINK_URL =>         x_link_url,
            X_SEND_FOR_PREVIEW_FLAG => x_send_for_preview_flag,
            X_ATTACHMENT_TYPE =>       x_attachment_type,
            X_LANGUAGE_CODE =>   x_language_code,
            X_APPLICATION_ID =>  x_application_id,
            X_DESCRIPTION =>     x_description,
            X_DEFAULT_STYLE_SHEET => x_default_style_sheet,
            X_DISPLAY_URL =>         x_display_url,
            X_DISPLAY_RULE_ID =>     x_display_rule_id,
            X_DISPLAY_PROGRAM =>     x_display_program,
            X_ATTRIBUTE_CATEGORY =>  x_attribute_category,
            X_ATTRIBUTE1 => x_attribute1,
            X_ATTRIBUTE2 => x_attribute2,
            X_ATTRIBUTE3 => x_attribute3,
            X_ATTRIBUTE4 => x_attribute4,
            X_ATTRIBUTE5 => x_attribute5,
            X_ATTRIBUTE6 => x_attribute6,
            X_ATTRIBUTE7 => x_attribute7,
            X_ATTRIBUTE8 => x_attribute8,
            X_ATTRIBUTE9 => x_attribute9,
            X_ATTRIBUTE10 => x_attribute10,
            X_ATTRIBUTE11 => x_attribute11,
            X_ATTRIBUTE12 => x_attribute12,
            X_ATTRIBUTE13 => x_attribute13,
            X_ATTRIBUTE14 => x_attribute14,
            X_ATTRIBUTE15 => x_attribute15,
            X_DISPLAY_TEXT =>   x_display_text,
            X_ALTERNATE_TEXT => x_alternate_text,
            X_ATTACHMENT_SUB_TYPE => x_attachment_sub_type,
            X_DOCUMENT_ID => x_document_id,
            X_SECURED_FLAG => x_secured_flag,
            X_Owner   => x_owner,
	     x_custom_mode =>x_custom_mode,
	    x_last_update_date=>x_last_update_date
      );
 END LOAD_SEED_ROW;

end JTF_AMV_ATTCHS_PKG;

/
