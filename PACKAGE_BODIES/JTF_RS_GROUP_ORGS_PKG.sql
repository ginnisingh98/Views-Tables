--------------------------------------------------------
--  DDL for Package Body JTF_RS_GROUP_ORGS_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."JTF_RS_GROUP_ORGS_PKG" AS
/* $Header: jtfrshob.pls 120.0 2005/05/11 08:20:08 appldev noship $ */

PROCEDURE INSERT_ROW (
  X_ROWID IN OUT NOCOPY VARCHAR2,
  X_GROUP_ID IN NUMBER,
  X_ORGANIZATION_ID IN NUMBER,
  X_CREATION_DATE IN DATE,
  X_CREATED_BY IN NUMBER,
  X_LAST_UPDATE_DATE IN DATE,
  X_LAST_UPDATED_BY IN NUMBER,
  X_LAST_UPDATE_LOGIN IN NUMBER,
  X_ATTRIBUTE1 IN VARCHAR2,
  X_ATTRIBUTE2 IN VARCHAR2,
  X_ATTRIBUTE3 IN VARCHAR2,
  X_ATTRIBUTE4 IN VARCHAR2,
  X_ATTRIBUTE5 IN VARCHAR2,
  X_ATTRIBUTE6 IN VARCHAR2,
  X_ATTRIBUTE7 IN VARCHAR2,
  X_ATTRIBUTE8 IN VARCHAR2,
  X_ATTRIBUTE9 IN VARCHAR2,
  X_ATTRIBUTE10 IN VARCHAR2,
  X_ATTRIBUTE11 IN VARCHAR2,
  X_ATTRIBUTE12 IN VARCHAR2,
  X_ATTRIBUTE13 IN VARCHAR2,
  X_ATTRIBUTE14 IN VARCHAR2,
  X_ATTRIBUTE15 IN VARCHAR2,
  X_ATTRIBUTE_CATEGORY IN VARCHAR2
) IS
  CURSOR C IS
    SELECT ROWID
	FROM   jtf_rs_group_organizations
    WHERE  ORGANIZATION_ID = X_ORGANIZATION_ID
    AND    GROUP_ID = X_GROUP_ID
    ;
BEGIN
  INSERT INTO jtf_rs_group_organizations (
    GROUP_ID,
    ORGANIZATION_ID,
    OBJECT_VERSION_NUMBER,
    CREATION_DATE,
    CREATED_BY,
    LAST_UPDATE_DATE,
    LAST_UPDATED_BY,
    LAST_UPDATE_LOGIN,
    ATTRIBUTE1,
    ATTRIBUTE2,
    ATTRIBUTE3,
    ATTRIBUTE4,
    ATTRIBUTE5,
    ATTRIBUTE6,
    ATTRIBUTE7,
    ATTRIBUTE8,
    ATTRIBUTE9,
    ATTRIBUTE10,
    ATTRIBUTE11,
    ATTRIBUTE12,
    ATTRIBUTE13,
    ATTRIBUTE14,
    ATTRIBUTE15,
    ATTRIBUTE_CATEGORY
    ) VALUES (
    X_GROUP_ID,
    X_ORGANIZATION_ID,
    1,
    X_CREATION_DATE,
    X_CREATED_BY,
    X_LAST_UPDATE_DATE,
    X_LAST_UPDATED_BY,
    X_LAST_UPDATE_LOGIN,
    X_ATTRIBUTE1,
    X_ATTRIBUTE2,
    X_ATTRIBUTE3,
    X_ATTRIBUTE4,
    X_ATTRIBUTE5,
    X_ATTRIBUTE6,
    X_ATTRIBUTE7,
    X_ATTRIBUTE8,
    X_ATTRIBUTE9,
    X_ATTRIBUTE10,
    X_ATTRIBUTE11,
    X_ATTRIBUTE12,
    X_ATTRIBUTE13,
    X_ATTRIBUTE14,
    X_ATTRIBUTE15,
    X_ATTRIBUTE_CATEGORY
  );

  OPEN c;
  FETCH c INTO X_ROWID;
    IF (c%NOTFOUND) THEN
      CLOSE c;
      RAISE no_data_found;
    END IF;
  CLOSE c;

END INSERT_ROW;

PROCEDURE LOCK_ROW (
  X_GROUP_ID IN NUMBER,
  X_ORGANIZATION_ID IN NUMBER,
  X_OBJECT_VERSION_NUMBER IN NUMBER
) IS
  CURSOR c1 IS
    SELECT OBJECT_VERSION_NUMBER
    FROM   jtf_rs_group_organizations
    WHERE  GROUP_ID = X_GROUP_ID
    AND    ORGANIZATION_ID = X_ORGANIZATION_ID
    FOR UPDATE OF GROUP_ID NOWAIT;
    tlinfo c1%ROWTYPE ;

BEGIN
    OPEN c1;
    FETCH c1 INTO tlinfo;
      IF (c1%NOTFOUND) THEN
         CLOSE c1;
           fnd_message.set_name('FND', 'FORM_RECORD_DELETED');
           app_exception.raise_exception;
      END IF;
    CLOSE c1;

  IF (tlinfo.OBJECT_VERSION_NUMBER = X_OBJECT_VERSION_NUMBER)
  THEN
    NULL;
  ELSE
    fnd_message.set_name('FND', 'FORM_RECORD_CHANGED');
    app_exception.raise_exception;
  END IF;

END LOCK_ROW;

PROCEDURE UPDATE_ROW (
  X_GROUP_ID IN NUMBER,
  X_ORGANIZATION_ID IN NUMBER,
  X_OBJECT_VERSION_NUMBER IN NUMBER,
  X_LAST_UPDATE_DATE IN DATE,
  X_LAST_UPDATED_BY IN NUMBER,
  X_LAST_UPDATE_LOGIN IN NUMBER,
  X_ATTRIBUTE1 IN VARCHAR2,
  X_ATTRIBUTE2 IN VARCHAR2,
  X_ATTRIBUTE3 IN VARCHAR2,
  X_ATTRIBUTE4 IN VARCHAR2,
  X_ATTRIBUTE5 IN VARCHAR2,
  X_ATTRIBUTE6 IN VARCHAR2,
  X_ATTRIBUTE7 IN VARCHAR2,
  X_ATTRIBUTE8 IN VARCHAR2,
  X_ATTRIBUTE9 IN VARCHAR2,
  X_ATTRIBUTE10 IN VARCHAR2,
  X_ATTRIBUTE11 IN VARCHAR2,
  X_ATTRIBUTE12 IN VARCHAR2,
  X_ATTRIBUTE13 IN VARCHAR2,
  X_ATTRIBUTE14 IN VARCHAR2,
  X_ATTRIBUTE15 IN VARCHAR2,
  X_ATTRIBUTE_CATEGORY IN VARCHAR2
  ) IS
BEGIN
  UPDATE jtf_rs_group_organizations SET
    GROUP_ID = X_GROUP_ID,
    ORGANIZATION_ID = X_ORGANIZATION_ID,
    OBJECT_VERSION_NUMBER = X_OBJECT_VERSION_NUMBER,
    LAST_UPDATE_DATE = X_LAST_UPDATE_DATE,
    LAST_UPDATED_BY = X_LAST_UPDATED_BY,
    LAST_UPDATE_LOGIN = X_LAST_UPDATE_LOGIN,
    ATTRIBUTE1 = X_ATTRIBUTE1,
    ATTRIBUTE2 = X_ATTRIBUTE2,
    ATTRIBUTE3 = X_ATTRIBUTE3,
    ATTRIBUTE4 = X_ATTRIBUTE4,
    ATTRIBUTE5 = X_ATTRIBUTE5,
    ATTRIBUTE6 = X_ATTRIBUTE6,
    ATTRIBUTE7 = X_ATTRIBUTE7,
    ATTRIBUTE8 = X_ATTRIBUTE8,
    ATTRIBUTE9 = X_ATTRIBUTE9,
    ATTRIBUTE10 = X_ATTRIBUTE10,
    ATTRIBUTE11 = X_ATTRIBUTE11,
    ATTRIBUTE12 = X_ATTRIBUTE12,
    ATTRIBUTE13 = X_ATTRIBUTE13,
    ATTRIBUTE14 = X_ATTRIBUTE14,
    ATTRIBUTE15 = X_ATTRIBUTE15,
    ATTRIBUTE_CATEGORY = X_ATTRIBUTE_CATEGORY
    WHERE  GROUP_ID = X_GROUP_ID
    AND    ORGANIZATION_ID = X_ORGANIZATION_ID
    ;

  IF (SQL%NOTFOUND) THEN
    RAISE no_data_found;
  END IF;
END UPDATE_ROW;

PROCEDURE DELETE_ROW (
  X_GROUP_ID IN NUMBER,
  X_ORGANIZATION_ID IN NUMBER
) IS
BEGIN
  DELETE FROM jtf_rs_group_organizations
  WHERE  GROUP_ID = X_GROUP_ID
  AND    ORGANIZATION_ID = X_ORGANIZATION_ID
  ;

  IF (SQL%NOTFOUND) THEN
    RAISE NO_DATA_FOUND;
  END IF;
END DELETE_ROW;

END JTF_RS_GROUP_ORGS_PKG;

/
