--------------------------------------------------------
--  DDL for Package Body PER_PROPOSAL_TEMPLATES_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."PER_PROPOSAL_TEMPLATES_PKG" as
/* $Header: hruptlct.pkb 115.2 1999/11/09 15:05:20 pkm ship $ */
procedure OWNER_TO_WHO (
  X_OWNER in VARCHAR2,
  X_CREATION_DATE out DATE,
  X_CREATED_BY out NUMBER,
  X_LAST_UPDATE_DATE out DATE,
  X_LAST_UPDATED_BY out NUMBER,
  X_LAST_UPDATE_LOGIN out NUMBER
) is
begin
  if X_OWNER = 'SEED' then
    X_CREATED_BY := 1;
    X_LAST_UPDATED_BY := 1;
  else
    X_CREATED_BY := 0;
    X_LAST_UPDATED_BY := 0;
  end if;
  X_CREATION_DATE := sysdate;
  X_LAST_UPDATE_DATE := sysdate;
  X_LAST_UPDATE_LOGIN := 0;
end OWNER_TO_WHO;
--
procedure INSERT_ROW (
  X_PROPOSAL_TEMPLATE_ID in NUMBER,
  X_PROPOSAL_NAME in VARCHAR2,
  X_DESCRIPTION   in VARCHAR2,
  X_TYPE          in VARCHAR2,
  X_CREATION_DATE in DATE,
  X_CREATED_BY in VARCHAR2,
  X_LAST_UPDATE_DATE in DATE,
  X_LAST_UPDATED_BY in VARCHAR2,
  X_LAST_UPDATE_LOGIN in NUMBER
) is
begin
  insert into PER_PROPOSAL_TEMPLATES (
    PROPOSAL_TEMPLATE_ID,
    PROPOSAL_NAME,
    DESCRIPTION,
    TYPE,
    CREATION_DATE,
    CREATED_BY,
    LAST_UPDATE_DATE,
    LAST_UPDATED_BY,
    LAST_UPDATE_LOGIN
  ) values (
    X_PROPOSAL_TEMPLATE_ID,
    X_PROPOSAL_NAME,
    X_DESCRIPTION,
    X_TYPE,
    X_CREATION_DATE,
    X_CREATED_BY,
    X_LAST_UPDATE_DATE,
    X_LAST_UPDATED_BY,
    X_LAST_UPDATE_LOGIN
  );
end INSERT_ROW;
--
procedure LOCK_ROW (
  X_PROPOSAL_TEMPLATE_ID in NUMBER
) is
  cursor CSR_PROPOSAL_NAME (
    X_PROPOSAL_TEMPLATE_ID in NUMBER
  ) is
    select PROPOSAL_NAME
    from   PER_PROPOSAL_TEMPLATES
    where  PROPOSAL_TEMPLATE_ID = X_PROPOSAL_TEMPLATE_ID
    for update of PROPOSAL_NAME nowait;
  RECINFO CSR_PROPOSAL_NAME%rowtype;
begin
  open CSR_PROPOSAL_NAME(X_PROPOSAL_TEMPLATE_ID);
  fetch CSR_PROPOSAL_NAME into RECINFO;
  if (CSR_PROPOSAL_NAME%notfound) then
    close CSR_PROPOSAL_NAME;
    fnd_message.set_name('FND','FORM_RECORD_DELETED');
    app_exception.raise_exception;
  end if;
  close CSR_PROPOSAL_NAME;
end LOCK_ROW;
--
procedure UPDATE_ROW (
  X_PROPOSAL_TEMPLATE_ID in NUMBER,
  X_PROPOSAL_NAME in VARCHAR2,
  X_DESCRIPTION   in VARCHAR2,
  X_TYPE          in VARCHAR2,
  X_LAST_UPDATE_DATE in DATE,
  X_LAST_UPDATED_BY in VARCHAR2,
  X_LAST_UPDATE_LOGIN in NUMBER
) is
begin
  update PER_PROPOSAL_TEMPLATES set
    PROPOSAL_NAME = X_PROPOSAL_NAME,
    DESCRIPTION = X_DESCRIPTION,
    TYPE = X_TYPE,
    LAST_UPDATE_DATE = X_LAST_UPDATE_DATE,
    LAST_UPDATED_BY = X_LAST_UPDATED_BY,
    LAST_UPDATE_LOGIN = X_LAST_UPDATE_LOGIN
  where PROPOSAL_TEMPLATE_ID = X_PROPOSAL_TEMPLATE_ID;
  if (sql%notfound) then
    raise no_data_found;
  end if;
end UPDATE_ROW;
--
procedure DELETE_ROW (
  X_PROPOSAL_TEMPLATE_ID in NUMBER
) is
begin
  delete from PER_PROPOSAL_TEMPLATES
  where PROPOSAL_TEMPLATE_ID = X_PROPOSAL_TEMPLATE_ID;
  if (sql%notfound) then
    raise no_data_found;
  end if;
end DELETE_ROW;
--
procedure LOAD_ROW (
  X_PROPOSAL_TEMPLATE_ID in NUMBER,
  X_PROPOSAL_NAME in VARCHAR2,
  X_DESCRIPTION   in VARCHAR2,
  X_TYPE          in VARCHAR2,
  X_OWNER in VARCHAR2
) is
  X_CREATION_DATE DATE;
  X_CREATED_BY NUMBER;
  X_LAST_UPDATE_DATE DATE;
  X_LAST_UPDATED_BY NUMBER;
  X_LAST_UPDATE_LOGIN NUMBER;
begin
  OWNER_TO_WHO (
    X_OWNER,
    X_CREATION_DATE,
    X_CREATED_BY,
    X_LAST_UPDATE_DATE,
    X_LAST_UPDATED_BY,
    X_LAST_UPDATE_LOGIN
  );
  begin
    UPDATE_ROW (
	 X_PROPOSAL_TEMPLATE_ID,
      X_PROPOSAL_NAME,
      X_DESCRIPTION,
      X_TYPE,
      X_LAST_UPDATE_DATE,
      X_LAST_UPDATED_BY,
      X_LAST_UPDATE_LOGIN
    );
  exception
    when no_data_found then
      INSERT_ROW (
	   X_PROPOSAL_TEMPLATE_ID,
	   X_PROPOSAL_NAME,
        X_DESCRIPTION,
        X_TYPE,
        X_CREATION_DATE,
        X_CREATED_BY,
        X_LAST_UPDATE_DATE,
        X_LAST_UPDATED_BY,
        X_LAST_UPDATE_LOGIN
      );
  end;
end LOAD_ROW;
--
procedure TRANSLATE_ROW (
  X_PROPOSAL_TEMPLATE_ID in NUMBER,
  X_PROPOSAL_NAME in VARCHAR2,
  X_DESCRIPTION   in VARCHAR2,
  X_OWNER in VARCHAR2
) is
  X_CREATION_DATE DATE;
  X_CREATED_BY NUMBER;
  X_LAST_UPDATE_DATE DATE;
  X_LAST_UPDATED_BY NUMBER;
  X_LAST_UPDATE_LOGIN NUMBER;
begin
  OWNER_TO_WHO (
    X_OWNER,
    X_CREATION_DATE,
    X_CREATED_BY,
    X_LAST_UPDATE_DATE,
    X_LAST_UPDATED_BY,
    X_LAST_UPDATE_LOGIN
  );
  update PER_PROPOSAL_TEMPLATES
  set PROPOSAL_NAME = X_PROPOSAL_NAME,
      DESCRIPTION = X_DESCRIPTION,
      LAST_UPDATE_DATE = X_LAST_UPDATE_DATE,
      LAST_UPDATED_BY = X_LAST_UPDATED_BY,
      LAST_UPDATE_LOGIN = X_LAST_UPDATE_LOGIN
  where PROPOSAL_TEMPLATE_ID = X_PROPOSAL_TEMPLATE_ID
  and userenv('LANG') =   (Select language_code
  from FND_LANGUAGES where installed_flag = 'B');
end TRANSLATE_ROW;
--
end PER_PROPOSAL_TEMPLATES_PKG;

/
