--------------------------------------------------------
--  DDL for Package Body BEN_ICD_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."BEN_ICD_PKG" AS
/* $Header: beicd.pkb 120.0.12010000.2 2009/06/16 13:46:55 vkodedal ship $ */
g_package  varchar2(30) :='BEN_ICD_PKG';

procedure CREATE_TRANSACTION
	(
	 P_ICD_TRANSACTION_ID             IN NUMBER
	,P_ICD_CHC_RATE_ID                IN NUMBER
	,P_BUSINESS_GROUP_ID              IN NUMBER
	,P_PERSON_ID                      IN NUMBER
	,P_ASSIGNMENT_ID                  IN NUMBER
	,P_TRANSACTION_ID                 IN NUMBER
	,P_TRANSACTION_STEP_ID            IN NUMBER
	,P_EFFECTIVE_START_DATE           IN DATE
	,P_EFFECTIVE_END_DATE             IN DATE
	,P_DML_OPERATION                  IN VARCHAR
	,P_DATETRACK_MODE                 IN VARCHAR
	,P_EFFECTIVE_DATE                 IN DATE
	,P_PL_TYP_ID                      IN NUMBER
	,P_PL_ID                          IN NUMBER
	,P_OPT_ID                         IN NUMBER
	,P_OIPL_ID                        IN NUMBER
	,P_ACTY_BASE_RT_ID                IN NUMBER
	,P_RT_STRT_DT_CD                  IN VARCHAR
	,P_RT_STRT_DT                     IN DATE
	,P_RT_STRT_DT_RL                  IN NUMBER
	,P_RT_END_DT_CD                   IN VARCHAR
	,P_RT_END_DT                      IN DATE
	,P_RT_END_DT_RL                   IN NUMBER
	,P_NNMNTRY_UOM                    IN VARCHAR
	,P_BNF_RQD_FLAG                   IN VARCHAR
	,P_ELEMENT_TYPE_ID                IN NUMBER
	,P_ELEMENT_LINK_ID                IN NUMBER
	,P_ELEMENT_ENTRY_ID               IN NUMBER
	,P_ELEMENT_TYPE_CONTEXT           IN VARCHAR
	,P_INPUT_VALUE_ID1                IN NUMBER
	,P_INPUT_VALUE1                   IN VARCHAR
	,P_INPUT_VALUE_ID2                IN NUMBER
	,P_INPUT_VALUE2                   IN VARCHAR
	,P_INPUT_VALUE_ID3                IN NUMBER
	,P_INPUT_VALUE3                   IN VARCHAR
	,P_INPUT_VALUE_ID4                IN NUMBER
	,P_INPUT_VALUE4                   IN VARCHAR
	,P_INPUT_VALUE_ID5                IN NUMBER
	,P_INPUT_VALUE5                   IN VARCHAR
	,P_INPUT_VALUE_ID6                IN NUMBER
	,P_INPUT_VALUE6                   IN VARCHAR
	,P_INPUT_VALUE_ID7                IN NUMBER
	,P_INPUT_VALUE7                   IN VARCHAR
	,P_INPUT_VALUE_ID8                IN NUMBER
	,P_INPUT_VALUE8                   IN VARCHAR
	,P_INPUT_VALUE_ID9                IN NUMBER
	,P_INPUT_VALUE9                   IN VARCHAR
	,P_INPUT_VALUE_ID10               IN NUMBER
	,P_INPUT_VALUE10                  IN VARCHAR
	,P_INPUT_VALUE_ID11               IN NUMBER
	,P_INPUT_VALUE11                  IN VARCHAR
	,P_INPUT_VALUE_ID12               IN NUMBER
	,P_INPUT_VALUE12                  IN VARCHAR
	,P_INPUT_VALUE_ID13               IN NUMBER
	,P_INPUT_VALUE13                  IN VARCHAR
	,P_INPUT_VALUE_ID14               IN NUMBER
	,P_INPUT_VALUE14                  IN VARCHAR
	,P_INPUT_VALUE_ID15               IN NUMBER
	,P_INPUT_VALUE15                  IN VARCHAR
	,P_ITEM_TYPE                      IN VARCHAR
	,P_ITEM_KEY                       IN VARCHAR
	,P_STATUS                         IN VARCHAR
	,P_PL_ORDR_NUM                    IN NUMBER
	,P_OIPL_ORDR_NUM                  IN NUMBER
	,P_REASON                         IN VARCHAR
	,P_FUTURE_DATA_EXISTS             IN VARCHAR
	,P_OBJECT_VERSION_NUMBER          IN NUMBER
	,P_E_OBJECT_VERSION_NUMBER        IN NUMBER
	,P_COST_ALLOCATION_KEYFLEX_ID     IN NUMBER
	,P_ATTRIBUTE_CATEGORY             IN VARCHAR
	,P_ATTRIBUTE1                     IN VARCHAR
	,P_ATTRIBUTE2                     IN VARCHAR
	,P_ATTRIBUTE3                     IN VARCHAR
	,P_ATTRIBUTE4                     IN VARCHAR
	,P_ATTRIBUTE5                     IN VARCHAR
	,P_ATTRIBUTE6                     IN VARCHAR
	,P_ATTRIBUTE7                     IN VARCHAR
	,P_ATTRIBUTE8                     IN VARCHAR
	,P_ATTRIBUTE9                     IN VARCHAR
	,P_ATTRIBUTE10                    IN VARCHAR
	,P_ATTRIBUTE11                    IN VARCHAR
	,P_ATTRIBUTE12                    IN VARCHAR
	,P_ATTRIBUTE13                    IN VARCHAR
	,P_ATTRIBUTE14                    IN VARCHAR
	,P_ATTRIBUTE15                    IN VARCHAR
	,P_ATTRIBUTE16                    IN VARCHAR
	,P_ATTRIBUTE17                    IN VARCHAR
	,P_ATTRIBUTE18                    IN VARCHAR
	,P_ATTRIBUTE19                    IN VARCHAR
	,P_ATTRIBUTE20                    IN VARCHAR
	,P_ENTRY_INFORMATION_CATEGORY     IN VARCHAR
	,P_ENTRY_INFORMATION1             IN VARCHAR
	,P_ENTRY_INFORMATION2             IN VARCHAR
	,P_ENTRY_INFORMATION3             IN VARCHAR
	,P_ENTRY_INFORMATION4             IN VARCHAR
	,P_ENTRY_INFORMATION5             IN VARCHAR
	,P_ENTRY_INFORMATION6             IN VARCHAR
	,P_ENTRY_INFORMATION7             IN VARCHAR
	,P_ENTRY_INFORMATION8             IN VARCHAR
	,P_ENTRY_INFORMATION9             IN VARCHAR
	,P_ENTRY_INFORMATION10            IN VARCHAR
	,P_ENTRY_INFORMATION11            IN VARCHAR
	,P_ENTRY_INFORMATION12            IN VARCHAR
	,P_ENTRY_INFORMATION13            IN VARCHAR
	,P_ENTRY_INFORMATION14            IN VARCHAR
	,P_ENTRY_INFORMATION15            IN VARCHAR
	,P_ENTRY_INFORMATION16            IN VARCHAR
	,P_ENTRY_INFORMATION17            IN VARCHAR
	,P_ENTRY_INFORMATION18            IN VARCHAR
	,P_ENTRY_INFORMATION19            IN VARCHAR
	,P_ENTRY_INFORMATION20            IN VARCHAR
	,P_ENTRY_INFORMATION21            IN VARCHAR
	,P_ENTRY_INFORMATION22            IN VARCHAR
	,P_ENTRY_INFORMATION23            IN VARCHAR
	,P_ENTRY_INFORMATION24            IN VARCHAR
	,P_ENTRY_INFORMATION25            IN VARCHAR
	,P_ENTRY_INFORMATION26            IN VARCHAR
	,P_ENTRY_INFORMATION27            IN VARCHAR
	,P_ENTRY_INFORMATION28            IN VARCHAR
	,P_ENTRY_INFORMATION29            IN VARCHAR
	,P_ENTRY_INFORMATION30            IN VARCHAR
	) 	is
    ---vkodedal 16-Jun-2009 8248384
    l_null varchar2(1):=null;

	CURSOR c_entry_exists is
	  SELECT NULL
         FROM ben_icd_transaction icd, pay_element_types_f pet
         WHERE icd.assignment_id = P_ASSIGNMENT_ID
         AND NVL(icd.effective_date,icd.effective_start_date) = nvl(P_EFFECTIVE_DATE,P_EFFECTIVE_START_DATE)
         AND icd.element_type_id = P_ELEMENT_TYPE_ID
         AND icd.transaction_id  = P_TRANSACTION_ID
         AND pet.element_type_id = icd.element_type_id
         AND pet.multiple_entries_allowed_flag = 'N'
         AND NVL(icd.effective_date,icd.effective_start_date) BETWEEN pet.effective_start_date
                              AND pet.effective_end_date;


begin
fnd_msg_pub.initialize;
open c_entry_exists;
fetch c_entry_exists into l_null;
if c_entry_exists%found then
hr_utility.set_message(801,'HR_7455_PLK_ELE_ENTRY_EXISTS');
hr_utility.raise_error;
end if;
close c_entry_exists;

INSERT INTO BEN_ICD_TRANSACTION
(
ICD_TRANSACTION_ID
,ICD_CHC_RATE_ID
,BUSINESS_GROUP_ID
,PERSON_ID
,ASSIGNMENT_ID
,TRANSACTION_ID
,TRANSACTION_STEP_ID
,EFFECTIVE_START_DATE
,EFFECTIVE_END_DATE
,DML_OPERATION
,DATETRACK_MODE
,EFFECTIVE_DATE
,PL_TYP_ID
,PL_ID
,OPT_ID
,OIPL_ID
,ACTY_BASE_RT_ID
,RT_STRT_DT_CD
,RT_STRT_DT
,RT_STRT_DT_RL
,RT_END_DT_CD
,RT_END_DT
,RT_END_DT_RL
,NNMNTRY_UOM
,BNF_RQD_FLAG
,ELEMENT_TYPE_ID
,ELEMENT_LINK_ID
,ELEMENT_ENTRY_ID
,ELEMENT_TYPE_CONTEXT
,INPUT_VALUE_ID1
,INPUT_VALUE1
,INPUT_VALUE_ID2
,INPUT_VALUE2
,INPUT_VALUE_ID3
,INPUT_VALUE3
,INPUT_VALUE_ID4
,INPUT_VALUE4
,INPUT_VALUE_ID5
,INPUT_VALUE5
,INPUT_VALUE_ID6
,INPUT_VALUE6
,INPUT_VALUE_ID7
,INPUT_VALUE7
,INPUT_VALUE_ID8
,INPUT_VALUE8
,INPUT_VALUE_ID9
,INPUT_VALUE9
,INPUT_VALUE_ID10
,INPUT_VALUE10
,INPUT_VALUE_ID11
,INPUT_VALUE11
,INPUT_VALUE_ID12
,INPUT_VALUE12
,INPUT_VALUE_ID13
,INPUT_VALUE13
,INPUT_VALUE_ID14
,INPUT_VALUE14
,INPUT_VALUE_ID15
,INPUT_VALUE15
,ITEM_TYPE
,ITEM_KEY
,STATUS
,PL_ORDR_NUM
,OIPL_ORDR_NUM
,REASON
,FUTURE_DATA_EXISTS
,OBJECT_VERSION_NUMBER
,E_OBJECT_VERSION_NUMBER
,COST_ALLOCATION_KEYFLEX_ID
,ATTRIBUTE_CATEGORY
,ATTRIBUTE1
,ATTRIBUTE2
,ATTRIBUTE3
,ATTRIBUTE4
,ATTRIBUTE5
,ATTRIBUTE6
,ATTRIBUTE7
,ATTRIBUTE8
,ATTRIBUTE9
,ATTRIBUTE10
,ATTRIBUTE11
,ATTRIBUTE12
,ATTRIBUTE13
,ATTRIBUTE14
,ATTRIBUTE15
,ATTRIBUTE16
,ATTRIBUTE17
,ATTRIBUTE18
,ATTRIBUTE19
,ATTRIBUTE20
,ENTRY_INFORMATION_CATEGORY
,ENTRY_INFORMATION1
,ENTRY_INFORMATION2
,ENTRY_INFORMATION3
,ENTRY_INFORMATION4
,ENTRY_INFORMATION5
,ENTRY_INFORMATION6
,ENTRY_INFORMATION7
,ENTRY_INFORMATION8
,ENTRY_INFORMATION9
,ENTRY_INFORMATION10
,ENTRY_INFORMATION11
,ENTRY_INFORMATION12
,ENTRY_INFORMATION13
,ENTRY_INFORMATION14
,ENTRY_INFORMATION15
,ENTRY_INFORMATION16
,ENTRY_INFORMATION17
,ENTRY_INFORMATION18
,ENTRY_INFORMATION19
,ENTRY_INFORMATION20
,ENTRY_INFORMATION21
,ENTRY_INFORMATION22
,ENTRY_INFORMATION23
,ENTRY_INFORMATION24
,ENTRY_INFORMATION25
,ENTRY_INFORMATION26
,ENTRY_INFORMATION27
,ENTRY_INFORMATION28
,ENTRY_INFORMATION29
,ENTRY_INFORMATION30
)

VALUES
(
P_ICD_TRANSACTION_ID
,P_ICD_CHC_RATE_ID
,P_BUSINESS_GROUP_ID
,P_PERSON_ID
,P_ASSIGNMENT_ID
,P_TRANSACTION_ID
,P_TRANSACTION_STEP_ID
,P_EFFECTIVE_START_DATE
,P_EFFECTIVE_END_DATE
,P_DML_OPERATION
,P_DATETRACK_MODE
,P_EFFECTIVE_DATE
,P_PL_TYP_ID
,P_PL_ID
,P_OPT_ID
,P_OIPL_ID
,P_ACTY_BASE_RT_ID
,P_RT_STRT_DT_CD
,P_RT_STRT_DT
,P_RT_STRT_DT_RL
,P_RT_END_DT_CD
,P_RT_END_DT
,P_RT_END_DT_RL
,P_NNMNTRY_UOM
,P_BNF_RQD_FLAG
,P_ELEMENT_TYPE_ID
,P_ELEMENT_LINK_ID
,P_ELEMENT_ENTRY_ID
,P_ELEMENT_TYPE_CONTEXT
,P_INPUT_VALUE_ID1
,P_INPUT_VALUE1
,P_INPUT_VALUE_ID2
,P_INPUT_VALUE2
,P_INPUT_VALUE_ID3
,P_INPUT_VALUE3
,P_INPUT_VALUE_ID4
,P_INPUT_VALUE4
,P_INPUT_VALUE_ID5
,P_INPUT_VALUE5
,P_INPUT_VALUE_ID6
,P_INPUT_VALUE6
,P_INPUT_VALUE_ID7
,P_INPUT_VALUE7
,P_INPUT_VALUE_ID8
,P_INPUT_VALUE8
,P_INPUT_VALUE_ID9
,P_INPUT_VALUE9
,P_INPUT_VALUE_ID10
,P_INPUT_VALUE10
,P_INPUT_VALUE_ID11
,P_INPUT_VALUE11
,P_INPUT_VALUE_ID12
,P_INPUT_VALUE12
,P_INPUT_VALUE_ID13
,P_INPUT_VALUE13
,P_INPUT_VALUE_ID14
,P_INPUT_VALUE14
,P_INPUT_VALUE_ID15
,P_INPUT_VALUE15
,P_ITEM_TYPE
,P_ITEM_KEY
,P_STATUS
,P_PL_ORDR_NUM
,P_OIPL_ORDR_NUM
,P_REASON
,P_FUTURE_DATA_EXISTS
,P_OBJECT_VERSION_NUMBER
,P_E_OBJECT_VERSION_NUMBER
,P_COST_ALLOCATION_KEYFLEX_ID
,P_ATTRIBUTE_CATEGORY
,P_ATTRIBUTE1
,P_ATTRIBUTE2
,P_ATTRIBUTE3
,P_ATTRIBUTE4
,P_ATTRIBUTE5
,P_ATTRIBUTE6
,P_ATTRIBUTE7
,P_ATTRIBUTE8
,P_ATTRIBUTE9
,P_ATTRIBUTE10
,P_ATTRIBUTE11
,P_ATTRIBUTE12
,P_ATTRIBUTE13
,P_ATTRIBUTE14
,P_ATTRIBUTE15
,P_ATTRIBUTE16
,P_ATTRIBUTE17
,P_ATTRIBUTE18
,P_ATTRIBUTE19
,P_ATTRIBUTE20
,P_ENTRY_INFORMATION_CATEGORY
,P_ENTRY_INFORMATION1
,P_ENTRY_INFORMATION2
,P_ENTRY_INFORMATION3
,P_ENTRY_INFORMATION4
,P_ENTRY_INFORMATION5
,P_ENTRY_INFORMATION6
,P_ENTRY_INFORMATION7
,P_ENTRY_INFORMATION8
,P_ENTRY_INFORMATION9
,P_ENTRY_INFORMATION10
,P_ENTRY_INFORMATION11
,P_ENTRY_INFORMATION12
,P_ENTRY_INFORMATION13
,P_ENTRY_INFORMATION14
,P_ENTRY_INFORMATION15
,P_ENTRY_INFORMATION16
,P_ENTRY_INFORMATION17
,P_ENTRY_INFORMATION18
,P_ENTRY_INFORMATION19
,P_ENTRY_INFORMATION20
,P_ENTRY_INFORMATION21
,P_ENTRY_INFORMATION22
,P_ENTRY_INFORMATION23
,P_ENTRY_INFORMATION24
,P_ENTRY_INFORMATION25
,P_ENTRY_INFORMATION26
,P_ENTRY_INFORMATION27
,P_ENTRY_INFORMATION28
,P_ENTRY_INFORMATION29
,P_ENTRY_INFORMATION30
);

EXCEPTION
when others then
 fnd_msg_pub.add;

end CREATE_TRANSACTION;

procedure UPDATE_TRANSACTION
	(
	 P_ICD_TRANSACTION_ID             IN NUMBER
	,P_ICD_CHC_RATE_ID                IN NUMBER
	,P_BUSINESS_GROUP_ID              IN NUMBER
	,P_PERSON_ID                      IN NUMBER
	,P_ASSIGNMENT_ID                  IN NUMBER
	,P_TRANSACTION_ID                 IN NUMBER
	,P_TRANSACTION_STEP_ID            IN NUMBER
	,P_EFFECTIVE_START_DATE           IN DATE
	,P_EFFECTIVE_END_DATE             IN DATE
	,P_DML_OPERATION                  IN VARCHAR
	,P_DATETRACK_MODE                 IN VARCHAR
	,P_EFFECTIVE_DATE                 IN DATE
	,P_PL_TYP_ID                      IN NUMBER
	,P_PL_ID                          IN NUMBER
	,P_OPT_ID                         IN NUMBER
	,P_OIPL_ID                        IN NUMBER
	,P_ACTY_BASE_RT_ID                IN NUMBER
	,P_RT_STRT_DT_CD                  IN VARCHAR
	,P_RT_STRT_DT                     IN DATE
	,P_RT_STRT_DT_RL                  IN NUMBER
	,P_RT_END_DT_CD                   IN VARCHAR
	,P_RT_END_DT                      IN DATE
	,P_RT_END_DT_RL                   IN NUMBER
	,P_NNMNTRY_UOM                    IN VARCHAR
	,P_BNF_RQD_FLAG                   IN VARCHAR
	,P_ELEMENT_TYPE_ID                IN NUMBER
	,P_ELEMENT_LINK_ID                IN NUMBER
	,P_ELEMENT_ENTRY_ID               IN NUMBER
	,P_ELEMENT_TYPE_CONTEXT           IN VARCHAR
	,P_INPUT_VALUE_ID1                IN NUMBER
	,P_INPUT_VALUE1                   IN VARCHAR
	,P_INPUT_VALUE_ID2                IN NUMBER
	,P_INPUT_VALUE2                   IN VARCHAR
	,P_INPUT_VALUE_ID3                IN NUMBER
	,P_INPUT_VALUE3                   IN VARCHAR
	,P_INPUT_VALUE_ID4                IN NUMBER
	,P_INPUT_VALUE4                   IN VARCHAR
	,P_INPUT_VALUE_ID5                IN NUMBER
	,P_INPUT_VALUE5                   IN VARCHAR
	,P_INPUT_VALUE_ID6                IN NUMBER
	,P_INPUT_VALUE6                   IN VARCHAR
	,P_INPUT_VALUE_ID7                IN NUMBER
	,P_INPUT_VALUE7                   IN VARCHAR
	,P_INPUT_VALUE_ID8                IN NUMBER
	,P_INPUT_VALUE8                   IN VARCHAR
	,P_INPUT_VALUE_ID9                IN NUMBER
	,P_INPUT_VALUE9                   IN VARCHAR
	,P_INPUT_VALUE_ID10               IN NUMBER
	,P_INPUT_VALUE10                  IN VARCHAR
	,P_INPUT_VALUE_ID11               IN NUMBER
	,P_INPUT_VALUE11                  IN VARCHAR
	,P_INPUT_VALUE_ID12               IN NUMBER
	,P_INPUT_VALUE12                  IN VARCHAR
	,P_INPUT_VALUE_ID13               IN NUMBER
	,P_INPUT_VALUE13                  IN VARCHAR
	,P_INPUT_VALUE_ID14               IN NUMBER
	,P_INPUT_VALUE14                  IN VARCHAR
	,P_INPUT_VALUE_ID15               IN NUMBER
	,P_INPUT_VALUE15                  IN VARCHAR
	,P_ITEM_TYPE                      IN VARCHAR
	,P_ITEM_KEY                       IN VARCHAR
	,P_STATUS                         IN VARCHAR
	,P_PL_ORDR_NUM                    IN NUMBER
	,P_OIPL_ORDR_NUM                  IN NUMBER
	,P_REASON                         IN VARCHAR
	,P_FUTURE_DATA_EXISTS             IN VARCHAR
	,P_OBJECT_VERSION_NUMBER          IN NUMBER
	,P_E_OBJECT_VERSION_NUMBER        IN NUMBER
	,P_COST_ALLOCATION_KEYFLEX_ID     IN NUMBER
	,P_ATTRIBUTE_CATEGORY             IN VARCHAR
	,P_ATTRIBUTE1                     IN VARCHAR
	,P_ATTRIBUTE2                     IN VARCHAR
	,P_ATTRIBUTE3                     IN VARCHAR
	,P_ATTRIBUTE4                     IN VARCHAR
	,P_ATTRIBUTE5                     IN VARCHAR
	,P_ATTRIBUTE6                     IN VARCHAR
	,P_ATTRIBUTE7                     IN VARCHAR
	,P_ATTRIBUTE8                     IN VARCHAR
	,P_ATTRIBUTE9                     IN VARCHAR
	,P_ATTRIBUTE10                    IN VARCHAR
	,P_ATTRIBUTE11                    IN VARCHAR
	,P_ATTRIBUTE12                    IN VARCHAR
	,P_ATTRIBUTE13                    IN VARCHAR
	,P_ATTRIBUTE14                    IN VARCHAR
	,P_ATTRIBUTE15                    IN VARCHAR
	,P_ATTRIBUTE16                    IN VARCHAR
	,P_ATTRIBUTE17                    IN VARCHAR
	,P_ATTRIBUTE18                    IN VARCHAR
	,P_ATTRIBUTE19                    IN VARCHAR
	,P_ATTRIBUTE20                    IN VARCHAR
	,P_ENTRY_INFORMATION_CATEGORY     IN VARCHAR
	,P_ENTRY_INFORMATION1             IN VARCHAR
	,P_ENTRY_INFORMATION2             IN VARCHAR
	,P_ENTRY_INFORMATION3             IN VARCHAR
	,P_ENTRY_INFORMATION4             IN VARCHAR
	,P_ENTRY_INFORMATION5             IN VARCHAR
	,P_ENTRY_INFORMATION6             IN VARCHAR
	,P_ENTRY_INFORMATION7             IN VARCHAR
	,P_ENTRY_INFORMATION8             IN VARCHAR
	,P_ENTRY_INFORMATION9             IN VARCHAR
	,P_ENTRY_INFORMATION10            IN VARCHAR
	,P_ENTRY_INFORMATION11            IN VARCHAR
	,P_ENTRY_INFORMATION12            IN VARCHAR
	,P_ENTRY_INFORMATION13            IN VARCHAR
	,P_ENTRY_INFORMATION14            IN VARCHAR
	,P_ENTRY_INFORMATION15            IN VARCHAR
	,P_ENTRY_INFORMATION16            IN VARCHAR
	,P_ENTRY_INFORMATION17            IN VARCHAR
	,P_ENTRY_INFORMATION18            IN VARCHAR
	,P_ENTRY_INFORMATION19            IN VARCHAR
	,P_ENTRY_INFORMATION20            IN VARCHAR
	,P_ENTRY_INFORMATION21            IN VARCHAR
	,P_ENTRY_INFORMATION22            IN VARCHAR
	,P_ENTRY_INFORMATION23            IN VARCHAR
	,P_ENTRY_INFORMATION24            IN VARCHAR
	,P_ENTRY_INFORMATION25            IN VARCHAR
	,P_ENTRY_INFORMATION26            IN VARCHAR
	,P_ENTRY_INFORMATION27            IN VARCHAR
	,P_ENTRY_INFORMATION28            IN VARCHAR
	,P_ENTRY_INFORMATION29            IN VARCHAR
	,P_ENTRY_INFORMATION30            IN VARCHAR
	)	is
    ---vkodedal 16-Jun-2009 8248384
    l_null varchar2(1):=null;

	CURSOR c_entry_exists is
	  SELECT NULL
         FROM ben_icd_transaction icd, pay_element_types_f pet
         WHERE icd.assignment_id = P_ASSIGNMENT_ID
         AND NVL(icd.effective_date,icd.effective_start_date) = nvl(P_EFFECTIVE_DATE,P_EFFECTIVE_START_DATE)
         AND icd.element_type_id = P_ELEMENT_TYPE_ID
         AND icd.transaction_id  = P_TRANSACTION_ID
         AND pet.element_type_id = icd.element_type_id
         AND pet.multiple_entries_allowed_flag = 'N'
         AND NVL(icd.effective_date,icd.effective_start_date) BETWEEN pet.effective_start_date
                              AND pet.effective_end_date
         AND icd.ICD_TRANSACTION_ID<>P_ICD_TRANSACTION_ID;

begin

fnd_msg_pub.initialize;
open c_entry_exists;
fetch c_entry_exists into l_null;
if c_entry_exists%found then
hr_utility.set_message(801,'HR_7455_PLK_ELE_ENTRY_EXISTS');
hr_utility.raise_error;
end if;
close c_entry_exists;

update
	ben_icd_transaction
set
 ICD_CHC_RATE_ID	      = P_ICD_CHC_RATE_ID
,BUSINESS_GROUP_ID            = P_BUSINESS_GROUP_ID
,PERSON_ID                    = P_PERSON_ID
,ASSIGNMENT_ID                = P_ASSIGNMENT_ID
,TRANSACTION_ID               = P_TRANSACTION_ID
,TRANSACTION_STEP_ID          = P_TRANSACTION_STEP_ID
,EFFECTIVE_START_DATE         = P_EFFECTIVE_START_DATE
,EFFECTIVE_END_DATE           = P_EFFECTIVE_END_DATE
,DML_OPERATION                = P_DML_OPERATION
,DATETRACK_MODE               = P_DATETRACK_MODE
,EFFECTIVE_DATE		      = P_EFFECTIVE_DATE
,PL_TYP_ID                    = P_PL_TYP_ID
,PL_ID                        = P_PL_ID
,OPT_ID                       = P_OPT_ID
,OIPL_ID                      = P_OIPL_ID
,ACTY_BASE_RT_ID              = P_ACTY_BASE_RT_ID
,RT_STRT_DT_CD                = P_RT_STRT_DT_CD
,RT_STRT_DT                   = P_RT_STRT_DT
,RT_STRT_DT_RL                = P_RT_STRT_DT_RL
,RT_END_DT_CD                 = P_RT_END_DT_CD
,RT_END_DT                    = P_RT_END_DT
,RT_END_DT_RL                 = P_RT_END_DT_RL
,NNMNTRY_UOM                  = P_NNMNTRY_UOM
,BNF_RQD_FLAG                 = P_BNF_RQD_FLAG
,FUTURE_DATA_EXISTS           = P_FUTURE_DATA_EXISTS
,OBJECT_VERSION_NUMBER        = P_OBJECT_VERSION_NUMBER
,E_OBJECT_VERSION_NUMBER       = P_E_OBJECT_VERSION_NUMBER
,ELEMENT_TYPE_ID              = P_ELEMENT_TYPE_ID
,ELEMENT_LINK_ID              = P_ELEMENT_LINK_ID
,ELEMENT_ENTRY_ID             = P_ELEMENT_ENTRY_ID
,ELEMENT_TYPE_CONTEXT         = P_ELEMENT_TYPE_CONTEXT
,INPUT_VALUE_ID1              = P_INPUT_VALUE_ID1
,INPUT_VALUE1                 = P_INPUT_VALUE1
,INPUT_VALUE_ID2              = P_INPUT_VALUE_ID2
,INPUT_VALUE2                 = P_INPUT_VALUE2
,INPUT_VALUE_ID3              = P_INPUT_VALUE_ID3
,INPUT_VALUE3                 = P_INPUT_VALUE3
,INPUT_VALUE_ID4              = P_INPUT_VALUE_ID4
,INPUT_VALUE4                 = P_INPUT_VALUE4
,INPUT_VALUE_ID5              = P_INPUT_VALUE_ID5
,INPUT_VALUE5                 = P_INPUT_VALUE5
,INPUT_VALUE_ID6              = P_INPUT_VALUE_ID6
,INPUT_VALUE6                 = P_INPUT_VALUE6
,INPUT_VALUE_ID7              = P_INPUT_VALUE_ID7
,INPUT_VALUE7                 = P_INPUT_VALUE7
,INPUT_VALUE_ID8              = P_INPUT_VALUE_ID8
,INPUT_VALUE8                 = P_INPUT_VALUE8
,INPUT_VALUE_ID9              = P_INPUT_VALUE_ID9
,INPUT_VALUE9                 = P_INPUT_VALUE9
,INPUT_VALUE_ID10             = P_INPUT_VALUE_ID10
,INPUT_VALUE10                = P_INPUT_VALUE10
,INPUT_VALUE_ID11             = P_INPUT_VALUE_ID11
,INPUT_VALUE11                = P_INPUT_VALUE11
,INPUT_VALUE_ID12             = P_INPUT_VALUE_ID12
,INPUT_VALUE12                = P_INPUT_VALUE12
,INPUT_VALUE_ID13             = P_INPUT_VALUE_ID13
,INPUT_VALUE13                = P_INPUT_VALUE13
,INPUT_VALUE_ID14             = P_INPUT_VALUE_ID14
,INPUT_VALUE14                = P_INPUT_VALUE14
,INPUT_VALUE_ID15             = P_INPUT_VALUE_ID15
,INPUT_VALUE15                = P_INPUT_VALUE15
,ITEM_TYPE                    = P_ITEM_TYPE
,ITEM_KEY                     = P_ITEM_KEY
,STATUS                       = P_STATUS
,PL_ORDR_NUM                  = P_PL_ORDR_NUM
,OIPL_ORDR_NUM                = P_OIPL_ORDR_NUM
,REASON                       = P_REASON
,COST_ALLOCATION_KEYFLEX_ID   = P_COST_ALLOCATION_KEYFLEX_ID
,ATTRIBUTE_CATEGORY           = P_ATTRIBUTE_CATEGORY
,ATTRIBUTE1                   = P_ATTRIBUTE1
,ATTRIBUTE2                   = P_ATTRIBUTE2
,ATTRIBUTE3                   = P_ATTRIBUTE3
,ATTRIBUTE4                   = P_ATTRIBUTE4
,ATTRIBUTE5                   = P_ATTRIBUTE5
,ATTRIBUTE6                   = P_ATTRIBUTE6
,ATTRIBUTE7                   = P_ATTRIBUTE7
,ATTRIBUTE8                   = P_ATTRIBUTE8
,ATTRIBUTE9                   = P_ATTRIBUTE9
,ATTRIBUTE10                  = P_ATTRIBUTE10
,ATTRIBUTE11                  = P_ATTRIBUTE11
,ATTRIBUTE12                  = P_ATTRIBUTE12
,ATTRIBUTE13                  = P_ATTRIBUTE13
,ATTRIBUTE14                  = P_ATTRIBUTE14
,ATTRIBUTE15                  = P_ATTRIBUTE15
,ATTRIBUTE16                  = P_ATTRIBUTE16
,ATTRIBUTE17                  = P_ATTRIBUTE17
,ATTRIBUTE18                  = P_ATTRIBUTE18
,ATTRIBUTE19                  = P_ATTRIBUTE19
,ATTRIBUTE20                  = P_ATTRIBUTE20
,ENTRY_INFORMATION_CATEGORY   = P_ENTRY_INFORMATION_CATEGORY
,ENTRY_INFORMATION1           = P_ENTRY_INFORMATION1
,ENTRY_INFORMATION2           = P_ENTRY_INFORMATION2
,ENTRY_INFORMATION3           = P_ENTRY_INFORMATION3
,ENTRY_INFORMATION4           = P_ENTRY_INFORMATION4
,ENTRY_INFORMATION5           = P_ENTRY_INFORMATION5
,ENTRY_INFORMATION6           = P_ENTRY_INFORMATION6
,ENTRY_INFORMATION7           = P_ENTRY_INFORMATION7
,ENTRY_INFORMATION8           = P_ENTRY_INFORMATION8
,ENTRY_INFORMATION9           = P_ENTRY_INFORMATION9
,ENTRY_INFORMATION10          = P_ENTRY_INFORMATION10
,ENTRY_INFORMATION11          = P_ENTRY_INFORMATION11
,ENTRY_INFORMATION12          = P_ENTRY_INFORMATION12
,ENTRY_INFORMATION13          = P_ENTRY_INFORMATION13
,ENTRY_INFORMATION14          = P_ENTRY_INFORMATION14
,ENTRY_INFORMATION15          = P_ENTRY_INFORMATION15
,ENTRY_INFORMATION16          = P_ENTRY_INFORMATION16
,ENTRY_INFORMATION17          = P_ENTRY_INFORMATION17
,ENTRY_INFORMATION18          = P_ENTRY_INFORMATION18
,ENTRY_INFORMATION19          = P_ENTRY_INFORMATION19
,ENTRY_INFORMATION20          = P_ENTRY_INFORMATION20
,ENTRY_INFORMATION21          = P_ENTRY_INFORMATION21
,ENTRY_INFORMATION22          = P_ENTRY_INFORMATION22
,ENTRY_INFORMATION23          = P_ENTRY_INFORMATION23
,ENTRY_INFORMATION24          = P_ENTRY_INFORMATION24
,ENTRY_INFORMATION25          = P_ENTRY_INFORMATION25
,ENTRY_INFORMATION26          = P_ENTRY_INFORMATION26
,ENTRY_INFORMATION27          = P_ENTRY_INFORMATION27
,ENTRY_INFORMATION28	      = P_ENTRY_INFORMATION28
,ENTRY_INFORMATION29          = P_ENTRY_INFORMATION29
,ENTRY_INFORMATION30          = P_ENTRY_INFORMATION30
where
	icd_transaction_id = P_ICD_TRANSACTION_ID;


EXCEPTION
when others then
RAISE;

end UPDATE_TRANSACTION;

PROCEDURE VALIDATE_TRANSACTION (
     P_ICD_TRANSACTION_ID             IN NUMBER
    ,P_ASSIGNMENT_ID                  IN NUMBER
    ,P_TRANSACTION_ID                 IN NUMBER
	,P_EFFECTIVE_START_DATE           IN DATE
	,P_EFFECTIVE_END_DATE             IN DATE
	,P_DML_OPERATION                  IN VARCHAR
	,P_EFFECTIVE_DATE                 IN DATE
	,P_ELEMENT_TYPE_ID                IN NUMBER
) IS
	l_null varchar2(1):=null;

	CURSOR c_entry_exists is
	  SELECT NULL
         FROM ben_icd_transaction icd, pay_element_types_f pet
         WHERE icd.assignment_id = P_ASSIGNMENT_ID
         AND NVL(icd.effective_date,icd.effective_start_date) = nvl(P_EFFECTIVE_DATE,P_EFFECTIVE_START_DATE)
         AND icd.element_type_id = P_ELEMENT_TYPE_ID
         AND icd.transaction_id  = P_TRANSACTION_ID
         AND pet.element_type_id = icd.element_type_id
         AND pet.multiple_entries_allowed_flag = 'N'
         AND NVL(icd.effective_date,icd.effective_start_date) BETWEEN pet.effective_start_date
                              AND pet.effective_end_date
         AND icd.ICD_TRANSACTION_ID<>P_ICD_TRANSACTION_ID;

begin

fnd_msg_pub.initialize;
open c_entry_exists;
fetch c_entry_exists into l_null;
if c_entry_exists%found then
hr_utility.set_message(801,'HR_7455_PLK_ELE_ENTRY_EXISTS');
FND_MSG_PUB.ADD;
end if;
close c_entry_exists;

END VALIDATE_TRANSACTION;


END BEN_ICD_PKG;


/
