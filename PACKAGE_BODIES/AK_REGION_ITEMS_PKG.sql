--------------------------------------------------------
--  DDL for Package Body AK_REGION_ITEMS_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."AK_REGION_ITEMS_PKG" as
/* $Header: AKDRGITB.pls 120.3 2006/01/25 15:31:51 tshort ship $ */
procedure INSERT_ROW (
X_ROWID in out NOCOPY VARCHAR2,
X_REGION_APPLICATION_ID in NUMBER,
X_REGION_CODE in VARCHAR2,
X_ATTRIBUTE_APPLICATION_ID in NUMBER,
X_ATTRIBUTE_CODE in VARCHAR2,
X_DISPLAY_SEQUENCE in NUMBER,
X_NODE_DISPLAY_FLAG in VARCHAR2,
X_NODE_QUERY_FLAG in VARCHAR2,
X_ATTRIBUTE_LABEL_LENGTH in NUMBER,
X_BOLD in VARCHAR2,
X_ITALIC in VARCHAR2,
X_VERTICAL_ALIGNMENT in VARCHAR2,
X_HORIZONTAL_ALIGNMENT in VARCHAR2,
X_ITEM_STYLE in VARCHAR2,
X_OBJECT_ATTRIBUTE_FLAG in VARCHAR2,
X_ATTRIBUTE_LABEL_LONG in VARCHAR2,
X_DESCRIPTION in VARCHAR2,
X_SECURITY_CODE in VARCHAR2,
X_UPDATE_FLAG in VARCHAR2,
X_REQUIRED_FLAG in VARCHAR2,
X_DISPLAY_VALUE_LENGTH in NUMBER,
X_LOV_REGION_APPLICATION_ID in NUMBER,
X_LOV_REGION_CODE in VARCHAR2,
X_LOV_FOREIGN_KEY_NAME in VARCHAR2,
X_LOV_ATTRIBUTE_APPLICATION_ID in NUMBER,
X_LOV_ATTRIBUTE_CODE in VARCHAR2,
X_LOV_DEFAULT_FLAG in VARCHAR2,
X_REGION_DEFAULTING_API_PKG in VARCHAR2,
X_REGION_DEFAULTING_API_PROC in VARCHAR2,
X_REGION_VALIDATION_API_PKG in VARCHAR2,
X_REGION_VALIDATION_API_PROC in VARCHAR2,
X_ORDER_SEQUENCE in NUMBER,
X_ORDER_DIRECTION in VARCHAR2,
X_DEFAULT_VALUE_VARCHAR2 in VARCHAR2,
X_DEFAULT_VALUE_NUMBER in NUMBER,
X_DEFAULT_VALUE_DATE in DATE,
X_ITEM_NAME IN VARCHAR2,
X_DISPLAY_HEIGHT IN NUMBER,
X_SUBMIT IN VARCHAR2,
X_ENCRYPT IN VARCHAR2,
X_VIEW_USAGE_NAME IN VARCHAR2,
X_VIEW_ATTRIBUTE_NAME IN VARCHAR2,
X_CSS_CLASS_NAME IN VARCHAR2,
X_CSS_LABEL_CLASS_NAME IN VARCHAR2,
X_URL IN VARCHAR2,
X_POPLIST_VIEWOBJECT IN VARCHAR2,
X_POPLIST_DISPLAY_ATTRIBUTE IN VARCHAR2,
X_POPLIST_VALUE_ATTRIBUTE IN VARCHAR2,
X_IMAGE_FILE_NAME IN VARCHAR2,
X_NESTED_REGION_CODE IN VARCHAR2,
X_NESTED_REGION_APPL_ID IN NUMBER,
X_MENU_NAME IN VARCHAR2,
X_FLEXFIELD_NAME IN VARCHAR2,
X_FLEXFIELD_APPLICATION_ID IN NUMBER,
X_TABULAR_FUNCTION_CODE IN VARCHAR2,
X_TIP_TYPE IN VARCHAR2,
X_TIP_MESSAGE_NAME IN VARCHAR2,
X_TIP_MESSAGE_APPLICATION_ID IN NUMBER,
X_FLEX_SEGMENT_LIST IN VARCHAR2,
X_ENTITY_ID IN VARCHAR2,
X_ANCHOR IN VARCHAR2,
X_POPLIST_VIEW_USAGE_NAME IN VARCHAR2,
X_USER_CUSTOMIZABLE IN VARCHAR2 := NULL,
X_ADMIN_CUSTOMIZABLE IN VARCHAR2 := 'Y',
X_INVOKE_FUNCTION_NAME IN VARCHAR2 := NULL,
X_ATTRIBUTE_LABEL_SHORT IN VARCHAR2 := NULL,
X_EXPANSION IN NUMBER := NULL,
X_ALS_MAX_LENGTH IN NUMBER := NULL,
X_SORTBY_VIEW_ATTRIBUTE_NAME IN VARCHAR2 := NULL,
X_ICX_CUSTOM_CALL IN VARCHAR2 :=NULL,
X_INITIAL_SORT_SEQUENCE IN VARCHAR2 := NULL,
X_CUSTOMIZATION_APPLICATION_ID IN NUMBER := NULL,
X_CUSTOMIZATION_CODE IN VARCHAR2 := NULL,
X_CREATION_DATE in DATE,
X_CREATED_BY in NUMBER,
X_LAST_UPDATE_DATE in DATE,
X_LAST_UPDATED_BY in NUMBER,
X_LAST_UPDATE_LOGIN in NUMBER,
X_ATTRIBUTE_CATEGORY in VARCHAR2,
X_ATTRIBUTE1 in VARCHAR2,
X_ATTRIBUTE2 in VARCHAR2,
X_ATTRIBUTE3 in VARCHAR2,
X_ATTRIBUTE4 in VARCHAR2,
X_ATTRIBUTE5 in VARCHAR2,
X_ATTRIBUTE6 in VARCHAR2,
X_ATTRIBUTE7 in VARCHAR2,
X_ATTRIBUTE8 in VARCHAR2,
X_ATTRIBUTE9 in VARCHAR2,
X_ATTRIBUTE10 in VARCHAR2,
X_ATTRIBUTE11 in VARCHAR2,
X_ATTRIBUTE12 in VARCHAR2,
X_ATTRIBUTE13 in VARCHAR2,
X_ATTRIBUTE14 in VARCHAR2,
X_ATTRIBUTE15 in VARCHAR2
) is
cursor C is select ROWID from AK_REGION_ITEMS
where REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and REGION_CODE = X_REGION_CODE
and ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and ATTRIBUTE_CODE = X_ATTRIBUTE_CODE;
begin
insert into AK_REGION_ITEMS (
REGION_APPLICATION_ID,
REGION_CODE,
ATTRIBUTE_APPLICATION_ID,
ATTRIBUTE_CODE,
DISPLAY_SEQUENCE,
NODE_DISPLAY_FLAG,
NODE_QUERY_FLAG,
ATTRIBUTE_LABEL_LENGTH,
BOLD,
ITALIC,
VERTICAL_ALIGNMENT,
HORIZONTAL_ALIGNMENT,
ITEM_STYLE,
OBJECT_ATTRIBUTE_FLAG,
SECURITY_CODE,
UPDATE_FLAG,
REQUIRED_FLAG,
DISPLAY_VALUE_LENGTH,
LOV_REGION_APPLICATION_ID,
LOV_REGION_CODE,
LOV_FOREIGN_KEY_NAME,
LOV_ATTRIBUTE_APPLICATION_ID,
LOV_ATTRIBUTE_CODE,
LOV_DEFAULT_FLAG,
REGION_DEFAULTING_API_PKG,
REGION_DEFAULTING_API_PROC,
REGION_VALIDATION_API_PKG,
REGION_VALIDATION_API_PROC,
ORDER_SEQUENCE,
ORDER_DIRECTION,
DEFAULT_VALUE_VARCHAR2,
DEFAULT_VALUE_NUMBER,
DEFAULT_VALUE_DATE,
DISPLAY_HEIGHT,
SUBMIT,
ENCRYPT,
VIEW_USAGE_NAME,
VIEW_ATTRIBUTE_NAME,
CSS_CLASS_NAME,
CSS_LABEL_CLASS_NAME,
URL,
POPLIST_VIEWOBJECT,
POPLIST_DISPLAY_ATTRIBUTE,
POPLIST_VALUE_ATTRIBUTE,
IMAGE_FILE_NAME,
NESTED_REGION_CODE,
NESTED_REGION_APPLICATION_ID,
ITEM_NAME,
MENU_NAME,
FLEXFIELD_NAME,
FLEXFIELD_APPLICATION_ID,
TABULAR_FUNCTION_CODE,
TIP_TYPE,
TIP_MESSAGE_NAME,
TIP_MESSAGE_APPLICATION_ID,
FLEX_SEGMENT_LIST,
ENTITY_ID,
ANCHOR,
POPLIST_VIEW_USAGE_NAME,
USER_CUSTOMIZABLE,
ADMIN_CUSTOMIZABLE,
INVOKE_FUNCTION_NAME,
EXPANSION,
ALS_MAX_LENGTH,
SORTBY_VIEW_ATTRIBUTE_NAME,
ICX_CUSTOM_CALL,
INITIAL_SORT_SEQUENCE,
CUSTOMIZATION_APPLICATION_ID,
CUSTOMIZATION_CODE,
CREATION_DATE,
CREATED_BY,
LAST_UPDATE_DATE,
LAST_UPDATED_BY,
LAST_UPDATE_LOGIN,
ATTRIBUTE_CATEGORY,
ATTRIBUTE1,
ATTRIBUTE2,
ATTRIBUTE3,
ATTRIBUTE4,
ATTRIBUTE5,
ATTRIBUTE6,
ATTRIBUTE7,
ATTRIBUTE8,
ATTRIBUTE9,
ATTRIBUTE10,
ATTRIBUTE11,
ATTRIBUTE12,
ATTRIBUTE13,
ATTRIBUTE14,
ATTRIBUTE15
) values (
X_REGION_APPLICATION_ID,
X_REGION_CODE,
X_ATTRIBUTE_APPLICATION_ID,
X_ATTRIBUTE_CODE,
X_DISPLAY_SEQUENCE,
X_NODE_DISPLAY_FLAG,
X_NODE_QUERY_FLAG,
X_ATTRIBUTE_LABEL_LENGTH,
X_BOLD,
X_ITALIC,
X_VERTICAL_ALIGNMENT,
X_HORIZONTAL_ALIGNMENT,
X_ITEM_STYLE,
X_OBJECT_ATTRIBUTE_FLAG,
X_SECURITY_CODE,
X_UPDATE_FLAG,
X_REQUIRED_FLAG,
X_DISPLAY_VALUE_LENGTH,
X_LOV_REGION_APPLICATION_ID,
X_LOV_REGION_CODE,
X_LOV_FOREIGN_KEY_NAME,
X_LOV_ATTRIBUTE_APPLICATION_ID,
X_LOV_ATTRIBUTE_CODE,
X_LOV_DEFAULT_FLAG,
X_REGION_DEFAULTING_API_PKG,
X_REGION_DEFAULTING_API_PROC,
X_REGION_VALIDATION_API_PKG,
X_REGION_VALIDATION_API_PROC,
X_ORDER_SEQUENCE,
X_ORDER_DIRECTION,
X_DEFAULT_VALUE_VARCHAR2,
X_DEFAULT_VALUE_NUMBER,
X_DEFAULT_VALUE_DATE,
X_DISPLAY_HEIGHT,
X_SUBMIT,
X_ENCRYPT,
X_VIEW_USAGE_NAME,
X_VIEW_ATTRIBUTE_NAME,
X_CSS_CLASS_NAME,
X_CSS_LABEL_CLASS_NAME,
X_URL,
X_POPLIST_VIEWOBJECT,
X_POPLIST_DISPLAY_ATTRIBUTE,
X_POPLIST_VALUE_ATTRIBUTE,
X_IMAGE_FILE_NAME,
X_NESTED_REGION_CODE,
X_NESTED_REGION_APPL_ID,
X_ITEM_NAME,
X_MENU_NAME,
X_FLEXFIELD_NAME,
X_FLEXFIELD_APPLICATION_ID,
X_TABULAR_FUNCTION_CODE,
X_TIP_TYPE,
X_TIP_MESSAGE_NAME,
X_TIP_MESSAGE_APPLICATION_ID,
X_FLEX_SEGMENT_LIST,
X_ENTITY_ID,
X_ANCHOR,
X_POPLIST_VIEW_USAGE_NAME,
X_USER_CUSTOMIZABLE,
X_ADMIN_CUSTOMIZABLE,
X_INVOKE_FUNCTION_NAME,
X_EXPANSION,
X_ALS_MAX_LENGTH,
X_SORTBY_VIEW_ATTRIBUTE_NAME,
X_ICX_CUSTOM_CALL,
X_INITIAL_SORT_SEQUENCE,
X_CUSTOMIZATION_APPLICATION_ID,
X_CUSTOMIZATION_CODE,
X_CREATION_DATE,
X_CREATED_BY,
X_LAST_UPDATE_DATE,
X_LAST_UPDATED_BY,
X_LAST_UPDATE_LOGIN,
X_ATTRIBUTE_CATEGORY,
X_ATTRIBUTE1,
X_ATTRIBUTE2,
X_ATTRIBUTE3,
X_ATTRIBUTE4,
X_ATTRIBUTE5,
X_ATTRIBUTE6,
X_ATTRIBUTE7,
X_ATTRIBUTE8,
X_ATTRIBUTE9,
X_ATTRIBUTE10,
X_ATTRIBUTE11,
X_ATTRIBUTE12,
X_ATTRIBUTE13,
X_ATTRIBUTE14,
X_ATTRIBUTE15
);

open c;
fetch c into X_ROWID;
if (c%notfound) then
close c;
raise no_data_found;
end if;
close c;

insert into AK_REGION_ITEMS_TL (
REGION_APPLICATION_ID,
REGION_CODE,
ATTRIBUTE_APPLICATION_ID,
ATTRIBUTE_CODE,
LANGUAGE,
ATTRIBUTE_LABEL_LONG,
ATTRIBUTE_LABEL_SHORT,
DESCRIPTION,
SOURCE_LANG,
CREATED_BY,
CREATION_DATE,
LAST_UPDATED_BY,
LAST_UPDATE_DATE,
LAST_UPDATE_LOGIN
) select
X_REGION_APPLICATION_ID,
X_REGION_CODE,
X_ATTRIBUTE_APPLICATION_ID,
X_ATTRIBUTE_CODE,
L.LANGUAGE_CODE,
X_ATTRIBUTE_LABEL_LONG,
X_ATTRIBUTE_LABEL_SHORT,
X_DESCRIPTION,
userenv('LANG'),
X_CREATED_BY,
X_CREATION_DATE,
X_LAST_UPDATED_BY,
X_LAST_UPDATE_DATE,
X_LAST_UPDATE_LOGIN
from FND_LANGUAGES L
where L.INSTALLED_FLAG in ('I', 'B')
and not exists
(select NULL
from AK_REGION_ITEMS_TL T
where T.REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and T.REGION_CODE = X_REGION_CODE
and T.ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and T.ATTRIBUTE_CODE = X_ATTRIBUTE_CODE
and T.LANGUAGE = L.LANGUAGE_CODE);
end INSERT_ROW;

procedure LOCK_ROW (
X_REGION_APPLICATION_ID in NUMBER,
X_REGION_CODE in VARCHAR2,
X_ATTRIBUTE_APPLICATION_ID in NUMBER,
X_ATTRIBUTE_CODE in VARCHAR2,
X_OBJECT_ATTRIBUTE_FLAG in VARCHAR2,
X_ATTRIBUTE_CATEGORY in VARCHAR2,
X_ATTRIBUTE1 in VARCHAR2,
X_ATTRIBUTE2 in VARCHAR2,
X_ATTRIBUTE3 in VARCHAR2,
X_ATTRIBUTE4 in VARCHAR2,
X_ATTRIBUTE5 in VARCHAR2,
X_ATTRIBUTE6 in VARCHAR2,
X_ATTRIBUTE7 in VARCHAR2,
X_ATTRIBUTE8 in VARCHAR2,
X_ATTRIBUTE9 in VARCHAR2,
X_ATTRIBUTE10 in VARCHAR2,
X_ATTRIBUTE11 in VARCHAR2,
X_ATTRIBUTE12 in VARCHAR2,
X_ATTRIBUTE13 in VARCHAR2,
X_ATTRIBUTE14 in VARCHAR2,
X_ATTRIBUTE15 in VARCHAR2,
X_DISPLAY_SEQUENCE in NUMBER,
X_NODE_DISPLAY_FLAG in VARCHAR2,
X_NODE_QUERY_FLAG in VARCHAR2,
X_ATTRIBUTE_LABEL_LENGTH in NUMBER,
X_BOLD in VARCHAR2,
X_ITALIC in VARCHAR2,
X_VERTICAL_ALIGNMENT in VARCHAR2,
X_HORIZONTAL_ALIGNMENT in VARCHAR2,
X_ITEM_STYLE in VARCHAR2,
X_ATTRIBUTE_LABEL_LONG in VARCHAR2,
X_DESCRIPTION IN VARCHAR2,
X_SECURITY_CODE in VARCHAR2,
X_UPDATE_FLAG in VARCHAR2,
X_REQUIRED_FLAG in VARCHAR2,
X_DISPLAY_VALUE_LENGTH in NUMBER,
X_LOV_REGION_APPLICATION_ID in NUMBER,
X_LOV_REGION_CODE in VARCHAR2,
X_LOV_FOREIGN_KEY_NAME in VARCHAR2,
X_LOV_ATTRIBUTE_APPLICATION_ID in NUMBER,
X_LOV_ATTRIBUTE_CODE in VARCHAR2,
X_LOV_DEFAULT_FLAG in VARCHAR2,
X_REGION_DEFAULTING_API_PKG in VARCHAR2,
X_REGION_DEFAULTING_API_PROC in VARCHAR2,
X_REGION_VALIDATION_API_PKG in VARCHAR2,
X_REGION_VALIDATION_API_PROC in VARCHAR2,
X_ORDER_SEQUENCE in NUMBER,
X_ORDER_DIRECTION in VARCHAR2,
X_DEFAULT_VALUE_VARCHAR2 in VARCHAR2,
X_DEFAULT_VALUE_NUMBER in NUMBER,
X_DEFAULT_VALUE_DATE in DATE,
X_ITEM_NAME in VARCHAR2,
X_DISPLAY_HEIGHT IN NUMBER,
X_SUBMIT IN VARCHAR2,
X_ENCRYPT IN VARCHAR2,
X_VIEW_USAGE_NAME IN VARCHAR2,
X_VIEW_ATTRIBUTE_NAME IN VARCHAR2,
X_CSS_CLASS_NAME IN VARCHAR2,
X_CSS_LABEL_CLASS_NAME IN VARCHAR2,
X_URL IN VARCHAR2,
X_POPLIST_VIEWOBJECT IN VARCHAR2,
X_POPLIST_DISPLAY_ATTRIBUTE IN VARCHAR2,
X_POPLIST_VALUE_ATTRIBUTE IN VARCHAR2,
X_IMAGE_FILE_NAME IN VARCHAR2,
X_NESTED_REGION_CODE IN VARCHAR2,
X_NESTED_REGION_APPL_ID IN NUMBER,
X_MENU_NAME IN VARCHAR2,
X_FLEXFIELD_NAME IN VARCHAR2,
X_FLEXFIELD_APPLICATION_ID NUMBER,
X_TABULAR_FUNCTION_CODE IN VARCHAR2,
X_TIP_TYPE IN VARCHAR2,
X_TIP_MESSAGE_NAME VARCHAR2,
X_TIP_MESSAGE_APPLICATION_ID NUMBER,
X_FLEX_SEGMENT_LIST VARCHAR2,
X_ENTITY_ID VARCHAR2,
X_ANCHOR VARCHAR2,
X_POPLIST_VIEW_USAGE_NAME VARCHAR2,
X_USER_CUSTOMIZABLE VARCHAR2,
X_ADMIN_CUSTOMIZABLE VARCHAR2,
X_INVOKE_FUNCTION_NAME VARCHAR2,
X_ATTRIBUTE_LABEL_SHORT VARCHAR2,
X_EXPANSION NUMBER,
X_ALS_MAX_LENGTH NUMBER,
X_SORTBY_VIEW_ATTRIBUTE_NAME VARCHAR2,
X_ICX_CUSTOM_CALL VARCHAR2,
X_INITIAL_SORT_SEQUENCE VARCHAR2
) is
cursor c is select
OBJECT_ATTRIBUTE_FLAG,
ATTRIBUTE_CATEGORY,
ATTRIBUTE1,
ATTRIBUTE2,
ATTRIBUTE3,
ATTRIBUTE4,
ATTRIBUTE5,
ATTRIBUTE6,
ATTRIBUTE7,
ATTRIBUTE8,
ATTRIBUTE9,
ATTRIBUTE10,
ATTRIBUTE11,
ATTRIBUTE12,
ATTRIBUTE13,
ATTRIBUTE14,
ATTRIBUTE15,
DISPLAY_SEQUENCE,
NODE_DISPLAY_FLAG,
NODE_QUERY_FLAG,
ATTRIBUTE_LABEL_LENGTH,
BOLD,
ITALIC,
VERTICAL_ALIGNMENT,
HORIZONTAL_ALIGNMENT,
SECURITY_CODE,
UPDATE_FLAG,
REQUIRED_FLAG,
DISPLAY_VALUE_LENGTH,
LOV_REGION_APPLICATION_ID,
LOV_REGION_CODE,
LOV_FOREIGN_KEY_NAME,
LOV_ATTRIBUTE_APPLICATION_ID,
LOV_ATTRIBUTE_CODE,
LOV_DEFAULT_FLAG,
REGION_DEFAULTING_API_PKG,
REGION_DEFAULTING_API_PROC,
REGION_VALIDATION_API_PKG,
REGION_VALIDATION_API_PROC,
ORDER_SEQUENCE,
ORDER_DIRECTION,
DEFAULT_VALUE_VARCHAR2,
DEFAULT_VALUE_NUMBER,
DEFAULT_VALUE_DATE,
ITEM_STYLE,
DISPLAY_HEIGHT,
SUBMIT,
ENCRYPT,
VIEW_USAGE_NAME,
VIEW_ATTRIBUTE_NAME,
CSS_CLASS_NAME,
CSS_LABEL_CLASS_NAME,
URL,
POPLIST_VIEWOBJECT,
POPLIST_DISPLAY_ATTRIBUTE,
POPLIST_VALUE_ATTRIBUTE,
IMAGE_FILE_NAME,
NESTED_REGION_CODE,
NESTED_REGION_APPLICATION_ID,
ITEM_NAME,
MENU_NAME,
FLEXFIELD_NAME,
FLEXFIELD_APPLICATION_ID,
TABULAR_FUNCTION_CODE,
TIP_TYPE,
TIP_MESSAGE_NAME,
TIP_MESSAGE_APPLICATION_ID,
FLEX_SEGMENT_LIST,
ENTITY_ID,
ANCHOR,
POPLIST_VIEW_USAGE_NAME,
USER_CUSTOMIZABLE,
ADMIN_CUSTOMIZABLE,
INVOKE_FUNCTION_NAME,
EXPANSION,
ALS_MAX_LENGTH,
SORTBY_VIEW_ATTRIBUTE_NAME,
ICX_CUSTOM_CALL,
INITIAL_SORT_SEQUENCE
from AK_REGION_ITEMS
where REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and REGION_CODE = X_REGION_CODE
and ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and ATTRIBUTE_CODE = X_ATTRIBUTE_CODE
for update of REGION_APPLICATION_ID nowait;
recinfo c%rowtype;

cursor c1 is select
ATTRIBUTE_LABEL_LONG,
ATTRIBUTE_LABEL_SHORT,
DESCRIPTION
from AK_REGION_ITEMS_TL
where REGION_CODE = X_REGION_CODE
and REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and ATTRIBUTE_CODE = X_ATTRIBUTE_CODE
and ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and LANGUAGE = userenv('LANG')
for update of REGION_CODE nowait;
tlinfo c1%rowtype;

begin
open c;
fetch c into recinfo;
if (c%notfound) then
close c;
fnd_message.set_name('FND', 'FORM_RECORD_DELETED');
app_exception.raise_exception;
end if;
close c;
if ( (recinfo.OBJECT_ATTRIBUTE_FLAG = X_OBJECT_ATTRIBUTE_FLAG)
AND ((recinfo.ATTRIBUTE_CATEGORY = X_ATTRIBUTE_CATEGORY)
OR ((recinfo.ATTRIBUTE_CATEGORY is null)
AND (X_ATTRIBUTE_CATEGORY is null)))
AND ((recinfo.ATTRIBUTE1 = X_ATTRIBUTE1)
OR ((recinfo.ATTRIBUTE1 is null)
AND (X_ATTRIBUTE1 is null)))
AND ((recinfo.ATTRIBUTE2 = X_ATTRIBUTE2)
OR ((recinfo.ATTRIBUTE2 is null)
AND (X_ATTRIBUTE2 is null)))
AND ((recinfo.ATTRIBUTE3 = X_ATTRIBUTE3)
OR ((recinfo.ATTRIBUTE3 is null)
AND (X_ATTRIBUTE3 is null)))
AND ((recinfo.ATTRIBUTE4 = X_ATTRIBUTE4)
OR ((recinfo.ATTRIBUTE4 is null)
AND (X_ATTRIBUTE4 is null)))
AND ((recinfo.ATTRIBUTE5 = X_ATTRIBUTE5)
OR ((recinfo.ATTRIBUTE5 is null)
AND (X_ATTRIBUTE5 is null)))
AND ((recinfo.ATTRIBUTE6 = X_ATTRIBUTE6)
OR ((recinfo.ATTRIBUTE6 is null)
AND (X_ATTRIBUTE6 is null)))
AND ((recinfo.ATTRIBUTE7 = X_ATTRIBUTE7)
OR ((recinfo.ATTRIBUTE7 is null)
AND (X_ATTRIBUTE7 is null)))
AND ((recinfo.ATTRIBUTE8 = X_ATTRIBUTE8)
OR ((recinfo.ATTRIBUTE8 is null)
AND (X_ATTRIBUTE8 is null)))
AND ((recinfo.ATTRIBUTE9 = X_ATTRIBUTE9)
OR ((recinfo.ATTRIBUTE9 is null)
AND (X_ATTRIBUTE9 is null)))
AND ((recinfo.ATTRIBUTE10 = X_ATTRIBUTE10)
OR ((recinfo.ATTRIBUTE10 is null)
AND (X_ATTRIBUTE10 is null)))
AND ((recinfo.ATTRIBUTE11 = X_ATTRIBUTE11)
OR ((recinfo.ATTRIBUTE11 is null)
AND (X_ATTRIBUTE11 is null)))
AND ((recinfo.ATTRIBUTE12 = X_ATTRIBUTE12)
OR ((recinfo.ATTRIBUTE12 is null)
AND (X_ATTRIBUTE12 is null)))
AND ((recinfo.ATTRIBUTE13 = X_ATTRIBUTE13)
OR ((recinfo.ATTRIBUTE13 is null)
AND (X_ATTRIBUTE13 is null)))
AND ((recinfo.ATTRIBUTE14 = X_ATTRIBUTE14)
OR ((recinfo.ATTRIBUTE14 is null)
AND (X_ATTRIBUTE14 is null)))
AND ((recinfo.ATTRIBUTE15 = X_ATTRIBUTE15)
OR ((recinfo.ATTRIBUTE15 is null)
AND (X_ATTRIBUTE15 is null)))
AND (recinfo.DISPLAY_SEQUENCE = X_DISPLAY_SEQUENCE)
AND (recinfo.NODE_DISPLAY_FLAG = X_NODE_DISPLAY_FLAG)
AND (recinfo.NODE_QUERY_FLAG = X_NODE_QUERY_FLAG)
AND (recinfo.ATTRIBUTE_LABEL_LENGTH = X_ATTRIBUTE_LABEL_LENGTH)
AND (recinfo.BOLD = X_BOLD)
AND (recinfo.ITALIC = X_ITALIC)
AND (recinfo.VERTICAL_ALIGNMENT = X_VERTICAL_ALIGNMENT)
AND (recinfo.HORIZONTAL_ALIGNMENT = X_HORIZONTAL_ALIGNMENT)
and ((recinfo.SECURITY_CODE = x_SECURITY_CODE)
or ((recinfo.SECURITY_CODE is null)
and (x_SECURITY_CODE is null)))
AND (recinfo.UPDATE_FLAG = X_UPDATE_FLAG)
AND (recinfo.REQUIRED_FLAG = X_REQUIRED_FLAG)
AND (recinfo.DISPLAY_VALUE_LENGTH = X_DISPLAY_VALUE_LENGTH)
and ((recinfo.LOV_REGION_APPLICATION_ID = x_LOV_REGION_APPLICATION_ID)
or ((recinfo.LOV_REGION_APPLICATION_ID is null)
and (x_LOV_REGION_APPLICATION_ID is null)))
and ((recinfo.LOV_REGION_CODE = x_LOV_REGION_CODE)
or ((recinfo.LOV_REGION_CODE is null)
and (x_LOV_REGION_CODE is null)))
and ((recinfo.LOV_FOREIGN_KEY_NAME = x_LOV_FOREIGN_KEY_NAME)
or ((recinfo.LOV_FOREIGN_KEY_NAME is null)
and (x_LOV_FOREIGN_KEY_NAME is null)))
and ((recinfo.LOV_ATTRIBUTE_APPLICATION_ID = x_LOV_ATTRIBUTE_APPLICATION_ID)
or ((recinfo.LOV_ATTRIBUTE_APPLICATION_ID is null)
and (x_LOV_ATTRIBUTE_APPLICATION_ID is null)))
and ((recinfo.LOV_ATTRIBUTE_CODE = x_LOV_ATTRIBUTE_CODE)
or ((recinfo.LOV_ATTRIBUTE_CODE is null)
and (x_LOV_ATTRIBUTE_CODE is null)))
and ((recinfo.LOV_DEFAULT_FLAG = x_LOV_DEFAULT_FLAG)
or ((recinfo.LOV_DEFAULT_FLAG is null)
and (x_LOV_DEFAULT_FLAG is null)))
and ((recinfo.REGION_DEFAULTING_API_PKG = x_REGION_DEFAULTING_API_PKG)
or ((recinfo.REGION_DEFAULTING_API_PKG is null)
and (x_REGION_DEFAULTING_API_PKG is null)))
and ((recinfo.REGION_DEFAULTING_API_PROC = x_REGION_DEFAULTING_API_PROC)
or ((recinfo.REGION_DEFAULTING_API_PROC is null)
and (x_REGION_DEFAULTING_API_PROC is null)))
and ((recinfo.REGION_VALIDATION_API_PKG = x_REGION_VALIDATION_API_PKG)
or ((recinfo.REGION_VALIDATION_API_PKG is null)
and (x_REGION_VALIDATION_API_PKG is null)))
and ((recinfo.REGION_VALIDATION_API_PROC = x_REGION_VALIDATION_API_PROC)
or ((recinfo.REGION_VALIDATION_API_PROC is null)
and (x_REGION_VALIDATION_API_PROC is null)))
and ((recinfo.ORDER_SEQUENCE = x_ORDER_SEQUENCE)
or ((recinfo.ORDER_SEQUENCE is null)
and (x_ORDER_SEQUENCE is null)))
and ((recinfo.ORDER_DIRECTION = x_ORDER_DIRECTION)
or ((recinfo.ORDER_DIRECTION is null)
and (x_ORDER_DIRECTION is null)))
and ((recinfo.DEFAULT_VALUE_VARCHAR2 = x_DEFAULT_VALUE_VARCHAR2)
or ((recinfo.DEFAULT_VALUE_VARCHAR2 is null)
and (x_DEFAULT_VALUE_VARCHAR2 is null)))
and ((recinfo.DEFAULT_VALUE_NUMBER = x_DEFAULT_VALUE_NUMBER)
or ((recinfo.DEFAULT_VALUE_NUMBER is null)
and (x_DEFAULT_VALUE_NUMBER is null)))
and ((recinfo.DEFAULT_VALUE_DATE = x_DEFAULT_VALUE_DATE)
or ((recinfo.DEFAULT_VALUE_DATE is null)
and (x_DEFAULT_VALUE_DATE is null)))
AND (recinfo.ITEM_STYLE = X_ITEM_STYLE)
and ((recinfo.DISPLAY_HEIGHT = X_DISPLAY_HEIGHT)
or ((recinfo.DISPLAY_HEIGHT is null)
and (X_DISPLAY_HEIGHT is null)))
and ((recinfo.SUBMIT = X_SUBMIT)
or ((recinfo.SUBMIT is null)
and (X_SUBMIT is null)))
and ((recinfo.ENCRYPT = X_ENCRYPT)
or ((recinfo.ENCRYPT is null)
and (X_ENCRYPT is null)))
and ((recinfo.VIEW_USAGE_NAME = X_VIEW_USAGE_NAME)
or ((recinfo.VIEW_USAGE_NAME is null)
and (X_VIEW_USAGE_NAME is null)))
and ((recinfo.VIEW_ATTRIBUTE_NAME = X_VIEW_ATTRIBUTE_NAME)
or ((recinfo.VIEW_ATTRIBUTE_NAME is null)
and (X_VIEW_ATTRIBUTE_NAME is null)))
and ((recinfo.CSS_CLASS_NAME = X_CSS_CLASS_NAME)
or ((recinfo.CSS_CLASS_NAME is null)
and (X_CSS_CLASS_NAME is null)))
and ((recinfo.CSS_LABEL_CLASS_NAME = X_CSS_LABEL_CLASS_NAME)
or ((recinfo.CSS_LABEL_CLASS_NAME is null)
and (X_CSS_LABEL_CLASS_NAME is null)))
and ((recinfo.URL = X_URL)
or ((recinfo.URL is null)
and (X_URL is null)))
and ((recinfo.POPLIST_VIEWOBJECT = X_POPLIST_VIEWOBJECT)
or ((recinfo.POPLIST_VIEWOBJECT is null)
and (X_POPLIST_VIEWOBJECT is null)))
and ((recinfo.POPLIST_DISPLAY_ATTRIBUTE = X_POPLIST_DISPLAY_ATTRIBUTE)
or ((recinfo.POPLIST_DISPLAY_ATTRIBUTE is null)
and (X_POPLIST_DISPLAY_ATTRIBUTE is null)))
and ((recinfo.POPLIST_VALUE_ATTRIBUTE = X_POPLIST_VALUE_ATTRIBUTE)
or ((recinfo.POPLIST_VALUE_ATTRIBUTE is null)
and (X_POPLIST_VALUE_ATTRIBUTE is null)))
and ((recinfo.IMAGE_FILE_NAME = X_IMAGE_FILE_NAME)
or ((recinfo.IMAGE_FILE_NAME is null)
and (X_IMAGE_FILE_NAME is null)))
and ((recinfo.NESTED_REGION_APPLICATION_ID = X_NESTED_REGION_APPL_ID)
or ((recinfo.NESTED_REGION_APPLICATION_ID is null)
and (X_NESTED_REGION_APPL_ID is null)))
and ((recinfo.NESTED_REGION_CODE = X_NESTED_REGION_CODE)
or ((recinfo.NESTED_REGION_CODE is null)
and (X_NESTED_REGION_CODE is null)))
and ((recinfo.ITEM_NAME = X_ITEM_NAME)
or ((recinfo.ITEM_NAME is null)
and (X_ITEM_NAME is null)))
and ((recinfo.MENU_NAME = X_MENU_NAME)
or ((recinfo.MENU_NAME is null)
and (X_MENU_NAME is null)))
and ((recinfo.FLEXFIELD_NAME = X_FLEXFIELD_NAME)
or ((recinfo.FLEXFIELD_NAME is null)
and (X_FLEXFIELD_NAME is null)))
and ((recinfo.FLEXFIELD_APPLICATION_ID = X_FLEXFIELD_APPLICATION_ID)
or ((recinfo.FLEXFIELD_APPLICATION_ID is null)
and (X_FLEXFIELD_APPLICATION_ID is null)))
and ((recinfo.TABULAR_FUNCTION_CODE = X_TABULAR_FUNCTION_CODE)
or ((recinfo.TABULAR_FUNCTION_CODE is null)
and (X_TABULAR_FUNCTION_CODE is null)))
and ((recinfo.TIP_TYPE = X_TIP_TYPE)
or ((recinfo.TIP_TYPE is null)
and (X_TIP_TYPE is null)))
and ((recinfo.TIP_MESSAGE_NAME = X_TIP_MESSAGE_NAME)
or ((recinfo.TIP_MESSAGE_NAME is null)
and (X_TIP_MESSAGE_NAME is null)))
and ((recinfo.TIP_MESSAGE_APPLICATION_ID = X_TIP_MESSAGE_APPLICATION_ID)
or ((recinfo.TIP_MESSAGE_APPLICATION_ID is null)
and (X_TIP_MESSAGE_APPLICATION_ID is null)))
and ((recinfo.FLEX_SEGMENT_LIST = X_FLEX_SEGMENT_LIST)
or ((recinfo.FLEX_SEGMENT_LIST is null)
and (X_FLEX_SEGMENT_LIST is null)))
and ((recinfo.ENTITY_ID = X_ENTITY_ID)
or ((recinfo.ENTITY_ID is null)
and (X_ENTITY_ID is null)))
and ((recinfo.ANCHOR = X_ANCHOR)
or ((recinfo.ANCHOR is null)
and (X_ANCHOR is null)))
and ((recinfo.POPLIST_VIEW_USAGE_NAME = X_POPLIST_VIEW_USAGE_NAME)
or ((recinfo.POPLIST_VIEW_USAGE_NAME is null)
and (X_POPLIST_VIEW_USAGE_NAME is null)))
and ((recinfo.USER_CUSTOMIZABLE = X_USER_CUSTOMIZABLE)
or ((recinfo.USER_CUSTOMIZABLE is null)
and (X_USER_CUSTOMIZABLE is null)))
and ((recinfo.ADMIN_CUSTOMIZABLE = X_ADMIN_CUSTOMIZABLE)
or ((recinfo.ADMIN_CUSTOMIZABLE is null)
and (X_ADMIN_CUSTOMIZABLE is null)))
and ((recinfo.INVOKE_FUNCTION_NAME = X_INVOKE_FUNCTION_NAME)
or ((recinfo.INVOKE_FUNCTION_NAME is null)
and (X_INVOKE_FUNCTION_NAME is null)))
and ((recinfo.EXPANSION = X_EXPANSION)
or ((recinfo.EXPANSION is null)
and (X_EXPANSION is null)))
and ((recinfo.ALS_MAX_LENGTH = X_ALS_MAX_LENGTH)
or ((recinfo.ALS_MAX_LENGTH is null)
and (X_ALS_MAX_LENGTH is null)))
and ((recinfo.SORTBY_VIEW_ATTRIBUTE_NAME = X_SORTBY_VIEW_ATTRIBUTE_NAME)
or ((recinfo.SORTBY_VIEW_ATTRIBUTE_NAME is null)
and (X_SORTBY_VIEW_ATTRIBUTE_NAME is null)))
and ((recinfo.ICX_CUSTOM_CALL = X_ICX_CUSTOM_CALL)
or ((recinfo.ICX_CUSTOM_CALL is null)
and (X_ICX_CUSTOM_CALL is null)))
and ((recinfo.INITIAL_SORT_SEQUENCE= X_INITIAL_SORT_SEQUENCE)
or ((recinfo.INITIAL_SORT_SEQUENCE is null)
and (X_INITIAL_SORT_SEQUENCE is null)))
) then
null;
else
fnd_message.set_name('FND', 'FORM_RECORD_CHANGED');
app_exception.raise_exception;
end if;

open c1;
fetch c1 into tlinfo;
if (c1%notfound) then
close c1;
return;
end if;
close c1;

if ((tlinfo.attribute_label_long = X_attribute_label_long)
OR ((tlinfo.attribute_label_long is null)
AND (X_attribute_label_long is null)))
and ((tlinfo.attribute_label_short = X_attribute_label_short)
OR ((tlinfo.attribute_label_short is null)
AND (X_attribute_label_short is null)))
and ((tlinfo.description = X_description)
OR ((tlinfo.description is null)
AND (X_description is null))) then
null;
else
fnd_message.set_name('FND', 'FORM_RECORD_CHANGED');
app_exception.raise_exception;
end if;
return;
end LOCK_ROW;

procedure UPDATE_ROW (
X_REGION_APPLICATION_ID in NUMBER,
X_REGION_CODE in VARCHAR2,
X_ATTRIBUTE_APPLICATION_ID in NUMBER,
X_ATTRIBUTE_CODE in VARCHAR2,
X_DISPLAY_SEQUENCE in NUMBER,
X_NODE_DISPLAY_FLAG in VARCHAR2,
X_NODE_QUERY_FLAG in VARCHAR2,
X_ATTRIBUTE_LABEL_LENGTH in NUMBER,
X_BOLD in VARCHAR2,
X_ITALIC in VARCHAR2,
X_VERTICAL_ALIGNMENT in VARCHAR2,
X_HORIZONTAL_ALIGNMENT in VARCHAR2,
X_ITEM_STYLE in VARCHAR2,
X_OBJECT_ATTRIBUTE_FLAG in VARCHAR2,
X_ATTRIBUTE_LABEL_LONG in VARCHAR2,
X_DESCRIPTION IN VARCHAR2,
X_SECURITY_CODE in VARCHAR2,
X_UPDATE_FLAG in VARCHAR2,
X_REQUIRED_FLAG in VARCHAR2,
X_DISPLAY_VALUE_LENGTH in NUMBER,
X_LOV_REGION_APPLICATION_ID in NUMBER,
X_LOV_REGION_CODE in VARCHAR2,
X_LOV_FOREIGN_KEY_NAME in VARCHAR2,
X_LOV_ATTRIBUTE_APPLICATION_ID in NUMBER,
X_LOV_ATTRIBUTE_CODE in VARCHAR2,
X_LOV_DEFAULT_FLAG in VARCHAR2,
X_REGION_DEFAULTING_API_PKG in VARCHAR2,
X_REGION_DEFAULTING_API_PROC in VARCHAR2,
X_REGION_VALIDATION_API_PKG in VARCHAR2,
X_REGION_VALIDATION_API_PROC in VARCHAR2,
X_ORDER_SEQUENCE in NUMBER,
X_ORDER_DIRECTION in VARCHAR2,
X_DEFAULT_VALUE_VARCHAR2 in VARCHAR2,
X_DEFAULT_VALUE_NUMBER in NUMBER,
X_DEFAULT_VALUE_DATE in DATE,
X_ITEM_NAME in VARCHAR2,
X_DISPLAY_HEIGHT IN NUMBER,
X_SUBMIT IN VARCHAR2,
X_ENCRYPT IN VARCHAR2,
X_VIEW_USAGE_NAME IN VARCHAR2,
X_VIEW_ATTRIBUTE_NAME IN VARCHAR2,
X_CSS_CLASS_NAME IN VARCHAR2,
X_CSS_LABEL_CLASS_NAME IN VARCHAR2,
X_URL IN VARCHAR2,
X_POPLIST_VIEWOBJECT IN VARCHAR2,
X_POPLIST_DISPLAY_ATTRIBUTE IN VARCHAR2,
X_POPLIST_VALUE_ATTRIBUTE IN VARCHAR2,
X_IMAGE_FILE_NAME IN VARCHAR2,
X_NESTED_REGION_CODE IN VARCHAR2,
X_NESTED_REGION_APPL_ID IN NUMBER,
X_MENU_NAME IN VARCHAR2,
X_FLEXFIELD_NAME IN VARCHAR2,
X_FLEXFIELD_APPLICATION_ID NUMBER,
X_TABULAR_FUNCTION_CODE IN VARCHAR2,
X_TIP_TYPE IN VARCHAR2,
X_TIP_MESSAGE_NAME VARCHAR2,
X_TIP_MESSAGE_APPLICATION_ID NUMBER,
X_FLEX_SEGMENT_LIST VARCHAR2,
X_ENTITY_ID VARCHAR2,
X_ANCHOR VARCHAR2,
X_POPLIST_VIEW_USAGE_NAME VARCHAR2,
X_USER_CUSTOMIZABLE VARCHAR2 := NULL,
X_ADMIN_CUSTOMIZABLE VARCHAR2 := 'Y',
X_INVOKE_FUNCTION_NAME VARCHAR2 := NULL,
X_ATTRIBUTE_LABEL_SHORT VARCHAR2 := NULL,
X_EXPANSION NUMBER := NULL,
X_ALS_MAX_LENGTH NUMBER := NULL,
X_SORTBY_VIEW_ATTRIBUTE_NAME VARCHAR2 := NULL,
X_ICX_CUSTOM_CALL VARCHAR2 := NULL,
X_INITIAL_SORT_SEQUENCE VARCHAR2 := NULL,
X_CUSTOMIZATION_APPLICATION_ID IN NUMBER := NULL,
X_CUSTOMIZATION_CODE IN VARCHAR2 := NULL,
X_LAST_UPDATE_DATE in DATE,
X_LAST_UPDATED_BY in NUMBER,
X_LAST_UPDATE_LOGIN in NUMBER,
X_ATTRIBUTE_CATEGORY in VARCHAR2,
X_ATTRIBUTE1 in VARCHAR2,
X_ATTRIBUTE2 in VARCHAR2,
X_ATTRIBUTE3 in VARCHAR2,
X_ATTRIBUTE4 in VARCHAR2,
X_ATTRIBUTE5 in VARCHAR2,
X_ATTRIBUTE6 in VARCHAR2,
X_ATTRIBUTE7 in VARCHAR2,
X_ATTRIBUTE8 in VARCHAR2,
X_ATTRIBUTE9 in VARCHAR2,
X_ATTRIBUTE10 in VARCHAR2,
X_ATTRIBUTE11 in VARCHAR2,
X_ATTRIBUTE12 in VARCHAR2,
X_ATTRIBUTE13 in VARCHAR2,
X_ATTRIBUTE14 in VARCHAR2,
X_ATTRIBUTE15 in VARCHAR2
) is
begin
update AK_REGION_ITEMS set
REGION_APPLICATION_ID = X_REGION_APPLICATION_ID,
REGION_CODE = X_REGION_CODE,
ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID,
ATTRIBUTE_CODE = X_ATTRIBUTE_CODE,
DISPLAY_SEQUENCE = X_DISPLAY_SEQUENCE,
NODE_DISPLAY_FLAG = X_NODE_DISPLAY_FLAG,
NODE_QUERY_FLAG = X_NODE_QUERY_FLAG,
ATTRIBUTE_LABEL_LENGTH = X_ATTRIBUTE_LABEL_LENGTH,
BOLD = X_BOLD,
ITALIC = X_ITALIC,
VERTICAL_ALIGNMENT = X_VERTICAL_ALIGNMENT,
HORIZONTAL_ALIGNMENT = X_HORIZONTAL_ALIGNMENT,
ITEM_STYLE = X_ITEM_STYLE,
SECURITY_CODE = X_SECURITY_CODE,
UPDATE_FLAG = X_UPDATE_FLAG,
REQUIRED_FLAG = X_REQUIRED_FLAG,
DISPLAY_VALUE_LENGTH = X_DISPLAY_VALUE_LENGTH,
LOV_REGION_APPLICATION_ID = X_LOV_REGION_APPLICATION_ID,
LOV_REGION_CODE = X_LOV_REGION_CODE,
LOV_FOREIGN_KEY_NAME = X_LOV_FOREIGN_KEY_NAME,
LOV_ATTRIBUTE_APPLICATION_ID = X_LOV_ATTRIBUTE_APPLICATION_ID,
LOV_ATTRIBUTE_CODE = X_LOV_ATTRIBUTE_CODE,
LOV_DEFAULT_FLAG = X_LOV_DEFAULT_FLAG,
REGION_DEFAULTING_API_PKG = X_REGION_DEFAULTING_API_PKG,
REGION_DEFAULTING_API_PROC = X_REGION_DEFAULTING_API_PROC,
REGION_VALIDATION_API_PKG = X_REGION_VALIDATION_API_PKG,
REGION_VALIDATION_API_PROC = X_REGION_VALIDATION_API_PROC,
ORDER_SEQUENCE = X_ORDER_SEQUENCE,
ORDER_DIRECTION = X_ORDER_DIRECTION,
DEFAULT_VALUE_VARCHAR2 = X_DEFAULT_VALUE_VARCHAR2,
DEFAULT_VALUE_NUMBER = X_DEFAULT_VALUE_NUMBER,
DEFAULT_VALUE_DATE = X_DEFAULT_VALUE_DATE,
OBJECT_ATTRIBUTE_FLAG = X_OBJECT_ATTRIBUTE_FLAG,
DISPLAY_HEIGHT = X_DISPLAY_HEIGHT,
SUBMIT = X_SUBMIT,
ENCRYPT = X_ENCRYPT,
VIEW_USAGE_NAME = X_VIEW_USAGE_NAME,
VIEW_ATTRIBUTE_NAME = X_VIEW_ATTRIBUTE_NAME,
CSS_CLASS_NAME = X_CSS_CLASS_NAME,
CSS_LABEL_CLASS_NAME = X_CSS_LABEL_CLASS_NAME,
URL = X_URL,
POPLIST_VIEWOBJECT = X_POPLIST_VIEWOBJECT,
POPLIST_DISPLAY_ATTRIBUTE = X_POPLIST_DISPLAY_ATTRIBUTE,
POPLIST_VALUE_ATTRIBUTE = X_POPLIST_VALUE_ATTRIBUTE,
IMAGE_FILE_NAME = X_IMAGE_FILE_NAME,
NESTED_REGION_APPLICATION_ID = X_NESTED_REGION_APPL_ID,
NESTED_REGION_CODE = X_NESTED_REGION_CODE,
ITEM_NAME = X_ITEM_NAME,
MENU_NAME = X_MENU_NAME,
FLEXFIELD_NAME = X_FLEXFIELD_NAME,
FLEXFIELD_APPLICATION_ID = X_FLEXFIELD_APPLICATION_ID,
TABULAR_FUNCTION_CODE = X_TABULAR_FUNCTION_CODE,
TIP_TYPE = X_TIP_TYPE,
TIP_MESSAGE_NAME = X_TIP_MESSAGE_NAME,
TIP_MESSAGE_APPLICATION_ID = X_TIP_MESSAGE_APPLICATION_ID,
FLEX_SEGMENT_LIST = X_FLEX_SEGMENT_LIST,
ENTITY_ID = X_ENTITY_ID,
ANCHOR = X_ANCHOR,
POPLIST_VIEW_USAGE_NAME = X_POPLIST_VIEW_USAGE_NAME,
USER_CUSTOMIZABLE = X_USER_CUSTOMIZABLE,
ADMIN_CUSTOMIZABLE = X_ADMIN_CUSTOMIZABLE,
INVOKE_FUNCTION_NAME = X_INVOKE_FUNCTION_NAME,
EXPANSION = X_EXPANSION,
ALS_MAX_LENGTH = X_ALS_MAX_LENGTH,
SORTBY_VIEW_ATTRIBUTE_NAME = X_SORTBY_VIEW_ATTRIBUTE_NAME,
ICX_CUSTOM_CALL = X_ICX_CUSTOM_CALL,
INITIAL_SORT_SEQUENCE = X_INITIAL_SORT_SEQUENCE,
CUSTOMIZATION_APPLICATION_ID = X_CUSTOMIZATION_APPLICATION_ID,
CUSTOMIZATION_CODE = X_CUSTOMIZATION_CODE,
LAST_UPDATE_DATE = X_LAST_UPDATE_DATE,
LAST_UPDATED_BY = X_LAST_UPDATED_BY,
LAST_UPDATE_LOGIN = X_LAST_UPDATE_LOGIN,
ATTRIBUTE_CATEGORY = X_ATTRIBUTE_CATEGORY,
ATTRIBUTE1 = X_ATTRIBUTE1,
ATTRIBUTE2 = X_ATTRIBUTE2,
ATTRIBUTE3 = X_ATTRIBUTE3,
ATTRIBUTE4 = X_ATTRIBUTE4,
ATTRIBUTE5 = X_ATTRIBUTE5,
ATTRIBUTE6 = X_ATTRIBUTE6,
ATTRIBUTE7 = X_ATTRIBUTE7,
ATTRIBUTE8 = X_ATTRIBUTE8,
ATTRIBUTE9 = X_ATTRIBUTE9,
ATTRIBUTE10 = X_ATTRIBUTE10,
ATTRIBUTE11 = X_ATTRIBUTE11,
ATTRIBUTE12 = X_ATTRIBUTE12,
ATTRIBUTE13 = X_ATTRIBUTE13,
ATTRIBUTE14 = X_ATTRIBUTE14,
ATTRIBUTE15 = X_ATTRIBUTE15
where REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and REGION_CODE = X_REGION_CODE
and ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and ATTRIBUTE_CODE = X_ATTRIBUTE_CODE;
if (sql%notfound) then
raise no_data_found;
end if;

update AK_REGION_ITEMS_TL set
ATTRIBUTE_LABEL_LONG = X_ATTRIBUTE_LABEL_LONG,
ATTRIBUTE_LABEL_SHORT = X_ATTRIBUTE_LABEL_SHORT,
DESCRIPTION = X_DESCRIPTION,
LAST_UPDATE_DATE = X_LAST_UPDATE_DATE,
LAST_UPDATED_BY = X_LAST_UPDATED_BY,
LAST_UPDATE_LOGIN = X_LAST_UPDATE_LOGIN,
SOURCE_LANG = userenv('LANG')
where REGION_CODE = X_REGION_CODE
and REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and ATTRIBUTE_CODE = X_ATTRIBUTE_CODE
and ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and userenv('LANG') in (LANGUAGE, SOURCE_LANG);
if (sql%notfound) then
raise no_data_found;
end if;
end UPDATE_ROW;

procedure DELETE_ROW (
X_REGION_APPLICATION_ID in NUMBER,
X_REGION_CODE in VARCHAR2,
X_ATTRIBUTE_APPLICATION_ID in NUMBER,
X_ATTRIBUTE_CODE in VARCHAR2
) is
begin
delete from AK_REGION_ITEMS
where REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and REGION_CODE = X_REGION_CODE
and ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and ATTRIBUTE_CODE = X_ATTRIBUTE_CODE;

if (sql%notfound) then
raise no_data_found;
end if;

delete from AK_REGION_ITEMS_TL
where REGION_APPLICATION_ID = X_REGION_APPLICATION_ID
and REGION_CODE = X_REGION_CODE
and ATTRIBUTE_APPLICATION_ID = X_ATTRIBUTE_APPLICATION_ID
and ATTRIBUTE_CODE = X_ATTRIBUTE_CODE;
if (sql%notfound) then
raise no_data_found;
end if;
end DELETE_ROW;

procedure ADD_LANGUAGE
is
begin

/* Mar/19/03 requested by Ric Ginsberg */
/* The following delete and update statements are commented out */
/* as a quick workaround to fix the time-consuming table handler issue */
/* Eventually we'll need to turn them into a separate fix_language procedure */
/*
delete from AK_REGION_ITEMS_TL T
where not exists
(select NULL
from AK_REGION_ITEMS B
where B.REGION_CODE = T.REGION_CODE
and B.REGION_APPLICATION_ID = T.REGION_APPLICATION_ID
and B.ATTRIBUTE_CODE = T.ATTRIBUTE_CODE
and B.ATTRIBUTE_APPLICATION_ID = T.ATTRIBUTE_APPLICATION_ID
);

update AK_REGION_ITEMS_TL T set (
ATTRIBUTE_LABEL_LONG,
ATTRIBUTE_LABEL_SHORT,
DESCRIPTION
) = (select
B.ATTRIBUTE_LABEL_LONG,
B.ATTRIBUTE_LABEL_SHORT,
B.DESCRIPTION
from AK_REGION_ITEMS_TL B
where B.REGION_CODE = T.REGION_CODE
and B.REGION_APPLICATION_ID = T.REGION_APPLICATION_ID
and B.ATTRIBUTE_CODE = T.ATTRIBUTE_CODE
and B.ATTRIBUTE_APPLICATION_ID = T.ATTRIBUTE_APPLICATION_ID
and B.LANGUAGE = T.SOURCE_LANG)
where (
T.REGION_CODE,
T.REGION_APPLICATION_ID,
T.ATTRIBUTE_CODE,
T.ATTRIBUTE_APPLICATION_ID,
T.LANGUAGE
) in (select
SUBT.REGION_CODE,
SUBT.REGION_APPLICATION_ID,
SUBT.ATTRIBUTE_CODE,
SUBT.ATTRIBUTE_APPLICATION_ID,
SUBT.LANGUAGE
from AK_REGION_ITEMS_TL SUBB, AK_REGION_ITEMS_TL SUBT
where SUBB.REGION_CODE = SUBT.REGION_CODE
and SUBB.REGION_APPLICATION_ID = SUBT.REGION_APPLICATION_ID
and SUBB.ATTRIBUTE_CODE = SUBT.ATTRIBUTE_CODE
and SUBB.ATTRIBUTE_APPLICATION_ID = SUBT.ATTRIBUTE_APPLICATION_ID
and SUBB.LANGUAGE = SUBT.SOURCE_LANG
and (SUBB.ATTRIBUTE_LABEL_LONG <> SUBT.ATTRIBUTE_LABEL_LONG
or (SUBB.ATTRIBUTE_LABEL_LONG is null and SUBT.ATTRIBUTE_LABEL_LONG is not null)
or (SUBB.ATTRIBUTE_LABEL_LONG is not null and SUBT.ATTRIBUTE_LABEL_LONG is null)
or SUBB.ATTRIBUTE_LABEL_SHORT <> SUBT.ATTRIBUTE_LABEL_SHORT
or (SUBB.ATTRIBUTE_LABEL_SHORT is null and SUBT.ATTRIBUTE_LABEL_SHORT is not null)
or (SUBB.ATTRIBUTE_LABEL_SHORT is not null and SUBT.ATTRIBUTE_LABEL_SHORT is null)
));
*/

insert /*+ append parallel(tt) */ into AK_REGION_ITEMS_TL tt (
REGION_APPLICATION_ID,
REGION_CODE,
ATTRIBUTE_APPLICATION_ID,
ATTRIBUTE_CODE,
ATTRIBUTE_LABEL_LONG,
ATTRIBUTE_LABEL_SHORT,
CREATED_BY,
CREATION_DATE,
LAST_UPDATED_BY,
LAST_UPDATE_DATE,
LAST_UPDATE_LOGIN,
LANGUAGE,
SOURCE_LANG
) select /*+ parallel(v) parallel(t) use_nl(t) */  v.*
from ( SELECT /*+ no_merge ordered parellel(b) */
B.REGION_APPLICATION_ID,
B.REGION_CODE,
B.ATTRIBUTE_APPLICATION_ID,
B.ATTRIBUTE_CODE,
B.ATTRIBUTE_LABEL_LONG,
B.ATTRIBUTE_LABEL_SHORT,
B.CREATED_BY,
B.CREATION_DATE,
B.LAST_UPDATED_BY,
B.LAST_UPDATE_DATE,
B.LAST_UPDATE_LOGIN,
L.LANGUAGE_CODE,
B.SOURCE_LANG
from AK_REGION_ITEMS_TL B, FND_LANGUAGES L
where L.INSTALLED_FLAG in ('I', 'B')
and B.LANGUAGE = userenv('LANG')
) v, ak_region_items_tl t
where T.REGION_CODE(+) = v.REGION_CODE
and T.REGION_APPLICATION_ID(+) = v.REGION_APPLICATION_ID
and T.ATTRIBUTE_CODE(+) = v.ATTRIBUTE_CODE
and T.ATTRIBUTE_APPLICATION_ID(+) = v.ATTRIBUTE_APPLICATION_ID
and T.LANGUAGE(+) = v.LANGUAGE_CODE
and T.REGION_CODE is NULL
and T.REGION_APPLICATION_ID is NULL
and T.ATTRIBUTE_CODE is NULL
and T.ATTRIBUTE_APPLICATION_ID is NULL;

end ADD_LANGUAGE;

end AK_REGION_ITEMS_PKG;

/
