--------------------------------------------------------
--  DDL for Package Body HR_LEGISLATION_SUBGROUPS_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."HR_LEGISLATION_SUBGROUPS_PKG" as
/* $Header: pelsg01t.pkb 115.1 1999/11/05 01:37:49 pkm ship    $ */
procedure INSERT_ROW (
  X_LEGISLATION_CODE in VARCHAR2,
  X_LEGISLATION_SUBGROUP in VARCHAR2,
  X_ACTIVE_INACTIVE_FLAG in VARCHAR2,
  X_LEGISLATION_SUBGROUP_NAME in VARCHAR2
) is
begin
  insert into HR_LEGISLATION_SUBGROUPS (
    LEGISLATION_CODE,
    LEGISLATION_SUBGROUP,
    ACTIVE_INACTIVE_FLAG,
    LEGISLATION_SUBGROUP_NAME
  ) values (
    X_LEGISLATION_CODE,
    X_LEGISLATION_SUBGROUP,
    X_ACTIVE_INACTIVE_FLAG,
    X_LEGISLATION_SUBGROUP_NAME
  );
end INSERT_ROW;
--
procedure LOCK_ROW (
  X_LEGISLATION_CODE in VARCHAR2,
  X_LEGISLATION_SUBGROUP in VARCHAR2,
  X_ACTIVE_INACTIVE_FLAG in VARCHAR2
) is
  cursor CSR_LEGISLATION_SUBGROUP (
    X_LEGISLATION_CODE in VARCHAR2,
    X_LEGISLATION_SUBGROUP in VARCHAR2
  ) is
    select ACTIVE_INACTIVE_FLAG,
           LEGISLATION_SUBGROUP_NAME
    from   HR_LEGISLATION_SUBGROUPS
    where  LEGISLATION_CODE = X_LEGISLATION_CODE
    and    LEGISLATION_SUBGROUP = X_LEGISLATION_SUBGROUP
    for update of LEGISLATION_CODE nowait;
  RECINFO CSR_LEGISLATION_SUBGROUP%rowtype;
begin
  open CSR_LEGISLATION_SUBGROUP(X_LEGISLATION_CODE,X_LEGISLATION_SUBGROUP);
  fetch CSR_LEGISLATION_SUBGROUP into RECINFO;
  if (CSR_LEGISLATION_SUBGROUP%notfound) then
    close CSR_LEGISLATION_SUBGROUP;
    fnd_message.set_name('FND','FORM_RECORD_DELETED');
    app_exception.raise_exception;
  end if;
  close CSR_LEGISLATION_SUBGROUP;
  if (   (  (RECINFO.ACTIVE_INACTIVE_FLAG = X_ACTIVE_INACTIVE_FLAG)
         or (RECINFO.ACTIVE_INACTIVE_FLAG is null and X_ACTIVE_INACTIVE_FLAG is null))
     ) then
    null;
  else
    fnd_message.set_name('FND','FORM_RECORD_CHANGED');
    app_exception.raise_exception;
  end if;
end LOCK_ROW;
--
procedure UPDATE_ROW (
  X_LEGISLATION_CODE in VARCHAR2,
  X_LEGISLATION_SUBGROUP in VARCHAR2,
  X_ACTIVE_INACTIVE_FLAG in VARCHAR2,
  X_LEGISLATION_SUBGROUP_NAME in VARCHAR2
) is
begin
  update HR_LEGISLATION_SUBGROUPS set
    ACTIVE_INACTIVE_FLAG = X_ACTIVE_INACTIVE_FLAG,
    LEGISLATION_SUBGROUP_NAME = X_LEGISLATION_SUBGROUP_NAME
  where LEGISLATION_CODE = X_LEGISLATION_CODE
  and   LEGISLATION_SUBGROUP = X_LEGISLATION_SUBGROUP;
  if (sql%notfound) then
    raise no_data_found;
  end if;
end UPDATE_ROW;
--
procedure DELETE_ROW (
  X_LEGISLATION_CODE in VARCHAR2,
  X_LEGISLATION_SUBGROUP in VARCHAR2
) is
begin
  delete from HR_LEGISLATION_SUBGROUPS
  where LEGISLATION_CODE = X_LEGISLATION_CODE
  and   LEGISLATION_SUBGROUP = X_LEGISLATION_SUBGROUP;
  if (sql%notfound) then
    raise no_data_found;
  end if;
end DELETE_ROW;
--
procedure LOAD_ROW (
  X_LEGISLATION_CODE in VARCHAR2,
  X_LEGISLATION_SUBGROUP in VARCHAR2,
  X_ACTIVE_INACTIVE_FLAG in VARCHAR2,
  X_LEGISLATION_SUBGROUP_NAME in VARCHAR2,
  X_OWNER in VARCHAR2
) is
begin
  begin
    UPDATE_ROW (
      X_LEGISLATION_CODE,
      X_LEGISLATION_SUBGROUP,
      X_ACTIVE_INACTIVE_FLAG,
      X_LEGISLATION_SUBGROUP_NAME
    );
  exception
    when no_data_found then
      INSERT_ROW (
        X_LEGISLATION_CODE,
        X_LEGISLATION_SUBGROUP,
        X_ACTIVE_INACTIVE_FLAG,
        X_LEGISLATION_SUBGROUP_NAME
      );
  end;
end LOAD_ROW;
--
procedure TRANSLATE_ROW (
  X_LEGISLATION_CODE in VARCHAR2,
  X_LEGISLATION_SUBGROUP in VARCHAR2,
  X_LEGISLATION_SUBGROUP_NAME in VARCHAR2,
  X_OWNER in VARCHAR2
) is
begin
  update HR_LEGISLATION_SUBGROUPS set
    LEGISLATION_SUBGROUP_NAME = X_LEGISLATION_SUBGROUP_NAME
  where LEGISLATION_CODE = X_LEGISLATION_CODE
  and   LEGISLATION_SUBGROUP = X_LEGISLATION_SUBGROUP
  and   userenv('LANG') = (select LANGUAGE_CODE
                           from   FND_LANGUAGES
                           where  INSTALLED_FLAG = 'B');
end TRANSLATE_ROW;
--
end HR_LEGISLATION_SUBGROUPS_PKG;

/
