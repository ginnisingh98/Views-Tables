--------------------------------------------------------
--  DDL for Package Body AR_TRX_GLOBAL_PROCESS_LINES
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."AR_TRX_GLOBAL_PROCESS_LINES" AS
/* $Header: ARINGTLB.pls 120.17 2007/06/21 21:03:39 mraymond ship $ */

pg_debug                VARCHAR2(1) := nvl(fnd_profile.value('AFLOG_ENABLED'),'N');

PROCEDURE INSERT_ROW (
        p_trx_lines_tbl         IN      AR_INVOICE_API_PUB.trx_line_tbl_type,
        x_errmsg                    OUT NOCOPY  VARCHAR2,
        x_return_status             OUT NOCOPY  VARCHAR2 ) IS
BEGIN

    IF pg_debug = 'Y'
    THEN
        ar_invoice_utils.debug ('AR_TRX_GLOBAL_PROCESS_LINES.INSERT_ROW (+)');
    END IF;
    x_return_status := FND_API.G_RET_STS_SUCCESS;
    -- Now populate the lines global Temp. Table
    FOR i IN  p_trx_lines_tbl.FIRST .. p_trx_lines_tbl.LAST
    LOOP

         INSERT INTO ar_trx_lines_gt (
            trx_line_id,
            trx_header_id                   ,
            customer_trx_line_id            ,
            link_to_trx_line_id,
            LINE_NUMBER	                    , -- required
            LINE_TYPE	                    ,  -- required
            customer_trx_id                 ,
            REASON_CODE	                          ,
            INVENTORY_ITEM_ID	                        ,
            DESCRIPTION	                    	  ,
            QUANTITY_ORDERED	            	          ,
            QUANTITY_CREDITED	            	          ,
            QUANTITY_INVOICED	            	          ,
            UNIT_STANDARD_PRICE	            	          ,
            UNIT_SELLING_PRICE	            	          ,
            SALES_ORDER	                    	  ,
            SALES_ORDER_LINE	            	  ,
            SALES_ORDER_DATE	            	          ,
            ACCOUNTING_RULE_ID	                  	  ,
            RULE_START_DATE	               	          ,
            ATTRIBUTE_CATEGORY	            	  ,
            ATTRIBUTE1	                    	  ,
            ATTRIBUTE2	                    	  ,
            ATTRIBUTE3	                    	  ,
            ATTRIBUTE4	                    	  ,
            ATTRIBUTE5	                    	  ,
            ATTRIBUTE6	                    	  ,
            ATTRIBUTE7	                    	  ,
            ATTRIBUTE8	                    	  ,
            ATTRIBUTE9	                    	  ,
            ATTRIBUTE10	                    	  ,
            ATTRIBUTE11	                    	  ,
            ATTRIBUTE12	                    	  ,
            ATTRIBUTE13	                    	  ,
            ATTRIBUTE14	                    	  ,
            ATTRIBUTE15	                    	  ,
            INTERFACE_LINE_CONTEXT	        	  ,
            INTERFACE_LINE_ATTRIBUTE1	    	  ,
            INTERFACE_LINE_ATTRIBUTE2	    	  ,
            INTERFACE_LINE_ATTRIBUTE3	    	  ,
            INTERFACE_LINE_ATTRIBUTE4	    	  ,
            INTERFACE_LINE_ATTRIBUTE5	    	  ,
            INTERFACE_LINE_ATTRIBUTE6	    	  ,
            INTERFACE_LINE_ATTRIBUTE7	    	  ,
            INTERFACE_LINE_ATTRIBUTE8	    	  ,
            INTERFACE_LINE_ATTRIBUTE9	    	  ,
            INTERFACE_LINE_ATTRIBUTE10	    	  ,
            INTERFACE_LINE_ATTRIBUTE11	    	  ,
            INTERFACE_LINE_ATTRIBUTE12	    	  ,
            INTERFACE_LINE_ATTRIBUTE13	    	  ,
            INTERFACE_LINE_ATTRIBUTE14	    	  ,
            INTERFACE_LINE_ATTRIBUTE15	    	  ,
            SALES_ORDER_SOURCE	            	  ,  --channel in the form
            EXTENDED_AMOUNT	                ,	          -- required
            REVENUE_AMOUNT	                	          ,
            AUTORULE_COMPLETE_FLAG	        	      ,
            TAX_PRECEDENCE	                	          ,
            TAX_RATE	                    	          ,
            ITEM_EXCEPTION_RATE_ID	               	  ,
            TAX_EXEMPTION_ID	                        ,
            MEMO_LINE_ID	                            ,
            AUTORULE_DURATION_PROCESSED	                ,
            UOM_CODE	                                ,
            DEFAULT_USSGL_TRANSACTION_CODE	            ,
            DEFAULT_USSGL_TRX_CODE_CONTEXT	            ,
            VAT_TAX_ID	                   	   ,
            AUTOTAX	                        	       ,
            LAST_PERIOD_TO_CREDIT	        	           ,
            ITEM_CONTEXT	                	   ,
            TAX_EXEMPT_FLAG	                	       ,
            TAX_EXEMPT_NUMBER	            	   ,
            TAX_EXEMPT_REASON_CODE	        	   ,
            TAX_VENDOR_RETURN_CODE	        	   ,
            LOCATION_SEGMENT_ID	                         ,
            MOVEMENT_ID	                                 ,
            GLOBAL_ATTRIBUTE1	            	   ,
            GLOBAL_ATTRIBUTE2	            	   ,
            GLOBAL_ATTRIBUTE3	            	   ,
            GLOBAL_ATTRIBUTE4	            	   ,
            GLOBAL_ATTRIBUTE5	            	   ,
            GLOBAL_ATTRIBUTE6	            	   ,
            GLOBAL_ATTRIBUTE7	            	   ,
            GLOBAL_ATTRIBUTE8	            	   ,
            GLOBAL_ATTRIBUTE9	            	   ,
            GLOBAL_ATTRIBUTE10	            	   ,
            GLOBAL_ATTRIBUTE11	            	   ,
            GLOBAL_ATTRIBUTE12	            	   ,
            GLOBAL_ATTRIBUTE13	            	   ,
            GLOBAL_ATTRIBUTE14	            	   ,
            GLOBAL_ATTRIBUTE15	            	   ,
            GLOBAL_ATTRIBUTE16	            	   ,
            GLOBAL_ATTRIBUTE17	            	   ,
            GLOBAL_ATTRIBUTE18	            	   ,
            GLOBAL_ATTRIBUTE19	            	   ,
            GLOBAL_ATTRIBUTE20	            	   ,
            GLOBAL_ATTRIBUTE_CATEGORY	    	   ,
            GROSS_UNIT_SELLING_PRICE	    	           ,
            GROSS_EXTENDED_AMOUNT	        	           ,
            AMOUNT_INCLUDES_TAX_FLAG	    	       ,
            TAXABLE_AMOUNT	                	           ,
            WAREHOUSE_ID	                             ,
            EXTENDED_ACCTD_AMOUNT	        	           ,
            CONTRACT_LINE_ID	            	           ,
            SOURCE_DATA_KEY1	            	   ,
            SOURCE_DATA_KEY2	            	   ,
            SOURCE_DATA_KEY3	            	   ,
            SOURCE_DATA_KEY4	            	   ,
            SOURCE_DATA_KEY5	            	   ,
            INVOICED_LINE_ACCTG_LEVEL,
            ship_via,
            fob_point                       ,
            waybill_number                  ,
            SHIP_DATE_ACTUAL,
            override_auto_accounting_flag   ,
            ORG_ID			,
 	    rule_end_date,
            request_id,
            SOURCE_APPLICATION_ID,
            SOURCE_EVENT_CLASS_CODE,
            SOURCE_ENTITY_CODE,
            SOURCE_TRX_ID,
            SOURCE_TRX_LINE_ID,
            SOURCE_TRX_LINE_TYPE,
            SOURCE_TRX_DETAIL_TAX_LINE_ID,
            HISTORICAL_FLAG,
            TAXABLE_FLAG,
            TAX_REGIME_CODE,
            TAX,
            TAX_STATUS_CODE,
            TAX_RATE_CODE,
            TAX_JURISDICTION_CODE,
            TAX_CLASSIFICATION_CODE,
            INTEREST_LINE_ID,
            TRX_BUSINESS_CATEGORY,
            PRODUCT_FISC_CLASSIFICATION,
            PRODUCT_CATEGORY,
            PRODUCT_TYPE,
            LINE_INTENDED_USE,
            ASSESSABLE_VALUE
			)
             VALUES (
            p_trx_lines_tbl(i).trx_line_id,
            p_trx_lines_tbl(i).trx_header_id,
            RA_CUSTOMER_TRX_LINES_S.NEXTVAL,
            p_trx_lines_tbl(i).link_to_trx_line_id,
            p_trx_lines_tbl(i).LINE_number,
            p_trx_lines_tbl(i).line_type,
            null,  --customer_trx_id
            p_trx_lines_tbl(i).REASON_CODE,
            p_trx_lines_tbl(i).INVENTORY_ITEM_ID,
            p_trx_lines_tbl(i).DESCRIPTION,
            p_trx_lines_tbl(i).QUANTITY_ORDERED,
            null, -- p_trx_lines_tbl(i).QUANTITY_CREDITED,
            p_trx_lines_tbl(i).QUANTITY_INVOICED,
            p_trx_lines_tbl(i).UNIT_STANDARD_PRICE,
            p_trx_lines_tbl(i).UNIT_SELLING_PRICE,
            p_trx_lines_tbl(i).SALES_ORDER,
            p_trx_lines_tbl(i).SALES_ORDER_LINE,
            p_trx_lines_tbl(i).SALES_ORDER_DATE,
            p_trx_lines_tbl(i).ACCOUNTING_RULE_ID,
            p_trx_lines_tbl(i).RULE_START_DATE,
            p_trx_lines_tbl(i).ATTRIBUTE_CATEGORY,
            p_trx_lines_tbl(i).ATTRIBUTE1,
            p_trx_lines_tbl(i).ATTRIBUTE2,
            p_trx_lines_tbl(i).ATTRIBUTE3,
            p_trx_lines_tbl(i).ATTRIBUTE4,
            p_trx_lines_tbl(i).ATTRIBUTE5,
            p_trx_lines_tbl(i).ATTRIBUTE6,
            p_trx_lines_tbl(i).ATTRIBUTE7,
            p_trx_lines_tbl(i).ATTRIBUTE8,
            p_trx_lines_tbl(i).ATTRIBUTE9,
            p_trx_lines_tbl(i).ATTRIBUTE10,
            p_trx_lines_tbl(i).ATTRIBUTE11,
            p_trx_lines_tbl(i).ATTRIBUTE12,
            p_trx_lines_tbl(i).ATTRIBUTE13	                    	  ,
            p_trx_lines_tbl(i).ATTRIBUTE14	                    	  ,
            p_trx_lines_tbl(i).ATTRIBUTE15	                    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_CONTEXT	        	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE1	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE2	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE3	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE4	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE5	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE6	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE7	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE8	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE9	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE10	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE11	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE12	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE13	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE14	    	  ,
            p_trx_lines_tbl(i).INTERFACE_LINE_ATTRIBUTE15	    	  ,
            p_trx_lines_tbl(i).SALES_ORDER_SOURCE	            	  ,  --channel in the form
            p_trx_lines_tbl(i).AMOUNT ,	          -- required
            null, -- p_trx_lines_tbl(i).REVENUE_AMOUNT	                	          ,
            DECODE(p_trx_lines_tbl(i).accounting_rule_id, NULL, NULL, 'N'),
            p_trx_lines_tbl(i).TAX_PRECEDENCE	                	          ,
            p_trx_lines_tbl(i).TAX_RATE	                    	          ,
            null, -- p_trx_lines_tbl(i).ITEM_EXCEPTION_RATE_ID	               	  ,
            p_trx_lines_tbl(i).TAX_EXEMPTION_ID	                        ,
            p_trx_lines_tbl(i).MEMO_LINE_ID	                            ,
            null, -- p_trx_lines_tbl(i).AUTORULE_DURATION_PROCESSED	                ,
            p_trx_lines_tbl(i).UOM_CODE	                                ,
            p_trx_lines_tbl(i).DEFAULT_USSGL_TRANSACTION_CODE	            ,
            p_trx_lines_tbl(i).DEFAULT_USSGL_TRX_CODE_CONTEXT	            ,
            p_trx_lines_tbl(i).VAT_TAX_ID	                   	   ,
            'N', -- p_trx_lines_tbl(i).AUTOTAX	                        	       ,
            null, -- p_trx_lines_tbl(i).LAST_PERIOD_TO_CREDIT	        	           ,
            null, -- p_trx_lines_tbl(i).ITEM_CONTEXT	                	   ,
            p_trx_lines_tbl(i).TAX_EXEMPT_FLAG	                	       ,
            p_trx_lines_tbl(i).TAX_EXEMPT_NUMBER	            	   ,
            p_trx_lines_tbl(i).TAX_EXEMPT_REASON_CODE	        	   ,
            null, -- p_trx_lines_tbl(i).TAX_VENDOR_RETURN_CODE	        	   ,
            null, -- p_trx_lines_tbl(i).LOCATION_SEGMENT_ID	                         ,
            p_trx_lines_tbl(i).MOVEMENT_ID	                                 ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE1	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE2	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE3	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE4	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE5	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE6	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE7	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE8	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE9	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE10	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE11	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE12	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE13	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE14	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE15	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE16	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE17	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE18	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE19	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE20	            	   ,
            p_trx_lines_tbl(i).GLOBAL_ATTRIBUTE_CATEGORY	    	   ,
            null, -- p_trx_lines_tbl(i).GROSS_UNIT_SELLING_PRICE,
            null, -- p_trx_lines_tbl(i).GROSS_EXTENDED_AMOUNT ,
            p_trx_lines_tbl(i).AMOUNT_INCLUDES_TAX_FLAG,
            null, -- p_trx_lines_tbl(i).TAXABLE_AMOUNT,
            p_trx_lines_tbl(i).WAREHOUSE_ID,
            null, -- p_trx_lines_tbl(i).EXTENDED_ACCTD_AMOUNT,
            p_trx_lines_tbl(i).CONTRACT_LINE_ID	            	           ,
            p_trx_lines_tbl(i).SOURCE_DATA_KEY1	            	   ,
            p_trx_lines_tbl(i).SOURCE_DATA_KEY2	            	   ,
            p_trx_lines_tbl(i).SOURCE_DATA_KEY3	            	   ,
            p_trx_lines_tbl(i).SOURCE_DATA_KEY4	            	   ,
            p_trx_lines_tbl(i).SOURCE_DATA_KEY5	            	   ,
            p_trx_lines_tbl(i).INVOICED_LINE_ACCTG_LEVEL,
            null, -- p_trx_lines_tbl(i).ship_via                        ,
            null, -- p_trx_lines_tbl(i).fob_point                       ,
            null, -- p_trx_lines_tbl(i).waybill_number                  ,
            p_trx_lines_tbl(i).SHIP_DATE_ACTUAL,
            p_trx_lines_tbl(i).override_auto_accounting_flag            ,
            arp_standard.sysparm.org_id					,
            p_trx_lines_tbl(i).rule_end_date,
            ar_invoice_table_handler.g_request_id,
            p_trx_lines_tbl(i).source_application_id,
            p_trx_lines_tbl(i).source_event_class_code,
            p_trx_lines_tbl(i).source_entity_code,
            p_trx_lines_tbl(i).source_trx_id,
            p_trx_lines_tbl(i).source_trx_line_id,
            p_trx_lines_tbl(i).source_trx_line_type,
            p_trx_lines_tbl(i).source_trx_detail_tax_line_id,
            p_trx_lines_tbl(i).historical_flag,
            p_trx_lines_tbl(i).taxable_flag,
            p_trx_lines_tbl(i).tax_regime_code,
            p_trx_lines_tbl(i).tax,
            p_trx_lines_tbl(i).tax_status_code,
            p_trx_lines_tbl(i).tax_rate_code,
            p_trx_lines_tbl(i).tax_jurisdiction_code,
            p_trx_lines_tbl(i).tax_classification_code,
            p_trx_lines_tbl(i).interest_line_id,
            p_trx_lines_tbl(i).trx_business_category,
            p_trx_lines_tbl(i).product_fisc_classification,
            p_trx_lines_tbl(i).product_category,
            p_trx_lines_tbl(i).product_type,
            p_trx_lines_tbl(i).line_intended_use,
            p_trx_lines_tbl(i).assessable_value
);
    END LOOP;

    IF pg_debug = 'Y'
    THEN
        ar_invoice_utils.debug ('AR_TRX_GLOBAL_PROCESS_LINES.INSERT_ROW (-)');
    END IF;
    EXCEPTION
            WHEN OTHERS THEN
                x_errmsg := 'Error in AR_TRX_GLOBAL_PROCESS_LINES.INSERT_ROW '||sqlerrm;
                x_return_status := FND_API.G_RET_STS_UNEXP_ERROR;
                return;

END INSERT_ROW;

END AR_TRX_GLOBAL_PROCESS_LINES;

/
