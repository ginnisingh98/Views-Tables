--------------------------------------------------------
--  DDL for Package Body BOM_CONFIG_EXPLOSIONS_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."BOM_CONFIG_EXPLOSIONS_PKG" as
/* $Header: OEXCBCEB.pls 115.1 99/07/16 08:11:42 porting ship $ */

  PROCEDURE Insert_Row(X_Rowid                   IN OUT VARCHAR2,
                       X_Top_Bill_Sequence_Id           NUMBER,
                       X_Organization_Id                NUMBER,
                       X_Group_Id                       NUMBER,
                       X_Effectivity_Date               DATE,
                       X_Header_Id                      NUMBER,
                       X_Line_Id                        NUMBER,
                       X_Sort_Order                     VARCHAR2,
                       X_Select_Flag                    VARCHAR2,
                       X_Select_Quantity                NUMBER,
                       X_Price_List_Id                  NUMBER,
                       X_List_Price                     NUMBER,
                       X_Selling_Price                  NUMBER,
		       X_Required_For_Revenue		NUMBER,
                       X_Session_Id                     NUMBER,
                       X_Context                        VARCHAR2,
                       X_Attribute1                     VARCHAR2,
                       X_Attribute2                     VARCHAR2,
                       X_Attribute3                     VARCHAR2,
                       X_Attribute4                     VARCHAR2,
                       X_Attribute5                     VARCHAR2,
                       X_Attribute6                     VARCHAR2,
                       X_Attribute7                     VARCHAR2,
                       X_Attribute8                     VARCHAR2,
                       X_Attribute9                     VARCHAR2,
                       X_Attribute10                    VARCHAR2,
                       X_Attribute11                    VARCHAR2,
                       X_Attribute12                    VARCHAR2,
                       X_Attribute13                    VARCHAR2,
                       X_Attribute14                    VARCHAR2,
                       X_Attribute15                    VARCHAR2,
                       X_Pricing_Context                VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute1             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute2             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute3             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute4             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute5             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute6             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute7             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute8             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute9             VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute10            VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute11            VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute12            VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute13            VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute14            VARCHAR2 DEFAULT NULL,
                       X_Pricing_attribute15            VARCHAR2 DEFAULT NULL
  ) IS
    CURSOR C IS SELECT rowid FROM BOM_CONFIG_EXPLOSIONS
                 WHERE group_id = X_Group_Id
                 AND   sort_order = X_Sort_Order;

   BEGIN


       INSERT INTO bom_config_explosions(
              top_bill_sequence_id,
              bill_sequence_id,
              organization_id,
              explosion_type,
              component_sequence_id,
              component_item_id,
              plan_level,
              extended_quantity,
              sort_order,
              creation_date,
              created_by,
              last_update_date,
              last_updated_by,
              group_id,
              session_id,
              select_flag,
              select_quantity,
              top_item_id,
              context,
              attribute1,
              attribute2,
              attribute3,
              attribute4,
              attribute5,
              attribute6,
              attribute7,
              attribute8,
              attribute9,
              attribute10,
              attribute11,
              attribute12,
              attribute13,
              attribute14,
              attribute15,
              header_id,
              line_id,
              list_price,
              selling_price,
              component_quantity,
              so_basis,
              optional,
              mutually_exclusive_options,
              check_atp,
              shipping_allowed,
              required_to_ship,
              required_for_revenue,
              include_on_ship_docs,
              include_on_bill_docs,
              low_quantity,
              high_quantity,
              pick_components,
              primary_uom_code,
              primary_unit_of_measure,
              base_item_id,
              atp_components_flag,
              atp_flag,
              bom_item_type,
              pick_components_flag,
              replenish_to_order_flag,
              shippable_item_flag,
              customer_order_flag,
              internal_order_flag,
              customer_order_enabled_flag,
              internal_order_enabled_flag,
              so_transactions_flag,
              description,
              assembly_item_id,
              configurator_flag,
              price_list_id,
              rounding_factor,
              pricing_context,
              pricing_attribute1,
              pricing_attribute2,
              pricing_attribute3,
              pricing_attribute4,
              pricing_attribute5,
              pricing_attribute6,
              pricing_attribute7,
              pricing_attribute8,
              pricing_attribute9,
              pricing_attribute10,
              pricing_attribute11,
              pricing_attribute12,
              pricing_attribute13,
              pricing_attribute14,
              pricing_attribute15,
              component_code,
              loop_flag,
              parent_bom_item_type,
              operation_seq_num,
              item_num,
              effectivity_date,
              disable_date,
              implementation_date,
              rexplode_flag,
              common_bill_sequence_id,
              comp_bill_seq_id,
              comp_common_bill_seq_id,
              num_col1,
              num_col2,
              num_col3,
              date_col1,
              date_col2,
              date_col3,
              char_col1,
              char_col2,
              char_col3 )
       SELECT

              X_Top_Bill_Sequence_Id,
              Bill_Sequence_Id,
              X_Organization_Id,
              'OPTIONAL',
              Component_Sequence_Id,
              Component_Item_Id,
              Plan_Level,
              Extended_Quantity,
              X_Sort_Order,
              SYSDATE,
              1,
              SYSDATE,
              1,
              X_Group_Id,
              X_Session_Id,
              X_Select_Flag,
              X_Select_Quantity,
              Top_Item_Id,
              X_Context,
              X_Attribute1,
              X_Attribute2,
              X_Attribute3,
              X_Attribute4,
              X_Attribute5,
              X_Attribute6,
              X_Attribute7,
              X_Attribute8,
              X_Attribute9,
              X_Attribute10,
              X_Attribute11,
              X_Attribute12,
              X_Attribute13,
              X_Attribute14,
              X_Attribute15,
              X_Header_Id,
              X_Line_Id,
              X_List_Price,
              X_Selling_Price,
              Component_Quantity,
              So_Basis,
              Optional,
              Mutually_Exclusive_Options,
              Check_Atp,
              Shipping_Allowed,
              Required_To_Ship,
              X_Required_For_Revenue,
              Include_On_Ship_Docs,
              Include_On_Bill_Docs,
              Low_Quantity,
              High_Quantity,
              Pick_Components,
              Primary_Uom_Code,
              Primary_Unit_Of_Measure,
              Base_Item_Id,
              Atp_Components_Flag,
              Atp_Flag,
              Bom_Item_Type,
              Pick_Components_Flag,
              Replenish_To_Order_Flag,
              Shippable_Item_Flag,
              Customer_Order_Flag,
              Internal_Order_Flag,
              Customer_Order_Enabled_Flag,
              Internal_Order_Enabled_Flag,
              So_Transactions_Flag,
              Description,
              Assembly_Item_Id,
              NULL,
              X_Price_List_Id,
              NULL,
              X_Pricing_context,
              X_Pricing_attribute1,
              X_Pricing_attribute2,
              X_Pricing_attribute3,
              X_Pricing_attribute4,
              X_Pricing_attribute5,
              X_Pricing_attribute6,
              X_Pricing_attribute7,
              X_Pricing_attribute8,
              X_Pricing_attribute9,
              X_Pricing_attribute10,
              X_Pricing_attribute11,
              X_Pricing_attribute12,
              X_Pricing_attribute13,
              X_Pricing_attribute14,
              X_Pricing_attribute15,
              Component_Code,
              Loop_Flag,
              Parent_Bom_Item_Type,
              Operation_Seq_Num,
              Item_Num,
              Effectivity_Date,
              Disable_Date,
              Implementation_Date,
              Rexplode_Flag,
              Common_Bill_Sequence_Id,
              Comp_Bill_Seq_Id,
              Comp_Common_Bill_Seq_Id,
              Num_Col1,
              Num_Col2,
              Num_Col3,
              Date_Col1,
              Date_Col2,
              Date_Col3,
              Char_Col1,
              Char_Col2,
              Char_Col3
     FROM  SO_CONFIG_COMPONENTS_V
     WHERE TOP_BILL_SEQUENCE_ID = X_Top_Bill_Sequence_Id
     AND   ORGANIZATION_ID      = X_Organization_Id
     AND   EXPLOSION_TYPE       = 'OPTIONAL'
     AND   SORT_ORDER           = X_Sort_Order
     AND   EFFECTIVITY_DATE     <= X_Effectivity_Date
     AND   DISABLE_DATE         >  X_Effectivity_Date ;

    OPEN C;
    FETCH C INTO X_Rowid;
    if (C%NOTFOUND) then
      CLOSE C;
      Raise NO_DATA_FOUND;
    end if;
    CLOSE C;

  END Insert_Row;

  PROCEDURE Update_Row(X_Rowid                          VARCHAR2,
                       X_Select_Flag                    VARCHAR2,
                       X_Select_Quantity                NUMBER

  ) IS
  BEGIN
    UPDATE bom_config_explosions
    SET
       select_flag                     =     X_Select_Flag,
       select_quantity                 =     X_Select_Quantity
    WHERE rowid = X_Rowid;

    if (SQL%NOTFOUND) then
      Raise NO_DATA_FOUND;
    end if;
  END Update_Row;

END BOM_CONFIG_EXPLOSIONS_PKG;

/
