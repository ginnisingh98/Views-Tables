--------------------------------------------------------
--  DDL for Package Body HZ_CLASS_CATEGORIES_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."HZ_CLASS_CATEGORIES_PKG" AS
/*$Header: ARHCSCTB.pls 115.9 2002/11/21 20:33:45 sponnamb ship $ */

PROCEDURE Insert_Row (
    X_CLASS_CATEGORY                        IN     VARCHAR2,
    X_ALLOW_MULTI_PARENT_FLAG               IN     VARCHAR2,
    X_ALLOW_MULTI_ASSIGN_FLAG               IN     VARCHAR2,
    X_ALLOW_LEAF_NODE_ONLY_FLAG             IN     VARCHAR2,
    X_OBJECT_VERSION_NUMBER                 IN     NUMBER,
    X_CREATED_BY_MODULE                     IN     VARCHAR2,
    X_APPLICATION_ID                        IN     NUMBER,
    X_DELIMITER				    IN     VARCHAR2
) IS

BEGIN

    INSERT INTO HZ_CLASS_CATEGORIES (
        CLASS_CATEGORY,
        ALLOW_MULTI_PARENT_FLAG,
        ALLOW_MULTI_ASSIGN_FLAG,
        CREATED_BY,
        CREATION_DATE,
        LAST_UPDATE_LOGIN,
        LAST_UPDATE_DATE,
        LAST_UPDATED_BY,
        ALLOW_LEAF_NODE_ONLY_FLAG,
        OBJECT_VERSION_NUMBER,
        CREATED_BY_MODULE,
        APPLICATION_ID,
	DELIMITER
    )
    VALUES (
        DECODE( X_CLASS_CATEGORY, FND_API.G_MISS_CHAR, NULL, X_CLASS_CATEGORY ),
        DECODE( X_ALLOW_MULTI_PARENT_FLAG, FND_API.G_MISS_CHAR, NULL, X_ALLOW_MULTI_PARENT_FLAG ),
        DECODE( X_ALLOW_MULTI_ASSIGN_FLAG, FND_API.G_MISS_CHAR, NULL, X_ALLOW_MULTI_ASSIGN_FLAG ),
        HZ_UTILITY_V2PUB.CREATED_BY,
        HZ_UTILITY_V2PUB.CREATION_DATE,
        HZ_UTILITY_V2PUB.LAST_UPDATE_LOGIN,
        HZ_UTILITY_V2PUB.LAST_UPDATE_DATE,
        HZ_UTILITY_V2PUB.LAST_UPDATED_BY,
        DECODE( X_ALLOW_LEAF_NODE_ONLY_FLAG, FND_API.G_MISS_CHAR, NULL, X_ALLOW_LEAF_NODE_ONLY_FLAG ),
        DECODE( X_OBJECT_VERSION_NUMBER, FND_API.G_MISS_NUM, NULL, X_OBJECT_VERSION_NUMBER ),
        DECODE( X_CREATED_BY_MODULE, FND_API.G_MISS_CHAR, NULL, X_CREATED_BY_MODULE ),
        DECODE( X_APPLICATION_ID, FND_API.G_MISS_NUM, NULL, X_APPLICATION_ID ),
	DECODE( X_DELIMITER, FND_API.G_MISS_CHAR, '/', NULL,'/',X_DELIMITER )
       );

END Insert_Row;

PROCEDURE Update_Row (
    X_CLASS_CATEGORY                        IN     VARCHAR2,
    X_ALLOW_MULTI_PARENT_FLAG               IN     VARCHAR2,
    X_ALLOW_MULTI_ASSIGN_FLAG               IN     VARCHAR2,
    X_ALLOW_LEAF_NODE_ONLY_FLAG             IN     VARCHAR2,
    X_OBJECT_VERSION_NUMBER                 IN     NUMBER,
    X_CREATED_BY_MODULE                     IN     VARCHAR2,
    X_APPLICATION_ID                        IN     NUMBER,
    X_DELIMITER				    IN     VARCHAR2
) IS

BEGIN

    UPDATE HZ_CLASS_CATEGORIES SET
        ALLOW_MULTI_PARENT_FLAG = DECODE( X_ALLOW_MULTI_PARENT_FLAG, NULL, ALLOW_MULTI_PARENT_FLAG, FND_API.G_MISS_CHAR, NULL, X_ALLOW_MULTI_PARENT_FLAG ),
        ALLOW_MULTI_ASSIGN_FLAG = DECODE( X_ALLOW_MULTI_ASSIGN_FLAG, NULL, ALLOW_MULTI_ASSIGN_FLAG, FND_API.G_MISS_CHAR, NULL, X_ALLOW_MULTI_ASSIGN_FLAG ),
        ALLOW_LEAF_NODE_ONLY_FLAG = DECODE( X_ALLOW_LEAF_NODE_ONLY_FLAG, NULL, ALLOW_LEAF_NODE_ONLY_FLAG, FND_API.G_MISS_CHAR, NULL, X_ALLOW_LEAF_NODE_ONLY_FLAG ),
        LAST_UPDATE_LOGIN = HZ_UTILITY_V2PUB.LAST_UPDATE_LOGIN,
        LAST_UPDATE_DATE = HZ_UTILITY_V2PUB.LAST_UPDATE_DATE,
        LAST_UPDATED_BY = HZ_UTILITY_V2PUB.LAST_UPDATED_BY,
        OBJECT_VERSION_NUMBER = DECODE( X_OBJECT_VERSION_NUMBER, NULL, OBJECT_VERSION_NUMBER, FND_API.G_MISS_NUM, NULL, X_OBJECT_VERSION_NUMBER ),
        CREATED_BY_MODULE = DECODE( X_CREATED_BY_MODULE, NULL, CREATED_BY_MODULE, FND_API.G_MISS_CHAR, NULL, X_CREATED_BY_MODULE ),
        APPLICATION_ID = DECODE( X_APPLICATION_ID, NULL, APPLICATION_ID,FND_API.G_MISS_NUM, NULL, X_APPLICATION_ID ),
        DELIMITER = DECODE( X_DELIMITER, NULL, DELIMITER, FND_API.G_MISS_CHAR, '/', X_DELIMITER )
    WHERE CLASS_CATEGORY = X_CLASS_CATEGORY;

    IF ( SQL%NOTFOUND ) THEN
        RAISE NO_DATA_FOUND;
    END IF;

END Update_Row;

PROCEDURE Lock_Row (
    X_CLASS_CATEGORY                        IN     VARCHAR2,
    X_ALLOW_MULTI_PARENT_FLAG               IN     VARCHAR2,
    X_ALLOW_MULTI_ASSIGN_FLAG               IN     VARCHAR2,
    X_CREATED_BY                            IN     NUMBER,
    X_CREATION_DATE                         IN     DATE,
    X_LAST_UPDATE_LOGIN                     IN     NUMBER,
    X_LAST_UPDATE_DATE                      IN     DATE,
    X_LAST_UPDATED_BY                       IN     NUMBER,
    X_ALLOW_LEAF_NODE_ONLY_FLAG             IN     VARCHAR2,
    X_OBJECT_VERSION_NUMBER                 IN     NUMBER,
    X_CREATED_BY_MODULE                     IN     VARCHAR2,
    X_APPLICATION_ID                        IN     NUMBER,
    X_DELIMITER				    IN     VARCHAR2
) IS

    CURSOR C IS
        SELECT * FROM HZ_CLASS_CATEGORIES
        WHERE  CLASS_CATEGORY = X_CLASS_CATEGORY
        FOR UPDATE NOWAIT;
    Recinfo C%ROWTYPE;

BEGIN

    OPEN C;
    FETCH C INTO Recinfo;
    IF ( C%NOTFOUND ) THEN
        CLOSE C;
        FND_MESSAGE.SET_NAME('FND', 'FORM_RECORD_DELETED');
        APP_EXCEPTION.RAISE_EXCEPTION;
    END IF;
    CLOSE C;

    IF (
        ( ( Recinfo.CLASS_CATEGORY = X_CLASS_CATEGORY )
        OR ( ( Recinfo.CLASS_CATEGORY IS NULL )
            AND (  X_CLASS_CATEGORY IS NULL ) ) )
    AND ( ( Recinfo.ALLOW_MULTI_PARENT_FLAG = X_ALLOW_MULTI_PARENT_FLAG )
        OR ( ( Recinfo.ALLOW_MULTI_PARENT_FLAG IS NULL )
            AND (  X_ALLOW_MULTI_PARENT_FLAG IS NULL ) ) )
    AND ( ( Recinfo.ALLOW_MULTI_ASSIGN_FLAG = X_ALLOW_MULTI_ASSIGN_FLAG )
        OR ( ( Recinfo.ALLOW_MULTI_ASSIGN_FLAG IS NULL )
            AND (  X_ALLOW_MULTI_ASSIGN_FLAG IS NULL ) ) )
    AND ( ( Recinfo.CREATED_BY = X_CREATED_BY )
        OR ( ( Recinfo.CREATED_BY IS NULL )
            AND (  X_CREATED_BY IS NULL ) ) )
    AND ( ( Recinfo.CREATION_DATE = X_CREATION_DATE )
        OR ( ( Recinfo.CREATION_DATE IS NULL )
            AND (  X_CREATION_DATE IS NULL ) ) )
    AND ( ( Recinfo.LAST_UPDATE_LOGIN = X_LAST_UPDATE_LOGIN )
        OR ( ( Recinfo.LAST_UPDATE_LOGIN IS NULL )
            AND (  X_LAST_UPDATE_LOGIN IS NULL ) ) )
    AND ( ( Recinfo.LAST_UPDATE_DATE = X_LAST_UPDATE_DATE )
        OR ( ( Recinfo.LAST_UPDATE_DATE IS NULL )
            AND (  X_LAST_UPDATE_DATE IS NULL ) ) )
    AND ( ( Recinfo.LAST_UPDATED_BY = X_LAST_UPDATED_BY )
        OR ( ( Recinfo.LAST_UPDATED_BY IS NULL )
            AND (  X_LAST_UPDATED_BY IS NULL ) ) )
    AND ( ( Recinfo.ALLOW_LEAF_NODE_ONLY_FLAG = X_ALLOW_LEAF_NODE_ONLY_FLAG )
        OR ( ( Recinfo.ALLOW_LEAF_NODE_ONLY_FLAG IS NULL )
            AND (  X_ALLOW_LEAF_NODE_ONLY_FLAG IS NULL ) ) )
    AND ( ( Recinfo.OBJECT_VERSION_NUMBER = X_OBJECT_VERSION_NUMBER )
        OR ( ( Recinfo.OBJECT_VERSION_NUMBER IS NULL )
            AND (  X_OBJECT_VERSION_NUMBER IS NULL ) ) )
    AND ( ( Recinfo.CREATED_BY_MODULE = X_CREATED_BY_MODULE )
        OR ( ( Recinfo.CREATED_BY_MODULE IS NULL )
            AND (  X_CREATED_BY_MODULE IS NULL ) ) )
    AND ( ( Recinfo.DELIMITER = X_DELIMITER )
        OR ( ( Recinfo.DELIMITER IS NULL )
            AND (  X_DELIMITER IS NULL ) ) )
    AND ( ( Recinfo.APPLICATION_ID = X_APPLICATION_ID )
        OR ( ( Recinfo.APPLICATION_ID IS NULL )
            AND (  X_APPLICATION_ID IS NULL ) ) )
    ) THEN
        RETURN;
    ELSE
        FND_MESSAGE.SET_NAME('FND', 'FORM_RECORD_DELETED');
        APP_EXCEPTION.RAISE_EXCEPTION;
    END IF;

END Lock_Row;

PROCEDURE Select_Row (
    X_CLASS_CATEGORY                        IN OUT NOCOPY VARCHAR2,
    X_ALLOW_MULTI_PARENT_FLAG               OUT NOCOPY    VARCHAR2,
    X_ALLOW_MULTI_ASSIGN_FLAG               OUT NOCOPY    VARCHAR2,
    X_ALLOW_LEAF_NODE_ONLY_FLAG             OUT NOCOPY    VARCHAR2,
    X_CREATED_BY_MODULE                     OUT NOCOPY    VARCHAR2,
    X_APPLICATION_ID                        OUT NOCOPY    NUMBER,
    X_DELIMITER				    OUT NOCOPY    VARCHAR2
) IS

BEGIN

    SELECT
        NVL( CLASS_CATEGORY, FND_API.G_MISS_CHAR ),
        NVL( ALLOW_MULTI_PARENT_FLAG, FND_API.G_MISS_CHAR ),
        NVL( ALLOW_MULTI_ASSIGN_FLAG, FND_API.G_MISS_CHAR ),
        NVL( ALLOW_LEAF_NODE_ONLY_FLAG, FND_API.G_MISS_CHAR ),
        NVL( CREATED_BY_MODULE, FND_API.G_MISS_CHAR ),
        NVL( APPLICATION_ID, FND_API.G_MISS_NUM ),
        NVL( DELIMITER, FND_API.G_MISS_CHAR )
    INTO
        X_CLASS_CATEGORY,
        X_ALLOW_MULTI_PARENT_FLAG,
        X_ALLOW_MULTI_ASSIGN_FLAG,
        X_ALLOW_LEAF_NODE_ONLY_FLAG,
        X_CREATED_BY_MODULE,
        X_APPLICATION_ID,
	X_DELIMITER
    FROM HZ_CLASS_CATEGORIES
    WHERE CLASS_CATEGORY = X_CLASS_CATEGORY;

EXCEPTION
    WHEN NO_DATA_FOUND THEN
        FND_MESSAGE.SET_NAME( 'AR', 'HZ_API_NO_RECORD' );
        FND_MESSAGE.SET_TOKEN( 'RECORD', 'class_category_rec');
        FND_MESSAGE.SET_TOKEN( 'VALUE', X_CLASS_CATEGORY );
        FND_MSG_PUB.ADD;
        RAISE FND_API.G_EXC_ERROR;

END Select_Row;

PROCEDURE Delete_Row (
    X_CLASS_CATEGORY                        IN     VARCHAR2
) IS

BEGIN

    DELETE FROM HZ_CLASS_CATEGORIES
    WHERE CLASS_CATEGORY = X_CLASS_CATEGORY;

    IF ( SQL%NOTFOUND ) THEN
        RAISE NO_DATA_FOUND;
    END IF;

END Delete_Row;

END HZ_CLASS_CATEGORIES_PKG;

/
