--------------------------------------------------------
--  DDL for Package Body BIM_OPPORTUNITIES_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE BODY "APPS"."BIM_OPPORTUNITIES_PKG" AS
/* $Header: bimopprb.pls 115.3 2000/02/02 10:08:12 pkm ship  $ */

FUNCTION ORDERS_GENERATED(p_opportunity_id NUMBER) RETURN NUMBER AS
	LN_ORDERS_GENERATED PLS_INTEGER;
BEGIN

	SELECT COUNT(distinct ASO2.OBJECT_ID) INTO LN_ORDERS_GENERATED
	FROM
			ASO_QUOTE_RELATED_OBJECTS ASO1,
			ASO_QUOTE_RELATED_OBJECTS ASO2
	WHERE
			ASO1.OBJECT_TYPE_CODE = 'OPPORTUNITY' AND
			ASO1.OBJECT_ID = p_opportunity_id AND
			ASO1.RELATIONSHIP_TYPE_CODE = 'OPP_QUOTE' AND
			ASO1.QUOTE_OBJECT_ID = ASO2.QUOTE_OBJECT_ID AND
			ASO1.QUOTE_OBJECT_TYPE_CODE = ASO2.QUOTE_OBJECT_TYPE_CODE AND
			ASO2.RELATIONSHIP_TYPE_CODE = 'QUOTE_ORDER';

	RETURN LN_ORDERS_GENERATED;

END ORDERS_GENERATED;

END BIM_OPPORTUNITIES_PKG;

/
