--------------------------------------------------------
--  DDL for Package INV_MGD_MVT_STATS_PUB
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "APPS"."INV_MGD_MVT_STATS_PUB" AUTHID CURRENT_USER AS
-- $Header: INVPMVTS.pls 120.0 2005/05/25 06:34:37 appldev noship $
/*#
 * Provides various functionality for the Movement Statistics module.
 * This includes processing, validating, creating, updating, resetting
 * and purging of Movement Statistics data.
 * @rep:scope public
 * @rep:product INV
 * @rep:displayname Movement Statistics
 * @rep:lifecycle active
 * @rep:category BUSINESS_ENTITY INV_MOVEMENT_STATISTICS
 */
--+=======================================================================+
--|               Copyright (c) 1998 Oracle Corporation                   |
--|                       Redwood Shores, CA, USA                         |
--|                         All rights reserved.                          |
--+=======================================================================+
--| FILENAME                                                              |
--|     INVPMVTS.pls                                                      |
--|                                                                       |
--| DESCRIPTION                                                           |
--|    Spec of INV_MGD_MVT_STATS_PUB                                      |
--|                                                                       |
--|                                                                       |
--| HISTORY                                                               |
--|     06/14/00 pseshadr        Created                                  |
--|     06/15/00 ksaini          Added Procedure                          |
--|     01/24/05 vchu            Added Annotations for Integration        |
--|                              Repository                               |
--+======================================================================*/


--========================================================================
-- PROCEDURE : Process_Transaction PUBLIC
-- PARAMETERS: p_api_version_number    known api version
--             p_init_msg_list         FND_API.G_TRUE to reset list
--             x_return_status         return status
--             x_msg_count             number of messages in the list
--             x_msg_data              message text
--             p_legal_entity_id       Legal Entity ID
--             p_start_date            Transaction start date
--             p_end_date              Transaction end date
--             p_source type           Transaction type (SO,PO etc)
-- COMMENT   : Public Procedure
-- COMMENT   :
--             This processes all the transaction for the specified legal
--             entity that have a transaction date within the specified
--             date range.
--========================================================================
/*#
 * Processes all the transactions for the specified legal entity that
 * have a transaction date within the specified date range. Types of
 * transactions can be Sales Order, Purchase Order, Inventory Transfer,
 * Internal Order, Return Material Authorization or Return To Vendor.
 * The data generated by the processor is inserted into the Movement
 * Statistics table, which is used for Intrastat Reporting.
 * @param p_api_version_number Standard API parameter
 * @param p_init_msg_list Standard API parameter
 * @param p_legal_entity_id Legal Entity ID
 * @param p_start_date Transaction start date
 * @param p_end_date Transaction end date
 * @param p_source_type Transaction type. Options are PO, SO, INV,
 *        IO, RMA and RTV
 * @param x_return_status Standard API parameter
 * @param x_msg_count Standard API parameter
 * @param x_msg_data Standard API parameter
 * @rep:scope public
 * @rep:lifecycle active
 * @rep:displayname Process Transaction
 */
PROCEDURE Process_Transaction
( p_api_version_number   IN  NUMBER
, p_init_msg_list        IN  VARCHAR2 := FND_API.G_FALSE
, p_legal_entity_id      IN  NUMBER
, p_start_date           IN  DATE
, p_end_date             IN  DATE
, p_source_type          IN  VARCHAR2
, x_return_status        OUT NOCOPY VARCHAR2
, x_msg_count            OUT NOCOPY NUMBER
, x_msg_data             OUT NOCOPY VARCHAR2
);


--========================================================================
-- PROCEDURE : Create_Movement_Statistics PUBLIC
-- PARAMETERS: p_api_version_number    known api version
--             p_init_msg_list         FND_API.G_TRUE to reset list
--             x_return_status         return status
--             x_msg_count             number of messages in the list
--             x_msg_data              message text
--             p_movement_transaction  movement transaction data record
-- VERSION   : current version         1.0
--             initial version         1.0
-- COMMENT   : Public Procedure
--=======================================================================
/*#
 * Inserts Movement Statistics data for a transaction into the Movement
 * Statistics table.
 * @param p_api_version_number Standard API parameter
 * @param p_init_msg_list Standard API parameter
 * @param p_movement_transaction Movement transaction data record
 *                               containing data to be inserted into
 *                               the Movement Statistics table.
 * @param x_movement_transaction Movement transaction data record
 *                               containing the data inserted and
 *                               the unique Movement ID generated.
 * @param x_return_status Standard API parameter
 * @param x_msg_count Standard API parameter
 * @param x_msg_data Standard API parameter
 * @rep:scope public
 * @rep:lifecycle active
 * @rep:displayname Create Movement Statistics
 */
PROCEDURE Create_Movement_Statistics
( p_api_version_number   IN  NUMBER
, p_init_msg_list        IN  VARCHAR2 := FND_API.G_FALSE
, p_movement_transaction IN
    INV_MGD_MVT_DATA_STR.Movement_Transaction_Rec_Type
, x_movement_transaction OUT
    INV_MGD_MVT_DATA_STR.Movement_Transaction_Rec_Type
, x_return_status        OUT NOCOPY VARCHAR2
, x_msg_count            OUT NOCOPY NUMBER
, x_msg_data             OUT NOCOPY VARCHAR2
);

--========================================================================
-- PROCEDURE : Reset_Transaction_Status   PUBLIC
--
-- PARAMETERS: x_return_status      Procedure return status
--             x_msg_count          Number of messages in the list
--             x_msg_data           Message text
--             p_api_version_number Known Version Number
--             p_init_msg_list      Empty PL/SQL Table listfor
--                                  Initialization
--
--             p_legal_entity_id    Legal Entity
--             p_zone_code          Zonal Code
--             p_usage_type         Usage Type
--             p_stat_type          Stat Type
----           p_period_name        Period Name for processing
--             p_document_source_type Document Source Type
--                                    (PO,SO,INV,RMA,RTV)
--
-- VERSION   : current version         1.0
--             initial version         1.0
--
-- Updated   :  18/Apr/2002
-- History   :  yawang add parameter p_reset_option
--=======================================================================--
/*#
 * Resets Movement Statistics records to the status Open. Movement
 * Statistics records can be status Open, Pending, Exported, Ignored,
 * Frozen or Verified.  All records except the ones in status pending
 * would be open if the reset option is 'All'.  Only the records in status
 * Ignored would be open if the reset option is 'Ignored Only'.  All
 * records except the ones in status Ignored or Pending would be Open
 * if the rest option is 'Exclude Ignored'.
 * @param p_api_version_number Standard API parameter
 * @param p_init_msg_list Standard API parameter
 * @param p_legal_entity_id Legal Entity ID
 * @param p_zone_code Economic Zone Code
 * @param p_usage_type Usage Type. Options are Internal or External.
 * @param p_stat_type Statistics Type. Options are Intrastat or Extrastat.
 * @param p_period_name Period Name for processing
 * @param p_document_source_type Document Source Type. Options are PO, SO,
 *                               INV, IO, RMA and RTV.
 * @param p_reset_option Reset Option. Options are All, Ignored Only and
 *                       Exclude Ignored.
 * @param x_return_status Standard API parameter
 * @param x_msg_count Standard API parameter
 * @param x_msg_data Standard API parameter
 * @rep:scope public
 * @rep:lifecycle active
 * @rep:displayname Reset Transaction Status
 */
PROCEDURE Reset_Transaction_Status
( p_api_version_number   IN  NUMBER
, p_init_msg_list        IN  VARCHAR2 := FND_API.G_FALSE
, p_legal_entity_id      IN   NUMBER
, p_zone_code            IN   VARCHAR2
, p_usage_type           IN   VARCHAR2
, p_stat_type            IN   VARCHAR2
, p_period_name          IN   VARCHAR2
, p_document_source_type IN   VARCHAR2
, p_reset_option         IN   VARCHAR2
, x_return_status        OUT NOCOPY  VARCHAR2
, x_msg_count            OUT NOCOPY NUMBER
, x_msg_data             OUT NOCOPY VARCHAR2
)
;

--========================================================================
-- PROCEDURE : Purge_Movement_Transactions   PUBLIC
--
-- PARAMETERS: x_return_status      Procedure return status
--             p_legal_entity_id    Legal Entity
--             p_zone_code          Zonal Code
--             p_usage_type         Usage Type
--             p_stat_type          Stat Type
----           p_period_name        Period Name for processing
--             p_document_source_type Document Source Type
--                                    (PO,SO,INV,RMA,RTV)
--
-- VERSION   : current version         1.0
--             initial version         1.0
--
-- COMMENT   : Procedure specification

-- Updated   :  09/Jul/2000
--=======================================================================--
/*#
 * Deletes data from the Movement Statistics table according to the
 * given parameters.
 * @param p_api_version_number Standard API parameter
 * @param p_init_msg_list Standard API parameter
 * @param p_legal_entity_id Legal Entity ID
 * @param p_zone_code Economic Zone Code
 * @param p_usage_type Usage Type. Options are Internal or External.
 * @param p_stat_type Statistics Type. Options are Intrastat or Extrastat.
 * @param p_period_name Period Name for processing
 * @param p_document_source_type Document Source Type. Options are PO, SO,
 *                               INV, IO, RMA and RTV.
 * @param x_return_status Standard API parameter
 * @param x_msg_count Standard API parameter
 * @param x_msg_data Standard API parameter
 * @rep:scope public
 * @rep:lifecycle active
 * @rep:displayname Purge Movement Transactions
 */
PROCEDURE Purge_Movement_Transactions
( p_api_version_number   IN  NUMBER
, p_init_msg_list        IN  VARCHAR2 := FND_API.G_FALSE
, p_legal_entity_id      IN   NUMBER
, p_zone_code            IN   VARCHAR2
, p_usage_type           IN   VARCHAR2
, p_stat_type            IN   VARCHAR2
, p_period_name          IN   VARCHAR2
, p_document_source_type IN   VARCHAR2
, x_return_status        OUT NOCOPY  VARCHAR2
, x_msg_count            OUT NOCOPY NUMBER
, x_msg_data             OUT NOCOPY VARCHAR2
)
;


--===========================================================================
-- PROCEDURE : Validate_Movement_Statistics - PUBLIC
--
-- PARAMETERS:
--             p_movement_statistics     Material Movement Statistics transaction
--                                       Input data record
--             p_movement_stat_usages_rec usage record
--             x_excp_list               PL/SQL Table type list for storing
--                                       and returning the Exception messages
--             x_return_status           Procedure return status
--             x_msg_count               Number of messages in the list
--             x_msg_data                Message text
--             x_movement_statistics     Material Movement Statistics transaction
--                                       Output data record
--
-- VERSION   : current version           1.0
--             initial version           1.0
--
-- COMMENT   :  Procedure specification to Perform the
--              Validation for the Movement
--             Statistics Record FOR Exceptions
--
-- CREATED  : 10/20/1999
--=============================================================================-
/*#
 * Performs validations for the Movement Statistics Record for any Exceptions.
 * @param p_movement_statistics Movement Statistics transaction Input data
 *                              record containing Movement Statistics setup data.
 * @param p_movement_stat_usages_rec Usage record
 * @param x_excp_list PL/SQL Table type list for storing and returning the
 *                    Exception messages
 * @param x_updated_flag Flag that indicates whether the Movement Statistics
 *                       record that matches the input data record has been
 *                       updated.
 * @param x_return_status Standard API parameter
 * @param x_msg_count Standard API parameter
 * @param x_msg_data Standard API parameter
 * @param x_movement_statistics Movement transaction data record containing
 *                              the data which might have been updated.
 * @rep:scope public
 * @rep:lifecycle active
 * @rep:displayname Validate Movement Statistics
 */
PROCEDURE Validate_Movement_Statistics
 ( p_movement_statistics      IN
     INV_MGD_MVT_DATA_STR.Movement_Transaction_Rec_Type
 , p_movement_stat_usages_rec IN
     INV_MGD_MVT_DATA_STR.Movement_Stat_Usages_Rec_Type
 , x_excp_list                OUT NOCOPY
     INV_MGD_MVT_DATA_STR.excp_list
 , x_updated_flag             OUT NOCOPY VARCHAR2
 , x_return_status            OUT NOCOPY VARCHAR2
 , x_msg_count                OUT NOCOPY NUMBER
 , x_msg_data                 OUT NOCOPY VARCHAR2
 , x_movement_statistics      OUT
     INV_MGD_MVT_DATA_STR.Movement_Transaction_Rec_Type
);

--========================================================================
-- PROCEDURE : Update_Movement_Statistics   PUBLIC
--
-- PARAMETERS: x_return_status      Procedure return status
--             x_msg_count          Number of messages in the list
--             x_msg_data           Message text
--             p_movement_statistics  Material Movement Statistics transaction
--                                  Input data record
--
-- COMMENT   : Procedure body to Update the Movement
--             Statistics record with the
--             calculated values ( EX: Invoice information, Status etc ).
-- Updated   : 09/Jul/1999
--=======================================================================--
/*#
 * Updates existing data in the Movement Statistics table.
 * @param p_movement_statistics Movement Statistics transaction Input data record
 * @param x_return_status Standard API parameter
 * @param x_msg_count Standard API parameter
 * @param x_msg_data Standard API parameter
 * @rep:scope public
 * @rep:lifecycle active
 * @rep:displayname Update Movement Statistics
 */
PROCEDURE Update_Movement_Statistics (
  p_movement_statistics          IN
        INV_MGD_MVT_DATA_STR.Movement_Transaction_Rec_Type
, x_return_status                OUT NOCOPY    VARCHAR2
, x_msg_count                    OUT NOCOPY    NUMBER
, x_msg_data                     OUT NOCOPY    VARCHAR2
);

END INV_MGD_MVT_STATS_PUB;

 

/
