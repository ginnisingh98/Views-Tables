--------------------------------------------------------
--  DDL for Package XXAH_VA_AME_WF_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "APPS"."XXAH_VA_AME_WF_PKG" AS
/**************************************************************************
 * VERSION      : $Id: XXAH_VA_AME_WF_PKG.pls 38 2014-08-08 09:32:43Z marc.smeenge@oracle.com $
 * DESCRIPTION  : Contains functionality for the approval workflow.
 *
 * CHANGE HISTORY
 * ==============
 *
 * Date        Authors           Change reference/Description
 * ----------- ----------------- ----------------------------------
 * 09-AUG-2010 Kevin Bouwmeester Genesis
 *************************************************************************/

-- ----------------------------------------------------------------------
-- Global types
-- ----------------------------------------------------------------------

-- ----------------------------------------------------------------------
-- Global constants
-- ----------------------------------------------------------------------

-- ----------------------------------------------------------------------
-- Global variables
-- ----------------------------------------------------------------------

-- ----------------------------------------------------------------------
-- Global cursors
-- ----------------------------------------------------------------------

-- ----------------------------------------------------------------------
-- Global exceptions
-- ----------------------------------------------------------------------

  /**************************************************************************
   *
   * PROCEDURE
   *   is_approval_complete
   *
   * DESCRIPTION
   *   Fetches the next set of approvers (if any) by calling
   *   ame_api2.getNextApprovers4. Also checks whether the
   *   transaction?s approval process is complete. If the process is
   *   incomplete, the node creates and starts a child process for each
   *   approver requiring notification.
   *
   * PARAMETERS
   * ==========
   * NAME              TYPE           DESCRIPTION
   * ----------------- -------------  --------------------------------------
   * itemtype          IN             The internal name for the item type.
   * itemkey           IN             A string that represents a primary key
   *                                  generated by the workflow-enabled
   *                                  application for the item type. The string
   *                                  uniquely identifies the item within an
   *                                  item type.
   * actid             IN             The ID number of the activity from which
   *                                  this procedure is called.
   * funcmode          IN             The execution mode of the activity.
   * resultout         OUT            If a result type is specified in the
   *                                  Activities properties page for the
   *                                  activity in the Oracle Workflow Builder,
   *                                  this parameter represents the expected
   *                                  result that is returned when the procedure
   *                                  completes.
   *
   * PREREQUISITES
   *   List prerequisites to be satisfied
   *
   * CALLED BY
   *   List caller of this procedure
   *
   *************************************************************************/
  PROCEDURE is_approval_complete
  ( p_itemtype   IN  VARCHAR2
  , p_itemkey    IN  VARCHAR2
  , p_actid      IN  NUMBER
  , p_funcmode   IN  VARCHAR2
  , p_resultout  OUT VARCHAR2
  );

  /**************************************************************************
   *
   * PROCEDURE
   *   get_approver_response
   *
   * DESCRIPTION
   *   This procedure gets the approver?s response, passes it to AME, and then
   *   completes the master process? waiting activity (its Wait for Approver
   *   Response node).
   *
   * PARAMETERS
   * ==========
   * NAME              TYPE           DESCRIPTION
   * ----------------- -------------  --------------------------------------
   * p_itemtype        IN             The internal name for the item type.
   * p_itemkey         IN             A string that represents a primary key
   *                                  generated by the workflow-enabled
   *                                  application for the item type. The string
   *                                  uniquely identifies the item within an
   *                                  item type.
   * p_actid           IN             The ID number of the activity from which
   *                                  this procedure is called.
   * p_funcmode        IN             The execution mode of the activity.
   * p_resultout       OUT            If a result type is specified in the
   *                                  Activities properties page for the
   *                                  activity in the Oracle Workflow Builder,
   *                                  this parameter represents the expected
   *                                  result that is returned when the procedure
   *                                  completes.
   *
   * PREREQUISITES
   *   List prerequisites to be satisfied
   *
   * CALLED BY
   *   List caller of this procedure
   *
   *************************************************************************/
  PROCEDURE get_approver_response
  ( p_itemtype   IN   VARCHAR2
  , p_itemkey    IN   VARCHAR2
  , p_actid      IN   NUMBER
  , p_funcmode   IN   VARCHAR2
  , p_resultout  OUT  VARCHAR2
  );

  /**************************************************************************
   *
   * PROCEDURE
   *   set_null
   *
   * DESCRIPTION
   *   suppresses the action history (sets #HISTORY to NULL))
   *
   * PARAMETERS
   * ==========
   * NAME              TYPE           DESCRIPTION
   * ----------------- -------------  --------------------------------------
   * document_id       IN
   * display_type      IN
   * document          IN
   * document_type     IN
   *
   * PREREQUISITES
   *   List prerequisites to be satisfied
   *
   * CALLED BY
   *   List caller of this procedure
   *
   *************************************************************************/
  PROCEDURE set_null
  ( document_id    in      varchar2
  , display_type   in      varchar2
  , document       in out  NOCOPY varchar2
  , document_type  in out  NOCOPY varchar2
  );

  /**************************************************************************
   *
   * PROCEDURE
   *   set_transaction_details
   *
   * DESCRIPTION
   *   Get the detais for the approval notification body.
   *
   * PARAMETERS
   * ==========
   * NAME              TYPE           DESCRIPTION
   * ----------------- -------------  --------------------------------------
   * document_id       IN
   * display_type      IN
   * document          IN
   * document_type     IN
   *
   * PREREQUISITES
   *   List prerequisites to be satisfied
   *
   * CALLED BY
   *   List caller of this procedure
   *
   *************************************************************************/
  PROCEDURE set_transaction_details
  ( document_id    in      varchar2
  , display_type   in      varchar2
  , document       in out  NOCOPY varchar2
  , document_type  in out  NOCOPY varchar2
  );

  PROCEDURE set_transaction_details ( document_id    IN      varchar2
                                    , display_type   IN      varchar2
                                    , DOCUMENT       IN OUT  NOCOPY CLOB
                                    , document_type  IN OUT  NOCOPY varchar2
                                    );

  PROCEDURE reset_approval
  ( p_itemtype   IN   VARCHAR2
  , p_itemkey    IN   VARCHAR2
  , p_actid      IN   NUMBER
  , p_funcmode   IN   VARCHAR2
  , p_resultout  OUT  VARCHAR2
  );
  PROCEDURE set_attachments
  ( p_itemtype   IN   VARCHAR2
  , p_itemkey    IN   VARCHAR2
  , p_actid      IN   NUMBER
  , p_funcmode   IN   VARCHAR2
  , p_resultout  OUT  VARCHAR2
  );
  PROCEDURE get_attachment
  (
    document_id   IN VARCHAR2
   ,display_type  IN VARCHAR2
   ,DOCUMENT      IN OUT BLOB
   ,document_type IN OUT VARCHAR2
  );
  /*
   * procedure checks the lines total with the header amount.
   * if this is not the same the agreement is rejected.
   */
  PROCEDURE check_lines_total
  ( p_itemtype   IN  VARCHAR2
  , p_itemkey    IN  VARCHAR2
  , p_actid      IN  NUMBER
  , p_funcmode   IN  VARCHAR2
  , p_resultout  OUT VARCHAR2
  );

  PROCEDURE PostNtfFunction(p_itemtype   IN varchar2,
                          p_itemkey    IN varchar2,
                          p_actid      IN number,
                          p_funcmode   IN varchar2,
                          p_resultout  IN OUT NOCOPY varchar2
                         );

  PROCEDURE process_related_bpa
  ( p_itemtype   IN  VARCHAR2
  , p_itemkey    IN  VARCHAR2
  , p_actid      IN  NUMBER
  , p_funcmode   IN  VARCHAR2
  , p_resultout  OUT VARCHAR2
  );

  PROCEDURE get_bpa
  (p_header_id IN oe_blanket_headers_all.header_id%TYPE);

END XXAH_VA_AME_WF_PKG;

/
