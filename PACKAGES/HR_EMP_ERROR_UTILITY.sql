--------------------------------------------------------
--  DDL for Package HR_EMP_ERROR_UTILITY
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "APPS"."HR_EMP_ERROR_UTILITY" AUTHID CURRENT_USER as
/* $Header: hreruweb.pkh 120.1 2005/09/23 14:51:02 svittal noship $ */
-- ---------------------------------------------------------------------------
-- |----------------------< raise_system_error >-----------------------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Procedure to set a specified activity to error.
--
-- Pre-Requisities:
--   None.
--
-- In Parameters:
--   p_item_type -> The internal name for the item type.
--   p_item_key  -> A string that represents a primary key generated by
--                  the application for the item type. The string uniquely
--                  identifies the item within an item type.
--   p_transaction_step_id     -> transaction identifier for transaction
--   p_actid     -> Unique identifier for the activity instance.
--   p_set_error_status  -> Boolean to define the status of the activity.
--
-- Post Success:
--   The specified activity instance now has an 'ERROR' status.
--
-- Post Failure:
--   None
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
procedure raise_system_error
  (p_item_type in varchar2
  ,p_item_key  in varchar2
  ,p_actid     in number
  ,p_set_error_status in boolean default true);
-- ---------------------------------------------------------------------------
-- |---------------------< abort_process_in_error >--------------------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Will abort the process in error with an engine status of #Exception
--
-- Pre-Requisities:
--
-- In Parameters:
--   itemtype -> The internal name for the item type.
--   itemkey  -> A string that represents a primary key generated by
--               the application for the item type. The string uniquely
--               identifies the item within an item type.
--   actid    -> Unique identifier for the activity.
--   funmode  -> Functional mode of the activity as defined by workflow.
--
-- Post Success:
--   If the root process is aborted 'SUCCESS' is returned else, 'ERROR' is
--   returned.
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
procedure abort_process_in_error
  (itemtype in     varchar2
  ,itemkey  in     varchar2
  ,actid    in     number
  ,funmode  in     varchar2
  ,result      out nocopy varchar2);
-- ---------------------------------------------------------------------------
-- |------------------------< reset_workflow >-------------------------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Attempts to handle a workflow activity which is in error.
--
-- Pre-Requisities:
--
-- In Parameters:
--   itemtype -> The internal name for the item type.
--   itemkey  -> A string that represents a primary key generated by
--               the application for the item type. The string uniquely
--               identifies the item within an item type.
--   actid    -> Unique identifier for the activity.
--   funmode  -> Functional mode of the activity as defined by workflow.
--
-- Post Success:
--   Result is always NULL
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
procedure reset_workflow
  (itemtype in     varchar2
  ,itemkey  in     varchar2
  ,actid    in     number
  ,funmode  in     varchar2
  ,result      out nocopy varchar2);
-- ---------------------------------------------------------------------------
-- |--------------------< initialise_system_error >--------------------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Sets all system error attributes related to the person using the
--   system. Searches to see if all system error attributes are set. If
--   not creates the required attributes. Once the whole process is done
--   then result is set to 'COMPLETE'.
--
-- Pre-Requisities:
--
-- In Parameters:
--   itemtype -> The internal name for the item type.
--   itemkey  -> A string that represents a primary key generated by
--               the application for the item type. The string uniquely
--               identifies the item within an item type.
--   actid    -> Unique identifier for the activity.
--   funmode  -> Functional mode of the activity as defined by workflow.
--
-- Post Success:
--   result    -> The workflow status of the activity upon completion.
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
procedure initialise_system_error
  (itemtype in     varchar2
  ,itemkey  in     varchar2
  ,actid    in     number
  ,funmode  in     varchar2
  ,result      out nocopy varchar2);
-- ---------------------------------------------------------------------------^M
-- |--------------------< clr_transact_step_messages >-----------------------|^M
-- ---------------------------------------------------------------------------^M
-- {Start Of Comments} ^M
-- ^M
-- Description:^M
--   Sets all error/warning text for a given transaction step ^M
--   in a workflow item attribute to NULL.^M
-- ^M
-- Pre-Requisities: ^M
-- ^M
-- In Parameters:^M
--   p_item_type -> The internal name for the item type.^M
--   p_item_key  -> A string that represents a primary key generated by^M
--                  the application for the item type. The string uniquely ^M
--                  identifies the item within an item type.^M
--   p_transaction_step_id ^M
--               -> transaction identifier for transaction ^M
-- ^M
-- Post Success: ^M
--   The error/warning text is cleared for the transaction step^M
-- ^M
-- Post Failure: ^M
--   None. ^M
-- ^M
-- Developer Implementation Notes: ^M
--   None^M
--^M
-- Access Status: ^M
--   Public. ^M
-- ^M
-- {End Of Comments} ^M
-- ---------------------------------------------------------------------------^M
PROCEDURE clr_transact_step_messages
  (p_item_type           IN wf_items.item_type%TYPE
  ,p_item_key            IN wf_items.item_key%TYPE
  ,p_transaction_step_id IN NUMBER);
-- ---------------------------------------------------------------------
-- |--------------------< clr_activity_messages >-----------------------|
-- ---------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Sets all error/warning text for a given activity
--   in a workflow item attribute to NULL.
--
-- Pre-Requisities:
--
-- In Parameters:
--   p_item_type -> The internal name for the item type.
--   p_item_key  -> A string that represents a primary key generated by
--                  the application for the item type. The string uniquely
--                  identifies the item within an item type.
--   p_actid     -> Activity idenifier to have it's message wiped
--
-- Post Success:
--   The error/warning text is cleared for the transaction step
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
PROCEDURE clr_activity_messages
  (p_item_type           IN wf_items.item_type%TYPE
  ,p_item_key            IN wf_items.item_key%TYPE
  ,p_actid          IN wf_process_activities.instance_id%TYPE);
-- ---------------------------------------------------------------------------
-- |---------------------------< set_transact_step_error_text >--------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Sets the error text for a given transaction step in a workflow
--   item attribute.
--
-- Pre-Requisities:
--
-- In Parameters:
--   p_item_type -> The internal name for the item type.
--   p_item_key  -> A string that represents a primary key generated by
--                  the application for the item type. The string uniquely
--                  identifies the item within an item type.
--   p_transaction_step_id     => transaction identifier for transaction
--   p_error_text         => Error Text for the transaction
--
-- Post Success:
--   The error text is stored for the transaction step
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
PROCEDURE set_transact_step_error_text
  (p_item_type           IN wf_items.item_type%TYPE
  ,p_item_key            IN wf_items.item_key%TYPE
  ,p_transaction_step_id IN NUMBER
  ,p_error_text          IN VARCHAR2);
-- ---------------------------------------------------------------------------
-- |-----------------------< exists_error_text >----------------------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Tests if error text exists for a given activity.
--
-- Pre-Requisities:
--
-- In Parameters:
--   p_item_type -> The internal name for the item type.
--   p_item_key  -> A string that represents a primary key generated by
--                  the application for the item type. The string uniquely
--                  identifies the item within an item type.
--   p_actid     -> The ID number of the activity that this procedure is
--                  called from.
--
-- Post Success:
--   Returns true if error text exists for a given activity false otherwise.
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
FUNCTION exists_error_text
  (p_item_type      IN wf_items.item_type%TYPE
  ,p_item_key       IN wf_items.item_key%TYPE
  ,p_actid          IN wf_process_activities.instance_id%TYPE)
    RETURN BOOLEAN;
-- ---------------------------------------------------------------------------
-- |-----------------------< exists_error_text >----------------------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Tests if error text exists for a given activity.
--
-- Pre-Requisities:
--
-- In Parameters:
--   p_item_type -> The internal name for the item type.
--   p_item_key  -> A string that represents a primary key generated by
--                  the application for the item type. The string uniquely
--                  identifies the item within an item type.
--   p_actid     -> The ID number of the activity that this procedure is
--                  called from.
--   p_transaction_step_id -> transaction step id with in the activity
--
-- Post Success:
--   Returns true if error text exists for a given activity false otherwise.
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
FUNCTION exists_error_text
  (p_item_type      IN wf_items.item_type%TYPE
  ,p_item_key       IN wf_items.item_key%TYPE
  ,p_actid          IN wf_process_activities.instance_id%TYPE
  ,p_transaction_step_id IN hr_api_transaction_steps.transaction_step_id%TYPE)
    RETURN BOOLEAN;
-- ---------------------------------------------------------------------------
-- |------------------------< set_transact_step_warning_text >-----------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Sets the warning text for a given transaction step in a workflow
--   item attribute.
--
-- Pre-Requisities:
--
-- In Parameters:
--   p_item_type -> The internal name for the item type.
--   p_item_key  -> A string that represents a primary key generated by
--                  the application for the item type. The string uniquely
--                  identifies the item within an item type.
--   p_transaction_step_id     => transaction identifier for transaction
--   p_error_text         => Warning Text for the transaction
--
-- Post Success:
--   The error text is stored for the transaction step
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
PROCEDURE set_transact_step_warning_text
  (p_item_type           IN wf_items.item_type%TYPE
  ,p_item_key            IN wf_items.item_key%TYPE
  ,p_transaction_step_id IN NUMBER
  ,p_error_text          IN VARCHAR2);
-- ---------------------------------------------------------------------------
FUNCTION exists_warning_text
  (p_item_type      IN wf_items.item_type%TYPE
  ,p_item_key       IN wf_items.item_key%TYPE
  ,p_actid          IN wf_process_activities.instance_id%TYPE)
    RETURN BOOLEAN;
-- ---------------------------------------------------------------------------
-- |-----------------------< exists_warning_text >----------------------------|
-- ---------------------------------------------------------------------------
-- {Start Of Comments}
--
-- Description:
--   Returns true if warning text exists for a given activity.
--
-- Pre-Requisities:
--
-- In Parameters:
--   p_item_type -> The internal name for the item type.
--   p_item_key  -> A string that represents a primary key generated by
--                  the application for the item type. The string uniquely
--                  identifies the item within an item type.
--   p_actid     -> The ID number of the activity that this procedure is
--                  called from.
--   p_transaction_step_id -> transaction step id with in the activity
--
-- Post Success:
--    Returns true if warning text exists for a given activity
--    otherwise returns false.
--
-- Post Failure:
--   None.
--
-- Developer Implementation Notes:
--   None
--
-- Access Status:
--   Public.
--
-- {End Of Comments}
-- ---------------------------------------------------------------------------
FUNCTION exists_warning_text
  (p_item_type      IN wf_items.item_type%TYPE
  ,p_item_key       IN wf_items.item_key%TYPE
  ,p_actid          IN wf_process_activities.instance_id%TYPE
  ,p_transaction_step_id IN hr_api_transaction_steps.transaction_step_id%TYPE)
    RETURN BOOLEAN;
--
end hr_emp_error_utility;

 

/
