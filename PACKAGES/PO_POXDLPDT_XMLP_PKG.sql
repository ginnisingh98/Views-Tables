--------------------------------------------------------
--  DDL for Package PO_POXDLPDT_XMLP_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "APPS"."PO_POXDLPDT_XMLP_PKG" AUTHID CURRENT_USER AS
/* $Header: POXDLPDTS.pls 120.1.12010000.3 2014/04/29 19:13:58 smididud ship $ */
  P_TITLE VARCHAR2(50);

  P_CONC_REQUEST_ID NUMBER := 0;

  P_QTY_PRECISION NUMBER;

  QTY_PRECISION varchar2(100);

  P_FLEX_ITEM VARCHAR2(800);

  from_lexical varchar2(500);

  from_lexical_1 varchar2(500);

  and_lexical varchar2(500);

  P_FLEX_CAT VARCHAR2(31000);

  P_DELIVERY_LOCATION VARCHAR2(240);

  P_RECEIPT_NUM_FROM VARCHAR2(40);

  P_RECEIPT_NUM_TO VARCHAR2(40);

  P_CATEGORY_FROM VARCHAR2(900);

  P_CATEGORY_TO VARCHAR2(900);

  P_ITEM_FROM VARCHAR2(900);

  P_ITEM_TO VARCHAR2(900);

  P_SHIP_TO_LOCATION VARCHAR2(40);

  P_STRUCT_NUM NUMBER;

  P_ITEM_STRUCT_NUM NUMBER;

  P_WHERE_ITEM VARCHAR2(2400);

  P_WHERE_CAT VARCHAR2(2400);

  P_GROUP_ID NUMBER;

  P_SUPPLY_DAYS VARCHAR2(40);

  P_FLEX_LOCATOR VARCHAR2(800) := '(MSL.SEGMENT1||''\n''||MSL.SEGMENT2||''\n''||MSL.SEGMENT3||''\n''||MSL.SEGMENT4||''\n''||MSL.SEGMENT5||''\n''||MSL.SEGMENT6||''\n''||MSL.SEGMENT7||''\n''||MSL.SEGMENT8||''\n''||MSL.SEGMENT9||''\n''
  ||MSL.SEGMENT10||''\n''||MSL.SEGMENT11||''\n''||MSL.SEGMENT12||''\n''||MSL.SEGMENT13||''\n''||MSL.SEGMENT14||''\n''||MSL.SEGMENT15||''\n''||MSL.SEGMENT16||''\n''||MSL.SEGMENT17||''\n''||MSL.SEGMENT18||''\n''||MSL.SEGMENT19||''\n''||MSL.SEGMENT20)';

  P_WIP_STATUS VARCHAR2(1);

  P_ORG_ID NUMBER;

  P_ORG_DISPLAYED VARCHAR2(60);

  SERIAL_CONTROL_CODE VARCHAR2(40);

  P_INV_STATUS VARCHAR2(1);

  P_WHERE_ORG_ID VARCHAR2(100) := '1=1';

  P_WHERE_GROUP_ID VARCHAR2(200) := '1=1';

  P_WHERE_SHIP_TO_LOCATION VARCHAR2(200) := '1=1';

  P_WHERE_DELIVER_TO_LOCATION VARCHAR2(200) := '1=1';

  P_WHERE_RECEIPT_NUM_FROM VARCHAR2(200) := '1=1';

  P_WHERE_RECEIPT_NUM_TO VARCHAR2(200) := '1=1';

  P_ORDERBY VARCHAR2(200);

  P_SELECT_RECEIPTS VARCHAR2(6200) := 'SELECT rrp.org_id, rrp.item_id,rrp.organization_id rrp_organization_id,MSI.SEGMENT1||''''||MSI.SEGMENT2||''''||MSI.SEGMENT3||''''||MSI.SEGMENT19||''''||MSI.SEGMENT20 C_FLEX_ITEM,MCA.SEGMENT1||''''||MCA.SEGMENT2
  ||''''||MCA.SEGMENT3||''''||MCA.SEGMENT19||''''||MCA.SEGMENT20 C_FLEX_CAT,rrp.revision_num,rrp.category_id,rrp.item_description,rrp.un_num,rrp.un_description,rrp.hazard_class,rrp.routing_name,rrp.document_type_code,rrp.document_number,
  rrp.release_num,rrp.line_num,rrp.buyer_preparer_name,rrp.source_type,rrp.source,rrp.source_unit_of_measure,rrp.vendor_product_num,fnd_date.date_to_canonical(rrp.due_date) due_date,round(rrp.quantity_ordered,:P_qty_precision) quantity_ordered,
  rrp.note_to_receiver,rrp.pll_note_to_receiver,rrp.receipt_num RECEIPT_NUM,rrp.receipt_unit_of_measure,fnd_date.date_to_canonical(rrp.receipt_date) receipt_date,rrp.receipt_location,rrp.receiver_first_name,rrp.receiver_last_name,
  rrp.freight_carrier,round(rrp.quantity_received,:P_qty_precision) quantity_received,rrp.primary_quantity parent_primary_quantity,round(rrp.quantity_remaining,:P_qty_precision) quantity_remaining,rrp.shipment_num,rrp.bill_of_lading,
  rrp.vendor_lot_num,rrp.packing_slip_num,rrp.containers,rrp.receiver_comment,rrp.transaction_type rrp_transaction_type,rrp.transaction_id rrp_transaction_id,rrp.shipment_line_id rrp_shipment_line_id,rrp.shipment_header_id rrp_shipment_header_id,
  rrp.distribution_id rrp_distribution_id,rrp.po_header_id,rrp.po_line_id,rrp.po_line_location_id,rrp.requisition_header_id,rrp.requisition_line_id,rrp.from_interface rrp_from_interface,rrp.deliver_to_location,rrp.license_plate_number,
  rrp.locator_id, rrp.receiving_subinventory  from rcv_receipts_print rrp, mtl_system_items msi, mtl_categories mca';

  P_SELECT_DISTRIBUTIONS VARCHAR2(6200) := 'SELECT rdp.destination_type, rdp.destination, rdp.document_num, rdp.deliver_unit_of_measure, rdp.outstanding_quantity, rdp.note_to_deliver, rdp.pll_note_to_deliver, rdp.deliver_transaction_type,
  rdp.transaction_id, rdp.distribution_id, round( rdp.quantity_delivered, :P_qty_precision) quantity_delivered, fnd_date.date_to_canonical(rdp.delivery_date) delivery_date, rdp.delivered_by, rdp.from_interface, rdp.deliver_to_person,
  rdp.deliver_to_location, rdp.deliver_to_org, rdp.destination_subinventory, rdp.locator_id, MSL.SEGMENT1||'' ''||MSL.SEGMENT2||'' ''||MSL.SEGMENT3||'' ''||MSL.SEGMENT4||'' ''||MSL.SEGMENT5||'' ''||MSL.SEGMENT6||'' ''||MSL.SEGMENT7
  ||'' ''||MSL.SEGMENT8||'' ''||MSL.SEGMENT9||'' ''||MSL.SEGMENT10||'' ''||MSL.SEGMENT11||'' ''||MSL.SEGMENT12||'' ''||MSL.SEGMENT13||'' ''||MSL.SEGMENT14||'' ''||MSL.SEGMENT15||'' ''||MSL.SEGMENT16||'' ''||MSL.SEGMENT17||'' ''||
  MSL.SEGMENT18||'' ''||MSL.SEGMENT19||'' ''||MSL.SEGMENT20 C_FLEX_LOCATOR, we.wip_entity_name job_or_schedule, wl.line_code line , wn.operation_seq_num op_seq, bd.department_code department, rdp.license_plate_number FROM
  rcv_distributions_print rdp, wip_lines wl, wip_entities we, bom_departments bd, wip_operation_resources wr, wip_operations wn, wip_operations wo, mtl_item_locations msl';

  P_RECEIPT_SOURCE_TYPE VARCHAR2(30);

  P_WIP_FROM_DIST VARCHAR2(500);

  P_WIP_SELECT_DIST VARCHAR2(500) := ' rdp.DELIVER_TO_PERSON job_or_schedule, rdp.DESTINATION_SUBINVENTORY line, to_number(null) op_seq, rdp.DESTINATION_SUBINVENTORY department';

  P_WIP_WHERE_DIST VARCHAR2(32000);

  P_UNION_UPPER_UPPER VARCHAR2(32000) := 'SELECT WE.WIP_ENTITY_NAME  Work_Order,WL.LINE_CODE   Line,WRO.DATE_REQUIRED  Date_Required, WRO.QUANTITY_ISSUED  Quantity_Issued,WRO.REQUIRED_QUANTITY  Quantity_Required,''XXX''  Processing_Mode';

  P_UNION_LOWER_UPPER VARCHAR2(32000) := 'SELECT WE.WIP_ENTITY_NAME  Work_Order,WL.LINE_CODE   Line,WRO.DATE_REQUIRED  Date_Required, WRO.QUANTITY_ISSUED  Quantity_Issued,WRO.REQUIRED_QUANTITY  Quantity_Required,''XXX''  Processing_Mode';

  P_UNION_LOWER_LOWER VARCHAR2(32000) := 'FROM MTL_ITEM_QUANTITIES_VIEW MOQ2,WIP_ENTITIES WE,WIP_REQUIREMENT_OPERATIONS WRO,WIP_DISCRETE_JOBS WDJ,WIP_LINES WL, WIP_REPETITIVE_SCHEDULES  WRS where 1=2';

  P_UNION_UPPER_LOWER VARCHAR2(32000) := 'FROM MTL_ITEM_QUANTITIES_VIEW MOQ2,WIP_ENTITIES WE,WIP_REQUIREMENT_OPERATIONS WRO,WIP_DISCRETE_JOBS WDJ,WIP_LINES WL, WIP_REPETITIVE_SCHEDULES  WRS where 1=2';

  P_RECEIPT_LOCATION VARCHAR2(100);

  P_OPERATING_UNIT_ID NUMBER;

  P_OPERATING_UNIT_DISPLAYED VARCHAR2(240);

  C_NUM_RTS_PRINTED NUMBER := 0;

  CP_DELIVERY_LOCATION VARCHAR2(40);

  CP_RECEIPT_NUM_FROM VARCHAR2(40);

  CP_RECEIPT_NUM_TO VARCHAR2(40);

  CP_ITEM_FROM VARCHAR2(900);

  CP_ITEM_TO VARCHAR2(900);

  CP_CATEGORY_FROM VARCHAR2(900);

  CP_CATEGORY_TO VARCHAR2(900);

  CP_SHIP_TO_LOCATION VARCHAR2(40);

  CP_ORG_DISPLAYED VARCHAR2(60);

  CP_TITLE VARCHAR2(50);

  CP_WIP_STATUS VARCHAR2(1);

  CP_OPERATING_UNIT_DISPLAYED VARCHAR2(240);

  FUNCTION GET_P_STRUCT_NUM RETURN BOOLEAN;

  FUNCTION BUYER_PREPARERFORMULA(RRP_TRANSACTION_TYPE IN VARCHAR2) RETURN VARCHAR2;

  FUNCTION DIRECT_RECEIVING_CHECK(RRP_FROM_INTERFACE IN VARCHAR2
                                 ,RRP_TRANSACTION_ID IN NUMBER) RETURN BOOLEAN;

  FUNCTION BLIND_RECEIVING_CHECK(RRP_ORGANIZATION_ID IN NUMBER) RETURN BOOLEAN;

  FUNCTION BOILER_PLATE_DOC_TYPE(RRP_TRANSACTION_TYPE IN VARCHAR2) RETURN CHARACTER;

  FUNCTION BOILER_PLATE_DOC_NUM(RRP_TRANSACTION_TYPE IN VARCHAR2) RETURN CHARACTER;

  FUNCTION BOILER_PLATE_BUYER(RRP_TRANSACTION_TYPE IN VARCHAR2) RETURN CHARACTER;

  FUNCTION DOC_TYPE_BOILERPLATEFORMULA(RRP_TRANSACTION_TYPE IN VARCHAR2) RETURN VARCHAR2;

  FUNCTION DOC_NUM_BOILER_PLATEFORMULA(RRP_TRANSACTION_TYPE IN VARCHAR2) RETURN VARCHAR2;

  FUNCTION DELIVERY_CHECK(RRP_FROM_INTERFACE IN VARCHAR2
                         ,RRP_TRANSACTION_ID IN NUMBER) RETURN BOOLEAN;

  FUNCTION CHILD_DIRECT_RECEIVING_CHECK(RRP_FROM_INTERFACE IN VARCHAR2
                                       ,RRP_TRANSACTION_ID IN NUMBER) RETURN BOOLEAN;

  FUNCTION G_RECEIPTSGROUPFILTER(RRP_TRANSACTION_ID IN NUMBER
                                ,RRP_FROM_INTERFACE IN VARCHAR2) RETURN BOOLEAN;

  FUNCTION C_UNION_UPPER_UPPERFORMULA RETURN VARCHAR2;

  FUNCTION C_UNION_LOWER_UPPERFORMULA RETURN VARCHAR2;

  FUNCTION C_UNION_LOWER_LOWERFORMULA RETURN VARCHAR2;

  FUNCTION C_UNION_UPPER_LOWERFORMULA RETURN VARCHAR2;

  FUNCTION WIP_SELECT_DISTFORMULA RETURN VARCHAR2;

  FUNCTION WIP_FROM_DISTFORMULA RETURN VARCHAR2;

  FUNCTION WIP_WHERE_DISTFORMULA RETURN VARCHAR2;

  FUNCTION WIP_WHERE_DIST_INTERFACEFORMUL RETURN VARCHAR2;

  FUNCTION C_SET_RT_NUMFORMULA(COUNT_DISTRIBUTIONS IN NUMBER
                              ,RRP_TRANSACTION_ID IN NUMBER
                              ,RRP_FROM_INTERFACE IN VARCHAR2) RETURN NUMBER;

  FUNCTION QUANTITY_RECEIVED_fn(RRP_FROM_INTERFACE IN VARCHAR2
                            ,RRP_TRANSACTION_ID IN NUMBER
                            ,PARENT_PRIMARY_QUANTITY IN NUMBER
                            ,C_SUM_CORRECTED_QTY IN NUMBER
                            ,QUANTITY_RECEIVED IN NUMBER
                            ,RRP_SHIPMENT_LINE_ID IN NUMBER
                            ,RECEIPT_UNIT_OF_MEASURE IN VARCHAR2
                            ,ITEM_ID IN NUMBER) RETURN NUMBER;

  FUNCTION SUM_CORRECT_RTV(C_QTY_CORRECTED IN NUMBER
                          ,C_SUM_CORRECT_RTV_QTY IN NUMBER) RETURN NUMBER;

  PROCEDURE GET_PRECISION(ID IN NUMBER);

  FUNCTION C_QUANTITY_REMAINING_PRINTFORM(QUANTITY_REMAINING IN NUMBER
                                         ,SOURCE_UNIT_OF_MEASURE IN VARCHAR2
                                         ,RECEIPT_UNIT_OF_MEASURE IN VARCHAR2
                                         ,ITEM_ID IN NUMBER
                                         ,RRP_ORGANIZATION_ID IN NUMBER) RETURN NUMBER;

  FUNCTION QUANTITY_DELIVERED(PARENT_PRIMARY_QUANTITY IN NUMBER
                             ,C_SUM_CORRECTED_QTY IN NUMBER) RETURN NUMBER;

  FUNCTION AFTERREPORT RETURN BOOLEAN;

  FUNCTION ITEM_NOTEFORMULA(ITEM_NOTE_DATATYPE_ID IN NUMBER
                           ,ITEM_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION LONG_NOTE1FORMULA(LONG_NOTE_DATATYPE_ID IN NUMBER
                            ,LONG_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION LONG_NOTE2FORMULA(TRX_NOTE_DATATYPE_ID IN NUMBER
                            ,TRX_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION PO_HEADER_LONG_NOTEFORMULA(PO_HEADER_NOTE_DATATYPE_ID IN NUMBER
                                     ,PO_HEADER_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION PO_LINE_LONG_NOTEFORMULA(PO_LINE_NOTE_DATATYPE_ID IN NUMBER
                                   ,PO_LINE_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION REQ_HEADER_LONG_NOTEFORMULA(REQ_HEADER_NOTE_DATATYPE_ID IN NUMBER
                                      ,REQ_HEADER_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION REQ_LINE_LONG_NOTEFORMULA(REQ_LINE_NOTE_DATATYPE_ID IN NUMBER
                                    ,REQ_LINE_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION PO_LINE_LOCATION_LONG_NOTEFORM(SHIPMENT_NOTE_DATATYPE_ID IN NUMBER
                                         ,SHIPMENT_NOTE_MEDIA_ID IN NUMBER) RETURN CHAR;

  FUNCTION AFTERPFORM RETURN BOOLEAN;

  PROCEDURE BUILD_QRECEIPTS;

  PROCEDURE BUILD_QDISTRIBUTIONS;

  FUNCTION ROUNDED_QTY_ISSUEDFORMULA(QUANTITY_ISSUED IN NUMBER) RETURN NUMBER;

  FUNCTION ROUNDED_QTY_ON_HANDFORMULA(JOIN_ITEM_ID IN NUMBER
                                     ,JOIN_ORGANIZATION_ID IN NUMBER) RETURN NUMBER;

  FUNCTION ROUNDED_QTY_REQUIREDFORMULA(QUANTITY_REQUIRED IN NUMBER) RETURN NUMBER;

  FUNCTION QUANTITY_SHORTFORMULA(ROUNDED_QTY_REQUIRED IN NUMBER
                                ,ROUNDED_QTY_ISSUED IN NUMBER
                                ,ROUNDED_QTY_ON_HAND IN NUMBER) RETURN NUMBER;

  FUNCTION G_WORK_ORDER_SHORTAGEGROUPFILT(QUANTITY_SHORT IN NUMBER) RETURN BOOLEAN;

  FUNCTION BEFOREREPORT RETURN BOOLEAN;

  FUNCTION CF_DO_PRINTFORMULA(COUNT_DISTRIBUTIONS IN NUMBER
                             ,RRP_TRANSACTION_ID IN NUMBER
                             ,RRP_FROM_INTERFACE IN VARCHAR2) RETURN CHAR;

  FUNCTION CF_BLIND_RCVFORMULA(RRP_ORGANIZATION_ID IN NUMBER) RETURN CHAR;

  FUNCTION CF_DIRECT_RCV_DLVFORMULA(RRP_TRANSACTION_ID IN NUMBER
                                   ,RRP_FROM_INTERFACE IN VARCHAR2) RETURN CHAR;

  FUNCTION CF_SERIAL_NUM_CCFORMULA(SERIAL_NUMBER_CONTROL_COD IN NUMBER) RETURN CHAR;

  FUNCTION BEFOREPFORM RETURN BOOLEAN;

  FUNCTION CF_OPERATING_UNITFORMULA(ORG_ID IN NUMBER) RETURN VARCHAR2;

  FUNCTION CF_RECEIPT_LOCATIONFORMULA(LOCATOR_ID1 IN NUMBER
                                     ,RECEIPT_LOCATION IN VARCHAR2
                                     ,RECEIVING_SUBINVENTORY IN VARCHAR2) RETURN CHAR;

  FUNCTION C_NUM_RTS_PRINTED_P RETURN NUMBER;

  FUNCTION CP_DELIVERY_LOCATION_P RETURN VARCHAR2;

  FUNCTION CP_RECEIPT_NUM_FROM_P RETURN VARCHAR2;

  FUNCTION CP_RECEIPT_NUM_TO_P RETURN VARCHAR2;

  FUNCTION CP_ITEM_FROM_P RETURN VARCHAR2;

  FUNCTION CP_ITEM_TO_P RETURN VARCHAR2;

  FUNCTION CP_CATEGORY_FROM_P RETURN VARCHAR2;

  FUNCTION CP_CATEGORY_TO_P RETURN VARCHAR2;

  FUNCTION CP_SHIP_TO_LOCATION_P RETURN VARCHAR2;

  FUNCTION CP_ORG_DISPLAYED_P RETURN VARCHAR2;

  FUNCTION CP_TITLE_P RETURN VARCHAR2;

  FUNCTION CP_WIP_STATUS_P RETURN VARCHAR2;

  FUNCTION CP_OPERATING_UNIT_DISPLAYED_P RETURN VARCHAR2;

END PO_POXDLPDT_XMLP_PKG;


/
