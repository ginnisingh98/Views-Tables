--------------------------------------------------------
--  DDL for Package GMDQSPEC_APPROVAL_WF_PKG
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "APPS"."GMDQSPEC_APPROVAL_WF_PKG" AUTHID CURRENT_USER AS
/* $Header: GMDQSAPS.pls 120.0 2005/05/25 19:48:12 appldev noship $ */

/*********************************************************************************************************
 Description from workflow user documentation for common parameters used in this package

  p_itemtype  : The internal name for the item type. Item types are defined in the Oracle Workflow Builder.
  p_itemkey   : A string that represents a primary key generated by the workflow-enabled application
                for the item type. The string uniquely identifies the item within an item type.
  p_actid     : The ID number of the activity from which this procedure is called.
  p_funcmode  : The execution mode of the activity. If the activity is a function activity, the mode is
                either 'RUN' or 'CANCEL'. If the activity is a notification activity, with a post-notification
                function, then the mode can be 'RESPOND', 'FORWARD', 'TRANSFER', 'TIMEOUT', or 'RUN'. Other
                execution modes may be added in the future.
  p_resultout : If a result type is specified in the Activities properties page for the activity in the
                Oracle Workflow Builder, this parameter represents the expected result that is returned when
                the procedure completes. The possible results are:


************************************************************************************************************/

  /********************************************************************************
   ***   This procedure is associated with GMDQSPAP_ISAPROVAL_REQUIRED workflow. **
   ***   This code will execute when Spec Approval Business Event is raised.     **
   ***   This verfifies whether approval required for this transaction or not    **
   ***   If approval is required then udated spec status to pending as defined   **
   ***   GMD_QC_STATUS_NEXT and populates workflow attributes                    **
   ********************************************************************************/


  PROCEDURE IS_APPROVAL_REQ  (
      p_itemtype      IN VARCHAR2,
      p_itemkey       IN VARCHAR2,
      p_actid         IN NUMBER,
      p_funcmode      IN VARCHAR2,
      p_resultout     OUT NOCOPY VARCHAR2);

/**************************************************************************************
 *** This procedure is associated with GMDQSPAP_APP_COMMENT activity of the workflow **
 *** When user enters comments in response to a notification this procedure appends  **
 *** comments to internal variable so that full history can be shoed in notification **
 *** body.                                                                           **
 **************************************************************************************/

  PROCEDURE APPEND_COMMENTS (
      p_itemtype      IN VARCHAR2,
      p_itemkey       IN VARCHAR2,
      p_actid         IN NUMBER,
      p_funcmode      IN VARCHAR2,
      p_resultout     OUT NOCOPY VARCHAR2);

/***************************************************************************************
 *** This procedure is associated with VERIFY_ANY_MORE_APPR activity of the workflow  **
 *** once current approver approves status change request this procedure call AME API **
 *** to verify any more approvers need to approve this request. if it needs some more **
 *** approvals then it sets approver info to workflow attrbute. now workflow moves to **
 *** next approval processing. this will continue either all approves approves the    **
 *** request or any one of the rejects. if all approvals are complete then it sets    **
 *** spec status to target status                                                     **
 ***************************************************************************************/


  PROCEDURE ANY_MORE_APPROVERS (
      p_itemtype      IN VARCHAR2,
      p_itemkey       IN VARCHAR2,
      p_actid         IN NUMBER,
      p_funcmode      IN VARCHAR2,
      p_resultout     OUT NOCOPY VARCHAR2);

/****************************************************************************************
 *** This procedure is associated with GMDQSPAP_NOTI_NOT_RESP activity of the workflow **
 *** When approver fails to respond to notification defined in GMD: Workflow timeout   **
 *** profile this procedure sets spec status to start status and ends the workflow     **
 *** approval process.                                                                 **
 ****************************************************************************************/


  PROCEDURE NO_RESPONSE (
      p_itemtype      IN VARCHAR2,
      p_itemkey       IN VARCHAR2,
      p_actid         IN NUMBER,
      p_funcmode      IN VARCHAR2,
      p_resultout     OUT NOCOPY VARCHAR2);

/****************************************************************************************
 *** This procedure is associated with GMDQSPAP_NOTI_REWORK activity of the workflow   **
 *** When approver rejects status change request procedure sets spec status to         **
 *** rework status and ends the workflow approval process.                             **
 ****************************************************************************************/

  PROCEDURE REQ_REJECTED (
      p_itemtype      IN VARCHAR2,
      p_itemkey       IN VARCHAR2,
      p_actid         IN NUMBER,
      p_funcmode      IN VARCHAR2,
      p_resultout     OUT NOCOPY VARCHAR2);

/****************************************************************************************
 *** This procedure is associated with GMDQSPAP_NOTI_APPROVED activity of the workflow **
 *** When approver approves status change request procedure sets AME Approver status   **
 *** to approved status and continues with approval process to verify any more         **
 *** approvals required                                                                **
 ****************************************************************************************/

  PROCEDURE REQ_APPROVED (
      p_itemtype      IN VARCHAR2,
      p_itemkey       IN VARCHAR2,
      p_actid         IN NUMBER,
      p_funcmode      IN VARCHAR2,
      p_resultout     OUT NOCOPY VARCHAR2);

 /*************************************************************************************
  *** Following procedure is to verify any reminder is required when workflow timeout**
  *** occurs                                                                         **
  *************************************************************************************/

  PROCEDURE REMINDAR_CHECK (
      p_itemtype      IN VARCHAR2,
      p_itemkey       IN VARCHAR2,
      p_actid         IN NUMBER,
      p_funcmode      IN VARCHAR2,
      p_resultout     OUT NOCOPY VARCHAR2);

 /**************************************************************************************
  *** Following procedure accepts Status Code and entity type and resolves to Meaning **
  **************************************************************************************/

  FUNCTION GET_STATUS_MEANING(P_STATUS_CODE NUMBER,
                              P_ENTITY_TYPE VARCHAR2) RETURN VARCHAR2;

 /**************************************************************************************
  *** Following procedure is to raise Spec approval business event                    **
  **************************************************************************************/

  PROCEDURE RAISE_SPEC_APPR_EVENT(p_SPEC_ID        NUMBER,
                                  p_START_STATUS   NUMBER,
                                  p_TARGET_STATUS  NUMBER);

END;

 

/
