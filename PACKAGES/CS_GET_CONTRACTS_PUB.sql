--------------------------------------------------------
--  DDL for Package CS_GET_CONTRACTS_PUB
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "APPS"."CS_GET_CONTRACTS_PUB" AUTHID CURRENT_USER AS
/* $Header: csctglcs.pls 115.5 99/08/13 16:30:46 porting ship $ */

/****************************************************************************
  --  GLOBAL VARIABLES
****************************************************************************/

  G_PKG_NAME       	CONSTANT	VARCHAR2(200)	:= 'CS_GET_CONTRACTS_PUB';
  G_APP_NAME       	CONSTANT	VARCHAR2(3)    := 'CS';
  G_API_VERSION	CONSTANT	NUMBER		:= 1;

/****************************************************************************
  --  DATA STRUCTURES
*****************************************************************************/

  TYPE Contracts_Rec_Type IS RECORD (
		V_Contract_Id			CS_CONTRACTS.CONTRACT_ID%TYPE,
		V_Contract_Number		CS_CONTRACTS.CONTRACT_NUMBER%TYPE,
		V_Contract_Status		CS_CONTRACT_STATUSES.NAME%TYPE,
		V_Contract_Start_Date	CS_CONTRACTS.START_DATE_ACTIVE%TYPE,
		V_Contract_End_Date		CS_CONTRACTS.END_DATE_ACTIVE%TYPE,
		V_Contract_Duration		CS_CONTRACTS.DURATION%TYPE,
		V_Currency_Code		CS_CONTRACTS.CURRENCY_CODE%TYPE,
		V_Bill_On				CS_CONTRACTS.BILL_ON%TYPE,
		V_First_Bill_Date		CS_CONTRACTS.FIRST_BILL_DATE%TYPE,
		V_Next_Bill_Date		CS_CONTRACTS.NEXT_BILL_DATE%TYPE,
		V_Workflow_Process_Id	CS_CONTRACTS.WORKFLOW_PROCESS_ID%TYPE,
		V_Renewal_Rule			CS_CONTRACTS.RENEWAL_RULE%TYPE,
		V_Termination_Rule		CS_CONTRACTS.TERMINATION_RULE%TYPE,
		V_Contract_Amount		CS_CONTRACTS.CONTRACT_AMOUNT%TYPE,
		V_Service_Id			CS_CP_SERVICES.CP_SERVICE_ID%TYPE,
		V_Service
						MTL_SYSTEM_ITEMS_KFV.CONCATENATED_SEGMENTS%TYPE,
		V_Service_Start_Date	CS_CP_SERVICES_ALL.START_DATE_ACTIVE%TYPE,
		V_Service_End_Date		CS_CP_SERVICES_ALL.END_DATE_ACTIVE%TYPE,
		V_Coverage_Id			CS_COVERAGES.COVERAGE_ID%TYPE,
		V_Coverage			CS_COVERAGES.NAME%TYPE);
		G_Contract_rec_type contracts_rec_type;

  TYPE Contracts_Tab_Type IS TABLE OF Contracts_Rec_Type INDEX BY BINARY_INTEGER;
	G_Contracts_Tab_Type	Contracts_Tab_Type;

/*****************************************************************************
  --  Procedures and Functions
*****************************************************************************/

  PROCEDURE Get_List_Of_Contracts (
               p_api_version             	IN  	NUMBER,
               p_init_msg_list           	IN  	VARCHAR2  := FND_API.G_FALSE,
               p_commit                  	IN  	VARCHAR2  := FND_API.G_TRUE,
			p_Customer_Product_Id		IN OUT NUMBER,
			p_Business_Process_Id		IN 	NUMBER,
			p_charge_date_time			IN	DATE,
			p_time_zone_id				IN	NUMBER,
			p_exception_coverage_flag	IN	VARCHAR2,
			x_contract_rec_type			OUT	CONTRACTS_REC_TYPE,
			x_Contract_Id				OUT	NUMBER,
			x_Contract_Number			OUT	NUMBER,
			x_Contract_Status			OUT	VARCHAR2,
			x_Contract_Type			OUT	VARCHAR2,
			x_Contract_Group			OUT	VARCHAR2,
			x_Contract_Duration			OUT	NUMBER,
			x_Contract_Period			OUT	VARCHAR2,
			x_Contract_Start_Date		OUT	DATE,
			x_Contract_End_Date			OUT	DATE,
			x_Contract_Agreement		OUT	VARCHAR2,
			x_Contract_Price_List		OUT	VARCHAR2,
			x_Currency_Code			OUT	VARCHAR2,
			x_Invoicing_Rule			OUT	VARCHAR2,
			x_Accounting_Rule			OUT	VARCHAR2,
			x_Billing_Frequency_Period	OUT	VARCHAR2,
			x_Bill_On					OUT	NUMBER,
			x_First_Bill_Date			OUT	DATE,
			x_Next_Bill_Date			OUT	DATE,
			x_Workflow_Process_Id		OUT	NUMBER,
			x_Renewal_Rule				OUT	VARCHAR2,
			x_Termination_Rule			OUT	VARCHAR2,
			x_Contract_Amount			OUT	NUMBER,
			x_discount				OUT	VARCHAR2,
			x_Service_Id				OUT	NUMBER,
			x_Service					OUT	VARCHAR2,
			x_Service_Start_Date		OUT	DATE,
			x_Service_End_Date			OUT	DATE,
			x_Coverage_Id				OUT	NUMBER,
			x_coverage				OUT	VARCHAR2,
			p_rec_count				IN OUT	NUMBER,
               x_return_status          	OUT 	VARCHAR2,
               x_msg_count              	OUT 	NUMBER,
               x_msg_data               	OUT 	VARCHAR2  );

  PROCEDURE Get_List_Of_Contracts (
               p_api_version            	IN	NUMBER,
               p_init_msg_list          	IN	VARCHAR2  := FND_API.G_FALSE,
               p_commit                 	IN	VARCHAR2  := FND_API.G_TRUE,
			p_Coverage_level_value		IN	NUMBER,
			p_coverage_level_code		IN	VARCHAR2,
			p_Business_Process_Id		IN 	NUMBER,
			p_charge_date_time			IN	DATE,
			p_time_zone_id				IN	NUMBER,
			p_exception_coverage_flag	IN	VARCHAR2,
			x_contract_rec_type			OUT	CONTRACTS_REC_TYPE,
			x_Contract_Id				OUT	NUMBER,
			x_Contract_Number			OUT	NUMBER,
			x_Contract_Status			OUT	VARCHAR2,
			x_Contract_Type			OUT	VARCHAR2,
			x_Contract_Group			OUT	VARCHAR2,
			x_Contract_Duration			OUT	NUMBER,
			x_Contract_Period			OUT	VARCHAR2,
			x_Contract_Start_Date		OUT	DATE,
			x_Contract_End_Date			OUT	DATE,
			x_Contract_Agreement		OUT	VARCHAR2,
			x_Contract_Price_List		OUT	VARCHAR2,
			x_Currency_Code			OUT	VARCHAR2,
			x_Invoicing_Rule			OUT	VARCHAR2,
			x_Accounting_Rule			OUT	VARCHAR2,
			x_Billing_Frequency_Period	OUT	VARCHAR2,
			x_Bill_On					OUT	NUMBER,
			x_First_Bill_Date			OUT	DATE,
			x_Next_Bill_Date			OUT	DATE,
			x_Workflow_Process_Id		OUT	NUMBER,
			x_Renewal_Rule				OUT	VARCHAR2,
			x_Termination_Rule			OUT	VARCHAR2,
			x_Contract_Amount			OUT	NUMBER,
			x_discount				OUT	VARCHAR2,
			x_Service_Id				OUT	NUMBER,
			x_Service					OUT	VARCHAR2,
			x_Service_Start_Date		OUT	DATE,
			x_Service_End_Date			OUT	DATE,
			x_Coverage_Id				OUT	NUMBER,
			x_coverage				OUT	VARCHAR2,
			p_rec_count				IN OUT	NUMBER,
               x_return_status          	OUT 	VARCHAR2,
               x_msg_count              	OUT 	NUMBER,
               x_msg_data               	OUT 	VARCHAR2  );

  PROCEDURE Get_List_Of_Contracts (
               p_api_version             	IN	NUMBER,
               p_init_msg_list           	IN	VARCHAR2  := FND_API.G_FALSE,
               p_commit                  	IN	VARCHAR2  := FND_API.G_TRUE,
			p_System_Id				IN 	NUMBER,
			p_site_use_Id				IN	NUMBER,
			p_Business_Process_Id		IN 	NUMBER,
			p_charge_date_time			IN	DATE,
			p_time_zone_id				IN	NUMBER,
			p_exception_coverage_flag	IN	VARCHAR2,
			x_contract_rec_type			OUT	CONTRACTS_REC_TYPE,
			x_Contract_Id				OUT	NUMBER,
			x_Contract_Number			OUT	NUMBER,
			x_Contract_Status			OUT	VARCHAR2,
			x_Contract_Type			OUT	VARCHAR2,
			x_Contract_Group			OUT	VARCHAR2,
			x_Contract_Duration			OUT	NUMBER,
			x_Contract_Period			OUT	VARCHAR2,
			x_Contract_Start_Date		OUT	DATE,
			x_Contract_End_Date			OUT	DATE,
			x_Contract_Agreement		OUT	VARCHAR2,
			x_Contract_Price_List		OUT	VARCHAR2,
			x_Currency_Code			OUT	VARCHAR2,
			x_Invoicing_Rule			OUT	VARCHAR2,
			x_Accounting_Rule			OUT	VARCHAR2,
			x_Billing_Frequency_Period	OUT	VARCHAR2,
			x_Bill_On					OUT	NUMBER,
			x_First_Bill_Date			OUT	DATE,
			x_Next_Bill_Date			OUT	DATE,
			x_Workflow_Process_Id		OUT	NUMBER,
			x_Renewal_Rule				OUT	VARCHAR2,
			x_Termination_Rule			OUT	VARCHAR2,
			x_Contract_Amount			OUT	NUMBER,
			x_discount				OUT	VARCHAR2,
			x_Service_Id				OUT	NUMBER,
			x_Service					OUT	VARCHAR2,
			x_Service_Start_Date		OUT	DATE,
			x_Service_End_Date			OUT	DATE,
			x_Coverage_Id				OUT	NUMBER,
			x_coverage				OUT	VARCHAR2,
			p_rec_count				IN OUT	NUMBER,
               x_return_status          	OUT 	VARCHAR2,
               x_msg_count              	OUT 	NUMBER,
               x_msg_data               	OUT 	VARCHAR2  );

  PROCEDURE Get_List_Of_Contracts (
			p_api_version             	IN	NUMBER,
               p_init_msg_list           	IN	VARCHAR2  := FND_API.G_FALSE,
               p_commit                  	IN	VARCHAR2  := FND_API.G_TRUE,
			p_Customer_Product_Id		IN	OUT NUMBER,
			p_Customer_Id				IN	OUT NUMBER,
			p_site_use_Id				IN	OUT NUMBER,
			p_system_Id				IN	OUT NUMBER,
			p_inventory_Item_Id			IN	OUT NUMBER,
			p_Business_Process_Id		IN 	NUMBER,
			p_charge_date_time			IN	DATE,
			p_time_zone_id				IN	NUMBER,
			p_exception_coverage_flag 	IN	VARCHAR2,
			x_Contract_Id				OUT	NUMBER,
			x_Contract_Number			OUT	NUMBER,
			x_Contract_Status			OUT	VARCHAR2,
			x_Contract_Type			OUT	VARCHAR2,
			x_Contract_Group			OUT	VARCHAR2,
			x_Contract_Duration			OUT	NUMBER,
			x_Contract_Period			OUT	VARCHAR2,
			x_Contract_Start_Date		OUT	DATE,
			x_Contract_End_Date			OUT	DATE,
			x_Contract_Agreement		OUT	VARCHAR2,
			x_Contract_Price_List		OUT	VARCHAR2,
			x_Currency_Code			OUT	VARCHAR2,
			x_Invoicing_Rule			OUT	VARCHAR2,
			x_Accounting_Rule			OUT	VARCHAR2,
			x_Billing_Frequency_Period	OUT	VARCHAR2,
			x_Bill_On					OUT	NUMBER,
			x_First_Bill_Date			OUT	DATE,
			x_Next_Bill_Date			OUT	DATE,
			x_Workflow_Process_Id		OUT	NUMBER,
			x_Renewal_Rule				OUT	VARCHAR2,
			x_Termination_Rule			OUT	VARCHAR2,
			x_Contract_Amount			OUT	NUMBER,
			x_discount				OUT	VARCHAR2,
			x_Service_Id				OUT	NUMBER,
			x_Service					OUT	VARCHAR2,
			x_Service_Start_Date		OUT	DATE,
			x_Service_End_Date			OUT	DATE,
			x_Coverage_Id				OUT	NUMBER,
			x_coverage				OUT	VARCHAR2,
			p_rec_count				IN OUT	NUMBER,
               x_return_status          	OUT 	VARCHAR2,
               x_msg_count              	OUT 	NUMBER,
               x_msg_data               	OUT 	VARCHAR2  );

Procedure migrate_to_table(
               p_api_version            	IN	NUMBER,
               p_init_msg_list          	IN	VARCHAR2  := FND_API.G_FALSE,
               p_commit                 	IN	VARCHAR2  := FND_API.G_TRUE,
			p_contract_rec_type	IN		CONTRACTS_REC_TYPE,
			p_rec_index				IN	NUMBER,
               x_return_status          	OUT 	VARCHAR2,
               x_msg_count              	OUT 	NUMBER,
               x_msg_data               	OUT 	VARCHAR2  );

Procedure count_and_get(
               p_api_version            	IN  	NUMBER,
               p_init_msg_list          	IN  	VARCHAR2  := FND_API.G_FALSE,
               p_commit                 	IN  	VARCHAR2  := FND_API.G_TRUE,
			p_rec_index				IN	NUMBER,
			x_Contract_Id				OUT	NUMBER,
			x_Contract_Number			OUT	NUMBER,
			x_Contract_Status			OUT	VARCHAR2,
			x_Contract_Type			OUT	VARCHAR2,
			x_Contract_Group			OUT	VARCHAR2,
			x_Contract_Duration			OUT	NUMBER,
			x_Contract_Period			OUT	VARCHAR2,
			x_Contract_Start_Date		OUT	DATE,
			x_Contract_End_Date			OUT	DATE,
			x_Contract_Agreement		OUT	VARCHAR2,
			x_Contract_Price_List		OUT	VARCHAR2,
			x_Currency_Code			OUT	VARCHAR2,
			x_Invoicing_Rule			OUT	VARCHAR2,
			x_Accounting_Rule			OUT	VARCHAR2,
			x_Billing_Frequency_Period	OUT	VARCHAR2,
			x_Bill_On					OUT	NUMBER	,
			x_First_Bill_Date			OUT	DATE,
			x_Next_Bill_Date			OUT	DATE,
			x_Workflow_Process_Id		OUT	NUMBER,
			x_Renewal_Rule				OUT	VARCHAR2,
			x_Termination_Rule			OUT	VARCHAR2,
			x_Contract_Amount			OUT	NUMBER,
			x_discount				OUT	VARCHAR2,
			x_Service_Id				OUT	NUMBER,
			x_Service					OUT	VARCHAR2,
			x_Service_Start_Date		OUT	DATE,
			x_Service_End_Date			OUT	DATE,
			x_Coverage_Id				OUT	NUMBER,
			x_coverage				OUT	VARCHAR2,
			p_rec_count				IN OUT	NUMBER,
               x_return_status          	OUT 	VARCHAR2,
               x_msg_count              	OUT 	NUMBER,
               x_msg_data               	OUT 	VARCHAR2  );


Procedure Migrate_to_Out_Variables(
               p_api_version            	IN  	NUMBER,
               p_init_msg_list          	IN  	VARCHAR2  := FND_API.G_FALSE,
               p_commit                 	IN  	VARCHAR2  := FND_API.G_TRUE,
			x_contract_rec_type			IN	CONTRACTS_REC_TYPE,
			x_Contract_Id				OUT	NUMBER,
			x_Contract_Number			OUT	NUMBER,
			x_Contract_Status			OUT	VARCHAR2,
			x_Contract_Type			OUT	VARCHAR2,
			x_Contract_Group			OUT	VARCHAR2,
			x_Contract_Duration			OUT	NUMBER,
			x_Contract_Period			OUT	VARCHAR2,
			x_Contract_Start_Date		OUT	DATE,
			x_Contract_End_Date			OUT	DATE,
			x_Contract_Agreement		OUT	VARCHAR2,
			x_Contract_Price_List		OUT	VARCHAR2,
			x_Currency_Code			OUT	VARCHAR2,
			x_Invoicing_Rule			OUT	VARCHAR2,
			x_Accounting_Rule			OUT	VARCHAR2,
			x_Billing_Frequency_Period	OUT	VARCHAR2,
			x_Bill_On					OUT	NUMBER	,
			x_First_Bill_Date			OUT	DATE,
			x_Next_Bill_Date			OUT	DATE,
			x_Workflow_Process_Id		OUT	NUMBER,
			x_Renewal_Rule				OUT	VARCHAR2,
			x_Termination_Rule			OUT	VARCHAR2,
			x_Contract_Amount			OUT	NUMBER,
			x_discount				OUT	VARCHAR2,
			x_Service_Id				OUT	NUMBER,
			x_Service					OUT	VARCHAR2,
			x_Service_Start_Date		OUT	DATE,
			x_Service_End_Date			OUT	DATE,
			x_Coverage_Id				OUT	NUMBER,
			x_coverage				OUT	VARCHAR2,
               x_return_status          	OUT 	VARCHAR2,
               x_msg_count              	OUT 	NUMBER,
               x_msg_data               	OUT 	VARCHAR2  );

END CS_GET_CONTRACTS_PUB;

 

/
