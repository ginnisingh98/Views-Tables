--------------------------------------------------------
--  DDL for Package CE_AUTO_BANK_CLEAR1
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE PACKAGE "APPS"."CE_AUTO_BANK_CLEAR1" AUTHID CURRENT_USER AS
/* $Header: ceabrc1s.pls 120.5 2008/01/23 13:18:14 kbabu ship $		*/
G_spec_revision 	VARCHAR2(1000) := '$Revision: 120.5 $';

--
-- Functions/Procedures required form SQL functions
--
FUNCTION spec_revision RETURN VARCHAR2;

FUNCTION body_revision RETURN VARCHAR2;

PROCEDURE validate_effective_date (     passin_mode             VARCHAR2,
                                        X_effective_date        DATE,
                                        X_float_handling_flag   VARCHAR2 );

FUNCTION check_matching_status(cr_id            IN NUMBER,
                               orig_status      IN VARCHAR2) RETURN BOOLEAN;

PROCEDURE update_line_unreconciled (X_statement_line_id NUMBER);

PROCEDURE create_statement_line;

PROCEDURE insert_reconciliation (
        Y_statement_line_id     NUMBER
                        DEFAULT CE_AUTO_BANK_MATCH.csl_statement_line_id,
        Y_cleared_trx_type      VARCHAR2,
        Y_cleared_trx_id        NUMBER,
        Y_ar_cash_receipt_id    NUMBER,
        Y_reference_status      VARCHAR2,
        Y_auto_reconciled_flag  VARCHAR2,
        Y_status_flag           VARCHAR2,
        Y_amount                NUMBER     DEFAULT NULL);

PROCEDURE reconcile_rbatch(
        passin_mode                     VARCHAR2,
        rbatch_id                       NUMBER,
        X_statement_line_id     IN OUT NOCOPY  NUMBER,
        gl_date                         DATE,
	value_date			DATE,
        bank_currency                   VARCHAR2,
        exchange_rate_type              VARCHAR2,
        exchange_rate                   NUMBER,
        exchange_rate_date              DATE,
        trx_currency_type               VARCHAR2,
        module                          VARCHAR2,
        X_trx_number            IN OUT NOCOPY  VARCHAR2,
        X_trx_date                      DATE,
        X_deposit_date                  DATE,
        X_amount                        NUMBER,
        X_foreign_diff_amt              NUMBER,
        X_set_of_books_id               NUMBER,
        X_misc_currency_code            VARCHAR2,
        X_receipt_method_id             NUMBER,
        X_bank_account_id               NUMBER,
        X_activity_type_id              NUMBER,
        X_comments                      VARCHAR2,
        X_reference_type                VARCHAR2,
        X_clear_currency_code           VARCHAR2,
        X_tax_id                        NUMBER,
        X_tax_rate			NUMBER,
        X_cr_vat_tax_id                 VARCHAR2,
        X_dr_vat_tax_id                 VARCHAR2,
        X_trx_type                      VARCHAR2        DEFAULT NULL,
        X_statement_header_id   IN OUT NOCOPY  NUMBER,
        X_statement_date                DATE            DEFAULT NULL,
        X_bank_trx_number               VARCHAR2        DEFAULT NULL,
        X_statement_amount              NUMBER          DEFAULT NULL,
        X_original_amount               NUMBER          DEFAULT NULL,
        X_effective_date                DATE,
        X_float_handling_flag           VARCHAR2);

PROCEDURE reconcile_pay_eft( passin_mode       	   	VARCHAR2,
                	 tx_type                        VARCHAR2,
                	 trx_count			NUMBER,
                	 trx_group	                VARCHAR2,
                	 cleared_trx_type               VARCHAR2,
			 cleared_date			DATE,
                	 X_bank_currency               	VARCHAR2,
                	 X_statement_line_id 	        NUMBER,
			 X_statement_line_type		VARCHAR2,
			 trx_currency_type		VARCHAR2,
                	 auto_reconciled_flag		VARCHAR2,
                	 X_statement_header_id          NUMBER,
                	 X_bank_trx_number              VARCHAR2,
                	 X_bank_account_id              VARCHAR2,
                 	 X_payroll_payment_format	VARCHAR2,
                	 X_effective_date		DATE,
                	 X_float_handling_flag		VARCHAR2);

PROCEDURE misc_receipt(         X_passin_mode           VARCHAR2,
                                X_trx_number            VARCHAR2,
                                X_doc_sequence_value    VARCHAR2,
                                X_doc_sequence_id       NUMBER,
                                X_gl_date               DATE,
				X_value_date		DATE,
                                X_trx_date              DATE,
                                X_deposit_date          DATE,
                                X_amount                NUMBER,
                                X_bank_account_amount   NUMBER,
                                X_set_of_books_id       NUMBER,
                                X_misc_currency_code    VARCHAR2,
                                X_exchange_rate_date    DATE,
                                X_exchange_rate_type    VARCHAR2,
                                X_exchange_rate         NUMBER,
                                X_receipt_method_id     NUMBER,
                                X_bank_account_id       NUMBER,
                                X_activity_type_id      NUMBER,
                                X_comments              VARCHAR2,
                                X_reference_type        VARCHAR2,
                                X_reference_id          NUMBER,
                                X_clear_currency_code   VARCHAR2,
                                X_statement_line_id     IN OUT NOCOPY NUMBER,
                                X_tax_id                NUMBER,
                                X_tax_rate		NUMBER,
                                X_paid_from             VARCHAR2,
                                X_module_name           VARCHAR2,
                                X_cr_vat_tax_id         VARCHAR2,
                                X_dr_vat_tax_id         VARCHAR2,
                                trx_currency_type       VARCHAR2,
                                X_cr_id         IN OUT NOCOPY  NUMBER,
				X_effective_date	DATE,
				X_org_id		NUMBER );

PROCEDURE reconcile_pbatch (     passin_mode                    VARCHAR2,
                                 pbatch_id                      NUMBER,
                                 statement_line_id      IN OUT NOCOPY  NUMBER,
                                 gl_date                        DATE,
				 value_date			DATE,
                                 cleared_date                   DATE,
                                 amount_to_clear                NUMBER,
                                 errors_amount                  NUMBER,
                                 charges_amount                 NUMBER,
                                 prorate_amount                 NUMBER,
                                 exchange_rate_type             VARCHAR2,
                                 exchange_rate_date             DATE,
                                 exchange_rate                  NUMBER,
                                 trx_currency_type              VARCHAR2,
                                 X_statement_header_id  IN OUT NOCOPY  NUMBER,
                                 statement_header_date          DATE,
                                 X_trx_type                     VARCHAR2,
                                 X_bank_trx_number              VARCHAR2,
                                 X_currency_code                VARCHAR2,
                                 X_original_amount              NUMBER,
                                 X_effective_date               DATE,
                                 X_float_handling_flag          VARCHAR2,
				 X_bank_currency_code           VARCHAR2,
				 pgroup_id                      VARCHAR2 default null); -- FOR SEPA ER 6700007

PROCEDURE reconcile_stmt(passin_mode                    VARCHAR2,
                         tx_type                        VARCHAR2,
                         trx_id                         NUMBER,
                         trx_status                     VARCHAR2,
                         receipt_type                   VARCHAR2,
                         exchange_rate_type             VARCHAR2,
                         exchange_date                  DATE,
                         exchange_rate                  NUMBER,
                         amount_cleared                 NUMBER,
                         charges_amount                 NUMBER,
                         errors_amount                  NUMBER,
                         gl_date                        DATE,
			 value_date			DATE,
                         cleared_date                   DATE,
                         ar_cash_receipt_id             NUMBER,
                         X_bank_currency                VARCHAR2,
                         X_statement_line_id            IN OUT NOCOPY NUMBER,
                         X_statement_line_type          VARCHAR2,
                         reference_status               VARCHAR2,
                         trx_currency_type              VARCHAR2,
                         auto_reconciled_flag           VARCHAR2,
                         X_statement_header_id          IN OUT NOCOPY NUMBER,
                         X_effective_date               DATE DEFAULT NULL,
                         X_float_handling_flag          VARCHAR2 DEFAULT NULL,
			 X_currency_code		VARCHAR2 default NULL,
			 X_bank_trx_number		VARCHAR2 default NULL,
                         X_reversed_receipt_flag        VARCHAR2);

PROCEDURE reconcile_trx( passin_mode                    VARCHAR2,
                         tx_type                        VARCHAR2,
                         trx_id                         NUMBER,
                         trx_status                     VARCHAR2,
                         receipt_type                   VARCHAR2,
                         exchange_rate_type             VARCHAR2,
                         exchange_date                  DATE,
                         exchange_rate                  NUMBER,
                         amount_cleared                 NUMBER,
                         charges_amount                 NUMBER,
                         errors_amount                  NUMBER,
                         gl_date                        DATE,
			 value_date			DATE,
                         cleared_date                   DATE,
                         ar_cash_receipt_id             NUMBER,
                         X_bank_currency                VARCHAR2,
                         X_statement_line_id            IN OUT NOCOPY NUMBER,
                         X_statement_line_type          VARCHAR2,
                         reference_status               VARCHAR2,
                         trx_currency_type              VARCHAR2,
                         auto_reconciled_flag           VARCHAR2,
                         X_statement_header_id          IN OUT NOCOPY NUMBER,
                         X_statement_header_date        DATE,
                         X_bank_trx_number              VARCHAR2,
                         X_currency_code                VARCHAR2,
                         X_original_amount              NUMBER,
                         X_effective_date               DATE,
                         X_float_handling_flag          VARCHAR2,
                         X_reversed_receipt_flag        VARCHAR2,
	                 X_org_id		       	NUMBER 	DEFAULT NULL,
         	         X_legal_entity_id       	NUMBER 	DEFAULT NULL);

PROCEDURE unclear_process (	passin_mode			VARCHAR2,
				X_header_or_line		VARCHAR2,
			  	tx_type				VARCHAR2,
				clearing_trx_type		VARCHAR2,
				batch_id			NUMBER,
				trx_id				NUMBER,
				cash_receipt_id			NUMBER,
				trx_date			DATE,
				gl_date				DATE,
				cash_receipt_history_id 	IN OUT NOCOPY	NUMBER,
				stmt_line_id			NUMBER,
				status				VARCHAR2,
				cleared_date			DATE,
				transaction_amount		NUMBER,
				error_amount			NUMBER,
				charge_amount			NUMBER,
				currency_code			VARCHAR2,
				xtype				VARCHAR2,
				xdate				DATE,
				xrate				NUMBER ,
                		org_id                          NUMBER,
                 		legal_entity_id                 NUMBER);

PROCEDURE populate_avail_trx(
		X_table				VARCHAR2,
		X_where_clause			VARCHAR,
                X_asset_code_combination_id     NUMBER,
                X_bank_account_id               NUMBER,
                X_from_number			VARCHAR2,
                X_to_number			VARCHAR2,
                X_status			VARCHAR2,
                X_currency_code			VARCHAR2,
                X_reference_id			NUMBER,
                X_from_batch_name		VARCHAR2,
                X_to_batch_name			VARCHAR2,
                X_from_remit_num		VARCHAR2,
                X_to_remit_num			VARCHAR2,
                X_from_date			DATE,
                X_to_date			DATE,
                X_from_maturity_date		DATE,
                X_to_maturity_date		DATE,
                X_customer_id			NUMBER,
                X_receipt_class_id		NUMBER,
                X_receipt_method_id		NUMBER,
                X_deposit_date_from		DATE,
                X_deposit_date_to		DATE,
                X_supplier_id			NUMBER,
                X_reference_type		VARCHAR2,
                X_period_name			VARCHAR2,
                X_from_journal_entry_name	VARCHAR2,
                X_to_journal_entry_name		VARCHAR2,
                X_from_document_number		NUMBER,
                X_to_document_number		NUMBER,
                X_from_je_line_number		NUMBER,
                X_to_je_line_number		NUMBER,
                X_cleared_date			DATE,
                X_value_date			DATE,
                X_gl_date			DATE,
		X_from_amount			NUMBER,
		X_to_amount			NUMBER,
		X_org_id			NUMBER,
		X_legal_entity_id		NUMBER);

END CE_AUTO_BANK_CLEAR1;

/
